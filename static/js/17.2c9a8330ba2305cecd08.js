webpackJsonp([17],{Izm0:function(t,e){},rcTJ:function(t,e){},x61V:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("IaGi"),o=i("ufHF"),a=i("xlys"),c=i("PdD4"),s={components:{SearchCol:n.a,DataTable:o.a,AddSeatDailog:a.a},mixins:[c.a],data:function(){return{showDcc:!1,dccConfig:{}}},created:function(){this.initData(),this.queryData()},methods:{initData:function(){this.initDccConfig(),this.initSearch(),this.initTable()},initSearch:function(){this.search={list:[{type:"input",label:"关键字",currentVal:""}],keyword:0}},initDccConfig:function(){this.dccConfig={label:"DCC邀约员",selectOptions:[],optionLabel:"nickname",optionValue:"id",itemInfo:{ids:[]},itemKey:"ids",isCheckRemove:!0}},initTable:function(){this.dataTable={tr:[{id:"1",label:"坐席组名称",prop:"title",align:"center"},{id:"2",label:"服务门店",prop:"areaOverview",tooltip:!0,align:"center"},{id:"3",label:"DCC邀约员个数",prop:"dccCount",tooltip:!0,align:"center"},{id:"4",label:"DCC负责人",prop:"leaderName",tooltip:!0,align:"center"},{id:"5",label:"更新时间",prop:"updateDate",tooltip:!0,align:"center"},{id:"6",label:"操作",prop:"caozuo",show:"template",minWidth:"150",align:"center"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},border:!0,hasSelect:!1,hasExpand:!1,hasFirstPagination:!1,lastPageLayout:"sizes, prev, pager, next",search:{},hasOperation:!1}},getParams:function(){var t=this.dataTable.page,e=t.currentPage,i=t.pageSize;return{kwd:this.search.list[this.search.keyword].currentVal,pageSize:i,page:e}},queryData:function(){var t=this,e=this,i=this.getParams();this.$fetch.callCenter.seatGroupList(i).then(function(i){t.$handleResponse(i,function(t){e.dataTable.data=t.list?t.list:[],e.dataTable.page=t.page?t.page:e.dataTable.page},!0)}).catch(function(){t.$store.commit("closeLoading")})},handleFn:function(t,e){this.$router.push({path:"add"==t?"/call/seat/seat-manage/add":"/call/seat/seat-manage/edit",query:{id:e.id}})},showAddDcc:function(t){var e=[],i=[];this.$hasArrContent(t.dccs)&&t.dccs.forEach(function(t){e.push(t.dccId),i.push({nickname:t.dccName,id:t.dccId})}),this.dccConfig.itemInfo=t,this.$set(this.dccConfig.itemInfo,"ids",e),this.dccConfig.selectOptions=i,this.showDcc=!0},closeAddDcc:function(t){var e=this;if("success"==t){var i=this.dccConfig.itemInfo,n=i.id,o=i.ids;this.$fetch.callCenter.updateGroupDcc({id:n,dccId:o}).then(function(t){e.$handleResponse(t,function(t){e.showDcc=!1,e.$message.success("添加成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})}else this.showDcc=!1},deleteFn:function(t){var e=this;this.$fetch.callCenter.checkDeleteGroup({groupId:t.id}).then(function(i){e.$handleResponse(i,function(i){var n=0==i.result?"该坐席组名下有线索及潜客数据，一旦删除这些数据坐席处理人置为空，该您确定要删除该坐席组？":"您确定删除该坐席组?";e.doDeleteFn(n,t)},!0)}).catch(function(t){e.$store.commit("closeLoading")})},doDeleteFn:function(t,e){var i=this;this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){i.$fetch.callCenter.deleteGroupSeat({id:e.id}).then(function(t){i.$handleResponse(t,function(t){i.$message.success("删除成功"),i.queryData()},!0)}).catch(function(){i.$store.commit("closeLoading")})})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"seat-manage-page m-20 common-box "},[i("div",{staticClass:"search-flex search-wrap"},[i("search-col",{staticClass:"seat-search",attrs:{info:t.search.list[t.search.keyword],placeholder:"坐席组名称/服务门店"}}),t._v(" "),i("search-col",{staticClass:"seat-search-btn",attrs:{leftCol:0,rightCol:24}},[i("div",{attrs:{slot:"custom"},slot:"custom"},[i("el-button",{staticClass:"m-l-28 w-110",attrs:{round:"",icon:"el-icon-search",size:"small",type:"primary"},on:{click:t.find}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{round:"",icon:"el-icon-delete",size:"small",plain:""},on:{click:t.clear}},[t._v("清空查询条件")])],1)])],1),t._v(" "),i("div",{staticClass:"separate-line w-100-percent"}),t._v(" "),i("div",{staticClass:"p-20"},[i("el-button",{staticClass:"m-b-20",attrs:{round:"",icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){return t.handleFn("add",{})}}},[t._v("新增坐席组")]),t._v(" "),i("data-table",{ref:"DataTableRef",staticClass:"table-cyan",attrs:{table:t.dataTable},on:{searchTable:t.searchTable},scopedSlots:t._u([{key:"caozuo",fn:function(e){return[i("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(i){return t.showAddDcc(e.obj.row)}}},[t._v("添加DCC邀约员")]),t._v(" "),i("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(i){return t.handleFn("edit",e.obj.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),t.showDcc?i("add-seat-dailog",{attrs:{title:"添加DCC邀约员",isDccDialog:!0,config:t.dccConfig,multiple:"","collapse-tags":""},on:{close:t.closeAddDcc}}):t._e()],1)},staticRenderFns:[]};var r=i("VU/8")(s,l,!1,function(t){i("rcTJ")},"data-v-35f4cb83",null);e.default=r.exports},xlys:function(t,e,i){"use strict";var n=i("woOf"),o=i.n(n),a=i("kfhN"),c={props:{title:{type:String,default:"添加坐席"},config:{type:Object,default:{label:"坐席",selectOptions:[],optionLabel:"",optionValue:"",itemInfo:{},itemKey:"name",isCheckRemove:!0}},isDccDialog:{type:Boolean,default:!1}},components:{ScrmFormItem:a.a},data:function(){return{dialogVisible:!0,dialogConfig:{},loading:!1}},created:function(){if(this.copyArr=[],this.dialogConfig=this.$deepCopyContent(this.config),this.dialogConfig.isCheckRemove){var t=this.dialogConfig.itemInfo[this.dialogConfig.itemKey];this.dialogConfig.copyDcc=t?this.$deepCopyContent(t):[],this.copyArr=t?this.$deepCopyContent(t):[]}this.isDccDialog&&this.getSelectList()},methods:{addFn:function(){o()(this.config,this.dialogConfig),this.$emit("close","success")},cancel:function(){this.$emit("close","cancel")},getSelectList:function(){var t=this;this.loading=!0,this.$fetch.callCenter.dccSelectList({page:1,pageSize:1e4}).then(function(e){t.loading=!1,t.$handleResponse(e,function(e){var i=t.$hasArrContent(e)?e:[];t.checkSelectOptions(i)},!1)}).catch(function(){t.loading=!1})},checkSelectOptions:function(t){var e=this,i=[];this.$hasArrContent(this.dialogConfig.selectOptions)&&this.dialogConfig.selectOptions.forEach(function(t){i.push(t[e.dialogConfig.optionValue])}),this.$hasArrContent(i)&&this.$hasArrContent(t)?t.forEach(function(t){-1==i.indexOf(t[e.dialogConfig.optionValue])&&e.dialogConfig.selectOptions.push(t)}):this.dialogConfig.selectOptions=this.dialogConfig.selectOptions.concat(t)},changeTag:function(t){var e=this;if(this.dialogConfig.isCheckRemove)if(this.copyArr.length<=t.length)this.copyArr=this.$deepCopyContent(t);else{var i=this.copyArr.filter(function(e){return-1===t.indexOf(e)});this.dialogConfig.copyDcc.includes(i[0])?(this.loading=!0,this.$fetch.callCenter.checkDccUnbind({dccId:i[0]}).then(function(n){e.loading=!1,e.$handleResponse(n,function(n){if(0==n.result)e.$message.error(n.msg),e.dialogConfig.itemInfo[e.dialogConfig.itemKey]=e.$deepCopyContent(e.copyArr);else{e.copyArr=e.$deepCopyContent(t);for(var o=0,a=e.dialogConfig.copyDcc.length;o<a;o++)if(e.dialogConfig.copyDcc[o]==i[0])return void e.dialogConfig.copyDcc.splice(o,1)}},!0)}).catch(function(t){e.loading=!1})):this.copyArr=this.$deepCopyContent(t)}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"add-seat-dialog",attrs:{title:t.title,visible:t.dialogVisible,width:"520px","append-to-body":"","close-on-click-modal":!1,"before-close":t.cancel},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"110px"}},[i("scrm-form-item",t._g(t._b({attrs:{itemLabel:t.dialogConfig.label,itemType:"select",filterable:!0,selectOptions:t.dialogConfig.selectOptions,optionLabel:t.dialogConfig.optionLabel,optionValue:t.dialogConfig.optionValue,itemInfo:t.dialogConfig.itemInfo,itemKey:t.dialogConfig.itemKey},on:{change:t.changeTag}},"scrm-form-item",t.$attrs,!1),t.$listeners)),t._v(" "),i("el-form-item")],1),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:t.addFn}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var l=i("VU/8")(c,s,!1,function(t){i("Izm0")},"data-v-6f0e24a4",null);e.a=l.exports}});
//# sourceMappingURL=17.2c9a8330ba2305cecd08.js.map