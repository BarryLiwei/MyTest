webpackJsonp([30],{iNiW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),r=a.n(l),i=a("bOdI"),o=a.n(i),s=a("Dd8w"),n=a.n(s),c=a("NYxO"),p=a("/Uby"),d=a("IaGi"),h=a("ufHF"),u=a("RbfQ"),b=a("CKy9"),m=a("PdD4"),f={components:{SearchBar:p.a,SearchCol:d.a,DataTable:h.a,ExportLog:u.a,CommonExport:b.a},mixins:[m.a],data:function(){return{}},created:function(){this.initData(),this.queryData()},computed:n()({},Object(c.b)(["roleKey"])),methods:{initData:function(){this.getBrandList(),this.getClueFrom(),this.getDccList(),this.getClueLevelList(),this.getAreaOptions(),this.getDefeatStatusOptions(),this.getDefeatReasonOptions(),this.initSearch(),this.initTable(),this.initExport()},initExport:function(){this.exportConfig={fileName:"战败导出",ext:"csv",idName:"id",select:[],taskType:"",url:"business.exportDefeatExcel",other:{}},this.logConfig={listUrl:"business.exportDefeatLog",downUrl:"business.exportDefeatExcel"}},initSearch:function(){this.search={list:[{prop:"dccGroup",type:"select",label:"跟进坐席组",currentVal:"",selectOptions:[],optionLabel:"dccGroupName",optionValue:"id"},{prop:"dcc",type:"select",label:"跟进DCC",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"dccName",optionValue:"id"},o()({type:"cascader",label:"客户来源",currentVal:"",oneVal:"",oneOptions:[],oneOptionLabel:"title",oneOptionValue:"id",secondVal:"",isAll:!0,isAllTitle:"全部",secondOptions:[],secondOptionLabel:"title",secondOptionValue:"id"},"isAll",!0),{prop:"brand",type:"select",label:"意向品牌",currentVal:"",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"series",type:"select",label:"意向车系",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"model",type:"select",label:"意向车型",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"select",label:"意向等级",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"select",label:"归属门店",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"select",label:"战败类型",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"datePicker",label:"战败申请时间",currentVal:""},{type:"datePicker",label:"战败处理时间",currentVal:""},{type:"select",label:"战败状态",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"datePicker",label:"建档时间",currentVal:""}],dccGroup:0,dcc:1,customer:2,brand:3,series:4,model:5,level:6,area:7,type:8,apply:9,handle:10,status:11,archive:12}},initTable:function(){this.dataTable={tr:[{id:"1",label:"操作选项",prop:"caozuo",show:"template",minWidth:"100"},{id:"2",label:"客户ID",prop:"userId",tooltip:!0,minWidth:"100"},{id:"3",label:"客户姓名",prop:"nickname",tooltip:!0,minWidth:"100"},{id:"4",label:"手机号码",prop:"tel",tooltip:!0,minWidth:"120"},{id:"5",label:"跟进坐席组",prop:"dccGroupName",tooltip:!0,minWidth:"120"},{id:"6",label:"跟进DCC",prop:"dccName",tooltip:!0,minWidth:"120"},{id:"7",label:"跟进次数",prop:"followTimes",tooltip:!0,minWidth:"100"},{id:"8",label:"战败状态",prop:"reviewStatusName",tooltip:!0,minWidth:"100"},{id:"9",label:"战败类型",prop:"reasonType",tooltip:!0,minWidth:"100"},{id:"10",label:"建档时间",prop:"archiveCreatedAt",tooltip:!0,minWidth:"170"},{id:"11",label:"战败申请时间",prop:"createdAt",tooltip:!0,minWidth:"170"},{id:"12",label:"战败处理时间",prop:"reviewAt",tooltip:!0,minWidth:"170"},{id:"13",label:"归属门店",prop:"areaName",tooltip:!0,minWidth:"130"},{id:"14",label:"意向车型",prop:"model",tooltip:!0,minWidth:"200"},{id:"15",label:"客户来源",prop:"from",show:"template",tooltip:!0,minWidth:"150"},{id:"16",label:"销售顾问",prop:"advisorName",tooltip:!0,minWidth:"120"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},hasSelect:!0,hasExpand:!1,hasFirstPagination:!0,showScrollBar:!0,search:{value:"",show:!0,url:"business.queryDefeatlList",width:"300",placeholder:"客户ID/客户姓名/手机号码",displayCol:["nickname","tel"],params:{id:""}}}},getParams:function(){var e=this.dataTable.page,t=e.currentPage,a=e.pageSize,l=this.search,r=l.dccGroup,i=l.dcc,o=l.customer,s=l.brand,n=l.series,c=l.model,p=l.level,d=l.area,h=l.type,u=l.apply,b=l.handle,m=l.status,f=l.archive,v=l.list;return{dccGroupId:v[r].currentVal,dccId:v[i].currentVal,fromTopId:v[o].oneVal,fromSecondId:v[o].secondVal,brandId:v[s].currentVal,carSeriesId:v[n].currentVal,modelId:v[c].currentVal,level:v[p].currentVal,areaId:v[d].currentVal,reasonTypeId:v[h].currentVal,reviewStatus:v[m].currentVal,applyStartTime:v[u].currentVal&&v[u].currentVal[0]+" 00:00:00",applyEndTime:v[u].currentVal&&v[u].currentVal[1]+" 23:59:59",reviewStartTime:v[b].currentVal&&v[b].currentVal[0]+" 00:00:00",reviewEndTime:v[b].currentVal&&v[b].currentVal[1]+" 23:59:59",archiveCreatedStartTime:v[f].currentVal&&v[f].currentVal[0]+" 00:00:00",archiveCreatedEndTime:v[f].currentVal&&v[f].currentVal[1]+" 23:59:59",pageSize:a,page:t}},queryData:function(){var e=this,t=this,a=this.getParams();this.exportConfig.other=r()({},a),this.$fetch.business.queryDefeatlList(a).then(function(a){e.$handleResponse(a,function(e){t.dataTable.data=e.list?e.list:[],t.dataTable.page=e.page?e.page:t.dataTable.page},!0)}).catch(function(){e.$store.commit("closeLoading")})},seeArchive:function(e){this.$router.push({path:"/business/potential/detail",query:{id:e.intentionId}})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"defeat-list-page m-20 common-box"},[a("search-bar",{staticClass:"m-t-10 p-20",attrs:{size:"small"},on:{clear:e.clear,find:e.find}},[a("div",{staticClass:"search-flex"},[["dcc_supervisor","dcc_group_leader","dcc_inviter"].indexOf(e.roleKey)>-1?a("search-col",{attrs:{info:e.search.list[e.search.dccGroup],filterable:""},on:{change:e.changeDccGroup}}):e._e(),e._v(" "),["dcc_supervisor","dcc_group_leader","dcc_inviter"].indexOf(e.roleKey)>-1?a("search-col",{attrs:{info:e.search.list[e.search.dcc],filterable:""}}):e._e(),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.customer],size:"small"},on:{fristChange:e.changeFrom}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.brand]},on:{change:e.changeBrand}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.series]},on:{change:e.changeSeries}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.model]}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.level]}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.area],filterable:""}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.type]}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.apply],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.handle],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.status]}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.archive],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}})],1)]),e._v(" "),a("div",{staticClass:"p-l-r-20 p-b-20"},[a("data-table",{ref:"DataTableRef",attrs:{table:e.dataTable},on:{searchTable:e.searchTable,onHandleSelectionChange:e.handleSelectionChange},scopedSlots:e._u([{key:"caozuo",fn:function(t){return[a("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(a){return e.seeArchive(t.obj.row)}}},[e._v("档案")])]}},{key:"from",fn:function(t){return[t.obj.row.fromTopName?a("span",[e._v(e._s(t.obj.row.fromTopName)+" ")]):e._e(),e._v(" "),t.obj.row.fromTopName&&t.obj.row.fromSecondName?a("span",[e._v("--")]):e._e(),e._v(" "),t.obj.row.fromSecondName?a("span",[e._v(e._s(t.obj.row.fromSecondName)+" ")]):e._e(),e._v(" "),t.obj.row.fromTopName||t.obj.row.fromSecondName?e._e():a("span",[e._v("--")])]}}])},[a("div",{attrs:{slot:"buttons"},slot:"buttons"})])],1)],1)},staticRenderFns:[]};var y=a("VU/8")(f,v,!1,function(e){a("sPce")},"data-v-d2856c70",null);t.default=y.exports},sPce:function(e,t){}});
//# sourceMappingURL=30.a9e2ef3f13d83359f56a.js.map