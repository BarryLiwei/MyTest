{"version":3,"sources":["webpack:///src/pages/business/clue/ClueDetail.vue","webpack:///./src/pages/business/clue/ClueDetail.vue?839d","webpack:///./src/pages/business/clue/ClueDetail.vue","webpack:///src/components/step/StepTitle.vue","webpack:///./src/components/step/StepTitle.vue?d02d","webpack:///./src/components/step/StepTitle.vue"],"names":["ClueDetail","components","_components","BreadCrumb","StepTitle","FollowRecord","Distribute","defineProperty_default","Actived","data","info","showDistribute","showActived","recordList","followPage","totalCount","page","pageSize","totalPage","dialogLoading","created","this","editId","$route","query","id","getDetail","getFollowList","computed","extends_default","Object","vuex_esm","customeFrom","arr","fromTopName","push","fromSecondName","join","buyPlace","provinceName","cityName","regionName","buyQuotaText","text","buyQuota","methods","_this","$fetch","business","clueDetail","then","res","$handleResponse","catch","$store","commit","reset","_this2","_followPage","params","typeId","common","followListByType","list","length","concat","toConsumableArray_default","handleFollowScroll","handleClue","$router","path","userId","seeArchive","intentionId","distributeFn","_this3","disConfig","title","groupLabel","groupOptions","groupObj","dccLabel","selectId","tip","assignDCCList","ids","operate","listTotal","$hasArrContent","$message","error","$notify","message","closeDistribute","type","val","_this4","assign_default","clueAssign","success","handleActive","_this5","actConfig","closeActived","_this6","InvalidActive","clue_ClueDetail","render","_vm","_h","$createElement","_c","_self","staticClass","_v","indexOf","status","attrs","round","size","disabled","roleKey","on","click","$event","_e","plain","step","ref","label-position","label-width","label","_s","_f","statusName","clueTypeName","dccGroupName","dccName","nickname","tel","grade","areaName","model","record-list","scrollEvent","event-scroll","config","loading","close","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","props","default","content","colorStyle","String","step_StepTitle","span","class","_t"],"mappings":"kTAgEAA,GACAC,YAAAC,GACAC,aAAA,EACAC,YAAA,EACAC,eAAA,EACAC,aAAA,GAJAC,IAAAL,EAAA,aAKAI,EAAA,GALAC,IAAAL,EAAA,UAMAM,EAAA,GANAN,GAQAO,KATA,WAUA,OACAC,QACAC,gBAAA,EACAC,aAAA,EACAC,cACAC,YACAC,WAAA,EACAC,KAAA,EACAC,SAAA,GACAC,UAAA,GAEAC,eAAA,IAGAC,QAxBA,WAyBAC,KAAAC,OAAAD,KAAAE,OAAAC,MAAAC,GACAJ,KAAAK,YACAL,KAAAM,cAAA,SAEAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EAAA,aACAE,YAFA,WAGA,IAAAC,KAOA,OANAZ,KAAAX,MAAAW,KAAAX,KAAAwB,aACAD,EAAAE,KAAAd,KAAAX,KAAAwB,aAEAb,KAAAX,MAAAW,KAAAX,KAAA0B,gBACAH,EAAAE,KAAAd,KAAAX,KAAA0B,gBAEAH,EAAAI,KAAA,OAEAC,SAZA,WAaA,IAAAL,KAUA,OATAZ,KAAAX,MAAAW,KAAAX,KAAA6B,cACAN,EAAAE,KAAAd,KAAAX,KAAA6B,cAEAlB,KAAAX,MAAAW,KAAAX,KAAA8B,UACAP,EAAAE,KAAAd,KAAAX,KAAA8B,UAEAnB,KAAAX,MAAAW,KAAAX,KAAA+B,YACAR,EAAAE,KAAAd,KAAAX,KAAA+B,YAEAR,EAAAI,KAAA,OAEAK,aAzBA,WA0BA,IAAAC,EAAA,GACA,GAAAtB,KAAAX,KACA,OAAAW,KAAAX,KAAAkC,UACA,OAAAD,EAAA,WACA,OAAAA,EAAA,UACA,OAAAA,EAAA,IAGA,OAAAA,KAGAE,SACAnB,UADA,WACA,IAAAoB,EAAAzB,KACAA,KAAA0B,OAAAC,SAAAC,YAAAxB,GAAAJ,KAAAC,SAAA4B,KAAA,SAAAC,GACAL,EAAAM,gBAAAD,EAAA,SAAAA,GACAL,EAAApC,KAAAyC,IACA,KACAE,MAAA,WACAP,EAAAQ,OAAAC,OAAA,mBAGA5B,cAVA,SAUA6B,GAAA,IAAAC,EAAApC,KACA,QAAAmC,IACAnC,KAAAR,cACAQ,KAAAP,WAAAE,KAAA,GAHA,IAAA0C,EAKArC,KAAAP,WAAAE,EALA0C,EAKA1C,KAAAC,EALAyC,EAKAzC,SACA0C,GACAC,OAAA,EACAnC,GAAAJ,KAAAC,OACAN,OACAC,YAEAI,KAAA0B,OAAAc,OAAAC,iBAAAH,GAAAT,KAAA,SAAAC,GACAM,EAAAL,gBAAAD,EAAA,SAAA1C,GAAA,IACAsD,EAAAtD,EAAAsD,KAAA/C,EAAAP,EAAAO,KACA+C,KAAAC,OAAA,IACAP,EAAA5C,cAAAoD,OAAAC,IAAAT,EAAA5C,YAAAqD,IAAAH,KAEAN,EAAA3C,WAAAC,WAAAC,EAAAD,WACA0C,EAAA3C,WAAAI,UAAAF,EAAAE,YACA,KACAmC,MAAA,WACAI,EAAAH,OAAAC,OAAA,mBAGAY,mBAnCA,WAqCA9C,KAAAP,WAAAE,MAAAK,KAAAP,WAAAI,YAGAG,KAAAP,WAAAE,OACAK,KAAAM,kBAEAyC,WA3CA,WA4CA/C,KAAAgD,QAAAlC,MAAAmC,KAAA,kBAAA9C,OAAAC,GAAAJ,KAAAX,KAAAe,GAAA8C,OAAAlD,KAAAX,KAAA6D,WAEAC,WA9CA,WA+CAnD,KAAAgD,QAAAlC,MAAAmC,KAAA,6BAAA9C,OAAAC,GAAAJ,KAAAX,KAAA+D,gBAEAC,aAjDA,WAiDA,IAAAC,EAAAtD,KACAA,KAAAuD,WACAC,MAAA,KACAC,WAAA,QACAC,gBACAC,YACAC,SAAA,QACAC,UAAA7D,KAAAC,QACA6D,IAAA,IAEA9D,KAAA0B,OAAAC,SAAAoC,eAAAC,IAAAhE,KAAAuD,UAAAM,SAAAI,QAAA,WAAApC,KAAA,SAAAC,GACAwB,EAAAvB,gBAAAD,EAAA,SAAAA,GACAwB,EAAAC,UAAAW,UAAApC,EAAAoC,UACA,GAAApC,EAAAoC,WACAZ,EAAAC,UAAAG,aAAAJ,EAAAa,eAAArC,EAAAY,MAAAZ,EAAAY,QACAY,EAAAhE,gBAAA,EACAgE,EAAAxD,eAAA,GACAgC,EAAAoC,UAAA,EACAZ,EAAAc,SAAAC,MAAA,qBAEAf,EAAAgB,QAAAD,OACAb,MAAA,OACAe,QAAA,gBAGA,KACAvC,MAAA,WACAsB,EAAArB,OAAAC,OAAA,mBAGAsC,gBA/EA,SA+EAC,EAAAC,GAAA,IAAAC,EAAA3E,KACA,aAAAyE,EAGA,OAFAzE,KAAAV,gBAAA,OACAU,KAAAF,eAAA,GAGA,IAAAwC,EAAAsC,KAAAZ,IAAAhE,KAAAuD,UAAAM,UAAAa,GACA1E,KAAAF,eAAA,EACAE,KAAA0B,OAAAC,SAAAkD,WAAAvC,GAAAT,KAAA,SAAAC,GACA6C,EAAA5C,gBAAAD,EAAA,SAAAA,GACA6C,EAAAP,SAAAU,QAAA,QACAH,EAAArF,gBAAA,EACAqF,EAAAtE,YACAsE,EAAArE,cAAA,UACA,GACAqE,EAAA7E,eAAA,IACAkC,MAAA,WACA2C,EAAA7E,eAAA,EACA6E,EAAA1C,OAAAC,OAAA,mBAGA6C,aApGA,WAoGA,IAAAC,EAAAhF,KACAA,KAAAiF,WACAzB,MAAA,KACAC,WAAA,QACAC,gBACAC,YACAC,SAAA,QACAC,UAAA7D,KAAAC,QACA6D,IAAA,kCAGA9D,KAAA0B,OAAAC,SAAAoC,eAAAC,IAAAhE,KAAAiF,UAAApB,SAAAI,QAAA,kBAAApC,KAAA,SAAAC,GACAkD,EAAAjD,gBAAAD,EAAA,SAAAA,GACAkD,EAAAC,UAAAf,UAAApC,EAAAoC,UACA,GAAApC,EAAAoC,WACAc,EAAAC,UAAAvB,aAAAsB,EAAAb,eAAArC,EAAAY,MAAAZ,EAAAY,QACAsC,EAAAzF,aAAA,EACAyF,EAAAlF,eAAA,GACAgC,EAAAoC,UAAA,GACAc,EAAAzF,aAAA,EACAyF,EAAAlF,eAAA,EACAkF,EAAAC,UAAAvB,gBACAsB,EAAAC,UAAAnB,IAAA,oCAEAkB,EAAAV,QAAAD,OACAb,MAAA,OACAe,QAAA,gBAGA,KACAvC,MAAA,WACAgD,EAAA/C,OAAAC,OAAA,mBAGAgD,aAtIA,SAsIAT,EAAAC,GAAA,IAAAS,EAAAnF,KACA,aAAAyE,EAGA,OAFAzE,KAAAT,aAAA,OACAS,KAAAF,eAAA,GAGA,IAAAwC,EAAAsC,KAAAZ,IAAAhE,KAAAiF,UAAApB,UAAAa,GACA1E,KAAAF,eAAA,EACAE,KAAA0B,OAAAC,SAAAyD,cAAA9C,GAAAT,KAAA,SAAAC,GACAqD,EAAApD,gBAAAD,EAAA,SAAAA,GACAqD,EAAAf,SAAAU,QAAA,QACAK,EAAA5F,aAAA,EACA4F,EAAA9E,YACA8E,EAAA7E,cAAA,UACA,GACA6E,EAAArF,eAAA,IACAkC,MAAA,WACAmD,EAAArF,eAAA,EACAqF,EAAAlD,OAAAC,OAAA,qBCvRemD,GADEC,OAFjB,WAA0B,IAAAC,EAAAvF,KAAawF,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,0BAAoCF,EAAA,eAAAH,EAAAM,GAAA,KAAAH,EAAA,OAA0CE,YAAA,kCAA4CF,EAAA,OAAYE,YAAA,sBAAgCL,EAAAlG,OAAA,OAAAyG,QAAAP,EAAAlG,KAAA0G,SAAA,EAAAL,EAAA,aAAoEE,YAAA,OAAAI,OAA0BvB,KAAA,UAAAwB,MAAA,GAAAC,KAAA,QAAAC,UAAA,yDAAAL,QAAAP,EAAAa,UAAqIC,IAAKC,MAAA,SAAAC,GAAyB,OAAAhB,EAAAlC,mBAA4BkC,EAAAM,GAAA,QAAAN,EAAAiB,KAAAjB,EAAAM,GAAA,KAAAN,EAAAlG,MAAA,GAAAkG,EAAAlG,KAAA0G,OAAAL,EAAA,aAAyFE,YAAA,OAAAI,OAA0BvB,KAAA,UAAAwB,MAAA,GAAAC,KAAA,QAAAC,SAAA,eAAAZ,EAAAa,SAAiFC,IAAKC,MAAAf,EAAAxC,cAAwBwC,EAAAM,GAAA,QAAAN,EAAAiB,KAAAjB,EAAAM,GAAA,KAAAN,EAAAlG,MAAAkG,EAAAlG,KAAA+D,YAAAsC,EAAA,aAAyFE,YAAA,qBAAAI,OAAwCS,MAAA,GAAAR,MAAA,GAAAC,KAAA,SAAqCG,IAAKC,MAAAf,EAAApC,cAAwBoC,EAAAM,GAAA,UAAAN,EAAAiB,MAAA,GAAAjB,EAAAM,GAAA,KAAAH,EAAA,OAAsDE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,uBAAiCF,EAAA,cAAmBM,OAAOU,MAAQlD,MAAA,WAAkB+B,EAAAM,GAAA,KAAAH,EAAA,WAA4BiB,IAAA,OAAAf,YAAA,SAAAI,OAAuCY,iBAAA,QAAAC,cAAA,WAAgDnB,EAAA,gBAAqBM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAA4H,aAAA,OAAA1B,EAAAM,GAAA,KAAAH,EAAA,gBAAsGM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAA6H,eAAA,OAAA3B,EAAAM,GAAA,KAAAH,EAAA,gBAAwGM,OAAOc,MAAA,WAAiBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAA8H,eAAA,OAAA5B,EAAAM,GAAA,KAAAH,EAAA,gBAAwGM,OAAOc,MAAA,WAAiBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAA+H,UAAA,OAAA7B,EAAAM,GAAA,KAAAH,EAAA,gBAAmGM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAAgI,WAAA,OAAA9B,EAAAM,GAAA,KAAAH,EAAA,gBAAoGM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAAiI,MAAA,OAAA/B,EAAAM,GAAA,KAAAH,EAAA,gBAA+FM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,CAAA,IAAAA,EAAAlG,KAAAkI,MAAAhC,EAAAlG,KAAAkI,MAAA,gBAAAhC,EAAAlG,KAAAkI,MAAA7B,EAAA,QAAAH,EAAAM,GAAA,OAAAN,EAAAiB,OAAAjB,EAAAM,GAAA,KAAAH,EAAA,gBAAgLM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAAmI,WAAA,OAAAjC,EAAAM,GAAA,KAAAH,EAAA,gBAAoGM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlG,KAAAoI,QAAA,OAAAlC,EAAAM,GAAA,KAAAH,EAAA,gBAAiGM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAA5E,iBAAA4E,EAAAM,GAAA,KAAAH,EAAA,gBAA8FM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAtE,cAAAsE,EAAAM,GAAA,KAAAH,EAAA,gBAA2FM,OAAOc,MAAA,UAAgBvB,EAAAM,GAAA,IAAAN,EAAAwB,GAAAxB,EAAAyB,GAAA,cAAAzB,GAAAlE,eAAA,eAAAkE,EAAAM,GAAA,KAAAH,EAAA,OAAkGE,YAAA,UAAoBL,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,wBAAkCF,EAAA,cAAmBM,OAAOU,MAAQlD,MAAA,WAAkB+B,EAAAM,GAAA,KAAAH,EAAA,iBAAkCE,YAAA,iDAAAI,OAAoE0B,cAAAnC,EAAA/F,WAAAmI,aAAA,GAAgDtB,IAAKuB,eAAArC,EAAAzC,uBAAuC,OAAAyC,EAAAM,GAAA,KAAAN,EAAA,eAAAG,EAAA,cAA4DM,OAAO6B,OAAAtC,EAAAhC,UAAAuE,QAAAvC,EAAAzF,eAAmDuG,IAAK0B,MAAAxC,EAAAf,mBAA6Be,EAAAiB,KAAAjB,EAAAM,GAAA,KAAAN,EAAA,YAAAG,EAAA,WAAuDM,OAAO6B,OAAAtC,EAAAN,UAAA6C,QAAAvC,EAAAzF,eAAmDuG,IAAK0B,MAAAxC,EAAAL,gBAA0BK,EAAAiB,MAAA,IAEh2GwB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACExJ,EACA0G,GATF,EAVA,SAAA+C,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,2CCXhC,IAAAlJ,GACAuJ,OACA5B,MACAjC,KAAAhE,OACA8H,QAFA,WAGA,OACA/E,MAAA,MACAgF,QAAA,UAIAC,YACAhE,KAAAiE,OACAH,QAAA,KAGAnJ,KAhBA,WAiBA,WC7BeuJ,GADErD,OAFjB,WAA0B,IAAAC,EAAAvF,KAAawF,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,yCAAmDF,EAAA,UAAAA,EAAA,UAA4BM,OAAO4C,KAAA,MAAWlD,EAAA,QAAaE,YAAA,cAAwBL,EAAAM,GAAAN,EAAAwB,GAAAxB,EAAAmB,KAAAlD,UAAA+B,EAAAM,GAAA,KAAAH,EAAA,QAA0DmD,MAAAtD,EAAAkD,aAAqBlD,EAAAM,GAAAN,EAAAwB,GAAAxB,EAAAmB,KAAA8B,cAAAjD,EAAAM,GAAA,KAAAH,EAAA,UAAgEM,OAAO4C,KAAA,MAAWrD,EAAAuD,GAAA,wBAEhYd,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpJ,EACA4J,GATF,EAVA,SAAAP,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,EAAAJ,EAAiB","file":"static/js/19.2561d9f8fa86de6cd7c9.js","sourcesContent":["<template>\r\n    <div class=\"clue-detail-page m-20\">\r\n        <bread-crumb></bread-crumb>\r\n\r\n        <div class=\"common-box detail-wrap m-t-20\">\r\n            <div class=\"text-right m-b-20\">\r\n                <!--  1：跟进中  2：无效  3: 已建档  4: 无效审核中 -->\r\n                <el-button type=\"primary\" class=\"w-60\" round size=\"small\"  @click=\"distributeFn()\" v-if=\"info && [1,2,3].indexOf(info.status)>-1\" :disabled=\"['dcc_supervisor','dcc_group_leader','administrator'].indexOf(roleKey)==-1\">分配</el-button>\r\n                <!-- <el-button type=\"primary\" class=\"w-60\" round size=\"small\"  @click=\"handleActive()\" v-if=\"info && info.status == 2\" :disabled=\"['dcc_supervisor','dcc_group_leader','dcc_inviter','administrator'].indexOf(roleKey)==-1\">激活</el-button> -->\r\n                <el-button type=\"primary\" class=\"w-60\" round size=\"small\"  @click=\"handleClue\" v-if=\"info && info.status == 1\" :disabled=\"roleKey!='dcc_inviter'\">处理</el-button>\r\n                <el-button class=\"blue_font_white_bg\" plain round size=\"small\" v-if=\"info && info.intentionId\"  @click=\"seeArchive\">查看档案</el-button>\r\n            </div>\r\n            <div class=\"flex\">\r\n                <div class=\"flex-1 detail-left\">\r\n                <step-title :step=\"{'title': '线索信息'}\"></step-title>\r\n\r\n                <el-form ref=\"form\" label-position=\"right\" label-width=\"150px\" class=\"m-t-20\">\r\n                    <el-form-item label=\"线索状态\"> {{ info.statusName | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"线索类型\"> {{ info.clueTypeName | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"处理坐席组\"> {{ info.dccGroupName | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"处理DCC\"> {{ info.dccName | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"客户姓名\"> {{ info.nickname | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"手机号码\"> {{ info.tel | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"线索评分\"> {{ info.grade!=11?info.grade:'--' | filterBlank}} <span v-if=\"info.grade!=11\">分</span></el-form-item>\r\n                    <el-form-item label=\"归属门店\"> {{ info.areaName | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"意向车型\"> {{ info.model | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"客户来源\"> {{ customeFrom | filterBlank}}</el-form-item>\r\n                    <el-form-item label=\"购车区域\"> {{ buyPlace | filterBlank }}</el-form-item>\r\n                    <el-form-item label=\"购车指标\"> {{ buyQuotaText | filterBlank}} </el-form-item>\r\n                    <!-- 后端说没有购车类型和贷款，跟产品说去掉 -->\r\n                    <!-- <el-form-item label=\"购车类型\"> {{ info.areaName | filterBlank}} </el-form-item>\r\n                    <el-form-item label=\"是否贷款\"> {{ info.areaName | filterBlank}} </el-form-item> -->\r\n                </el-form>\r\n                </div>\r\n                <div class=\"w-100\"></div>\r\n                <div class=\"flex-1 detail-right\">\r\n                    <step-title :step=\"{'title': '跟进记录'}\"></step-title>\r\n\r\n                    <follow-record \r\n                        class=\"m-t-20 p-20 clue-follow-record reset-scrollbar\" \r\n                        :record-list=\"recordList\" \r\n                        :scrollEvent=\"true\" \r\n                        @event-scroll=\"handleFollowScroll\"\r\n                    ></follow-record>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n         <!-- 分配 -->\r\n        <distribute v-if=\"showDistribute\" :config=\"disConfig\" @close=\"closeDistribute\" :loading=\"dialogLoading\"></distribute>\r\n\r\n        <!-- 激活 -->\r\n        <actived v-if=\"showActived\" :config=\"actConfig\" @close=\"closeActived\" :loading=\"dialogLoading\"></actived>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 此组件为业务管理中查看客户档案的公共页面，包括线索管理，潜客管理，邀约管理，订单管理，战败管理等客户档案\r\nimport { mapGetters } from 'vuex'; \r\nimport BreadCrumb from '@/components/bread/BreadCrumb';\r\nimport StepTitle from '@/components/step/StepTitle';\r\nimport FollowRecord from '@/components/follow-record/FollowRecord'\r\nimport Distribute from '@/pages/business/components/Distribute'\r\nimport Actived from '@/pages/business/components/Actived'\r\nexport default {\r\n    components: {\r\n        BreadCrumb,\r\n        StepTitle,\r\n        FollowRecord,\r\n        Distribute,\r\n        Distribute,\r\n        Actived\r\n    },\r\n    data(){\r\n        return {\r\n            info:{},\r\n            showDistribute: false, // 分配弹窗\r\n            showActived: false, // 激活弹窗\r\n            recordList: [], // 跟进列表\r\n            followPage: {\r\n                totalCount: 0,\r\n                page: 1,\r\n                pageSize: 10,\r\n                totalPage: 1\r\n            },\r\n            dialogLoading: false, // 分配，激活弹窗点击保存的时候\r\n        }\r\n    },\r\n    created(){\r\n        this.editId = this.$route.query.id;\r\n        this.getDetail();\r\n        this.getFollowList('init');\r\n    },\r\n    computed:{\r\n        ...mapGetters(['roleKey']),\r\n        customeFrom(){\r\n            let arr=[];\r\n            if(this.info && this.info.fromTopName){\r\n                arr.push(this.info.fromTopName)\r\n            }\r\n            if(this.info && this.info.fromSecondName){\r\n                arr.push(this.info.fromSecondName)\r\n            }\r\n            return arr.join('--')\r\n        },\r\n        buyPlace(){\r\n            let arr=[];\r\n            if(this.info && this.info.provinceName){\r\n                arr.push(this.info.provinceName)\r\n            }\r\n            if(this.info && this.info.cityName){\r\n                arr.push(this.info.cityName)\r\n            }\r\n            if(this.info && this.info.regionName){\r\n                arr.push(this.info.regionName)\r\n            }\r\n            return arr.join('--')\r\n        },\r\n        buyQuotaText(){\r\n            let text = '';\r\n            if(this.info){\r\n                switch(this.info.buyQuota){\r\n                    case 0: text=\"未知\";break;\r\n                    case 1: text=\"有\"; break;\r\n                    case 2: text=\"无\"; break;\r\n                }\r\n            }\r\n            return text;\r\n        }\r\n    },\r\n    methods: {\r\n        getDetail(){\r\n            this.$fetch.business.clueDetail({'id': this.editId}).then((res)=>{\r\n                this.$handleResponse(res, res=>{\r\n                    this.info = res;\r\n                },true);\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        getFollowList(reset){\r\n            if(reset == 'init') {\r\n                this.recordList = [];\r\n                this.followPage.page = 1;\r\n            }\r\n            const { page, pageSize } = this.followPage;\r\n            let params = {\r\n                typeId: 2, // 类型：1潜客，2线索\r\n                id: this.editId,\r\n                page,\r\n                pageSize\r\n            }\r\n            this.$fetch.common.followListByType(params).then((res)=>{\r\n                this.$handleResponse(res, data=>{\r\n                    const { list, page } = data;\r\n                    if (list && list.length > 0) {\r\n                        this.recordList = [...this.recordList, ...list];\r\n                    }\r\n                    this.followPage.totalCount = page.totalCount;\r\n                    this.followPage.totalPage = page.totalPage;\r\n                },true);\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        handleFollowScroll() {\r\n            // 请求加载更多\r\n            if (this.followPage.page >= this.followPage.totalPage) {\r\n                return;\r\n            }\r\n            this.followPage.page++;\r\n            this.getFollowList();\r\n        },\r\n        handleClue(){ // 处理\r\n            this.$router.push({'path': '/work/cluesDeal', query:{'id': this.info.id, 'userId': this.info.userId}})\r\n        },\r\n        seeArchive(){\r\n            this.$router.push({'path':'/business/potential/detail', query: {'id': this.info.intentionId}});\r\n        },\r\n        distributeFn(){ // 分配弹窗\r\n            this.disConfig = {\r\n                title: '分配',\r\n                groupLabel: '处理坐席组',\r\n                groupOptions: [],  // 坐席组下拉列表\r\n                groupObj: {}, // 坐席组对象\r\n                dccLabel: '处理DCC',\r\n                selectId: [this.editId], // 选择的列表id\r\n                tip: '',\r\n            }\r\n            this.$fetch.business.assignDCCList({'ids':this.disConfig.selectId,'operate': 'assign'}).then((res)=>{ //'operate':  assign分配，invalidActive 无效激活\r\n                this.$handleResponse(res, res=>{\r\n                    this.disConfig.listTotal = res.listTotal;\r\n                    if(res.listTotal ==1){\r\n                        this.disConfig.groupOptions = this.$hasArrContent(res.list)?res.list:[];\r\n                        this.showDistribute = true;\r\n                        this.dialogLoading=false;\r\n                    }else if(res.listTotal > 1){\r\n                        this.$message.error(\"所选线索分别归属多个组，不能被分配\")\r\n                    }else {\r\n                        this.$notify.error({\r\n                            title: '错误提示',\r\n                            message: '当前线索不符合要求'\r\n                        })\r\n                    }\r\n                },true);\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        closeDistribute(type, val){ // 分配弹窗关闭\r\n            if(type == 'cancel'){\r\n                this.showDistribute = false;\r\n                this.dialogLoading=false;\r\n                return\r\n            }\r\n            let params = Object.assign({'ids':this.disConfig.selectId},val);\r\n            this.dialogLoading=true;\r\n            this.$fetch.business.clueAssign(params).then((res)=>{\r\n                this.$handleResponse(res, res=>{\r\n                    this.$message.success('分配成功');\r\n                    this.showDistribute = false;\r\n                    this.getDetail();\r\n                    this.getFollowList('init');\r\n                },true)\r\n                this.dialogLoading=false;\r\n            }).catch(()=>{\r\n                this.dialogLoading=false;\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        handleActive(){ // 激活弹窗\r\n            this.actConfig = {\r\n                title: '激活',\r\n                groupLabel: '处理坐席组',\r\n                groupOptions: [],  // 坐席组下拉列表\r\n                groupObj: {}, // 坐席组对象\r\n                dccLabel: '处理DCC',\r\n                selectId: [this.editId], // 选择的列表id\r\n                tip: '线索激活状态变为“待处理”由所选坐席组及对应人员进行跟进处理',\r\n            }\r\n\r\n            this.$fetch.business.assignDCCList({'ids':this.actConfig.selectId,'operate': 'invalidActive'}).then((res)=>{ //'operate':  assign分配，invalidActive 无效激活\r\n                this.$handleResponse(res, res=>{\r\n                    this.actConfig.listTotal = res.listTotal; // listTotal 取值大于等于1，如果没有组，报非200，单条的激活有且只有一个组\r\n                    if(res.listTotal ==1){\r\n                        this.actConfig.groupOptions = this.$hasArrContent(res.list)?res.list:[];\r\n                        this.showActived = true;\r\n                        this.dialogLoading=false;\r\n                    }else if(res.listTotal > 1){\r\n                        this.showActived = true;\r\n                        this.dialogLoading=false;\r\n                        this.actConfig.groupOptions = [];\r\n                        this.actConfig.tip = '您所选中的线索分别归属多个组，批量激活后由原处理的DCC继续处理';\r\n                    }else {\r\n                        this.$notify.error({\r\n                            title: '错误提示',\r\n                            message: '当前线索不符合要求'\r\n                        })\r\n                    }\r\n                },true);\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        closeActived(type, val){ // 激活弹窗关闭\r\n            if(type == 'cancel'){\r\n                this.showActived = false;\r\n                this.dialogLoading=false;\r\n                return\r\n            }\r\n            let params = Object.assign({'ids':this.actConfig.selectId},val);\r\n            this.dialogLoading=true;\r\n            this.$fetch.business.InvalidActive(params).then((res)=>{\r\n                this.$handleResponse(res, res=>{\r\n                    this.$message.success('激活成功');\r\n                    this.showActived = false;\r\n                    this.getDetail();\r\n                    this.getFollowList('init');\r\n                },true)\r\n                this.dialogLoading=false;\r\n            }).catch(()=>{\r\n                this.dialogLoading=false;\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.detail-wrap {\r\n    padding: 30px 20px;\r\n}\r\n.el-form-item {\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.clue-follow-record {\r\n    max-height: 780px;\r\n    overflow-y: auto;\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/business/clue/ClueDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"clue-detail-page m-20\"},[_c('bread-crumb'),_vm._v(\" \"),_c('div',{staticClass:\"common-box detail-wrap m-t-20\"},[_c('div',{staticClass:\"text-right m-b-20\"},[(_vm.info && [1,2,3].indexOf(_vm.info.status)>-1)?_c('el-button',{staticClass:\"w-60\",attrs:{\"type\":\"primary\",\"round\":\"\",\"size\":\"small\",\"disabled\":['dcc_supervisor','dcc_group_leader','administrator'].indexOf(_vm.roleKey)==-1},on:{\"click\":function($event){return _vm.distributeFn()}}},[_vm._v(\"分配\")]):_vm._e(),_vm._v(\" \"),(_vm.info && _vm.info.status == 1)?_c('el-button',{staticClass:\"w-60\",attrs:{\"type\":\"primary\",\"round\":\"\",\"size\":\"small\",\"disabled\":_vm.roleKey!='dcc_inviter'},on:{\"click\":_vm.handleClue}},[_vm._v(\"处理\")]):_vm._e(),_vm._v(\" \"),(_vm.info && _vm.info.intentionId)?_c('el-button',{staticClass:\"blue_font_white_bg\",attrs:{\"plain\":\"\",\"round\":\"\",\"size\":\"small\"},on:{\"click\":_vm.seeArchive}},[_vm._v(\"查看档案\")]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1 detail-left\"},[_c('step-title',{attrs:{\"step\":{'title': '线索信息'}}}),_vm._v(\" \"),_c('el-form',{ref:\"form\",staticClass:\"m-t-20\",attrs:{\"label-position\":\"right\",\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"线索状态\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.statusName))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"线索类型\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.clueTypeName))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"处理坐席组\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.dccGroupName))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"处理DCC\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.dccName))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"客户姓名\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.nickname))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"手机号码\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.tel))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"线索评分\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.grade!=11?_vm.info.grade:'--'))+\" \"),(_vm.info.grade!=11)?_c('span',[_vm._v(\"分\")]):_vm._e()]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"归属门店\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.areaName))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"意向车型\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.info.model))+\" \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"客户来源\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.customeFrom)))]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"购车区域\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.buyPlace)))]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"购车指标\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"filterBlank\")(_vm.buyQuotaText))+\" \")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"w-100\"}),_vm._v(\" \"),_c('div',{staticClass:\"flex-1 detail-right\"},[_c('step-title',{attrs:{\"step\":{'title': '跟进记录'}}}),_vm._v(\" \"),_c('follow-record',{staticClass:\"m-t-20 p-20 clue-follow-record reset-scrollbar\",attrs:{\"record-list\":_vm.recordList,\"scrollEvent\":true},on:{\"event-scroll\":_vm.handleFollowScroll}})],1)])]),_vm._v(\" \"),(_vm.showDistribute)?_c('distribute',{attrs:{\"config\":_vm.disConfig,\"loading\":_vm.dialogLoading},on:{\"close\":_vm.closeDistribute}}):_vm._e(),_vm._v(\" \"),(_vm.showActived)?_c('actived',{attrs:{\"config\":_vm.actConfig,\"loading\":_vm.dialogLoading},on:{\"close\":_vm.closeActived}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8c76416e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/business/clue/ClueDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8c76416e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ClueDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ClueDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ClueDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8c76416e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ClueDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8c76416e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/business/clue/ClueDetail.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"step-title-component step__order por\">\r\n    <el-row>\r\n      <el-col :span=\"12\">\r\n        <span class=\"step_left\">{{step.title}}</span>\r\n        <span :class=\"colorStyle\">{{step.content}}</span>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <slot></slot>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    step: {\r\n      type: Object,\r\n      default(){\r\n        return {\r\n          title: '第一步',\r\n          content: '海报内容'\r\n        }\r\n      }\r\n    },\r\n    colorStyle: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data(){\r\n    return{}\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.step__order{\r\n  height: 36px;\r\n  line-height: 36px;\r\n  background: #edf3f9;\r\n  font-size: 15px;\r\n  color: #3d7eff;\r\n  padding-left: 17px;\r\n  font-weight: 700;\r\n  &:before {\r\n    content: '';\r\n    width: 4px;\r\n    height: 36px;\r\n    border-left: 4px solid #3d7eff;\r\n    position: absolute;\r\n    left: 0;\r\n  }\r\n  .step_left{\r\n    margin-right: 22px;\r\n  }\r\n  .red_style {\r\n    color: #ea5a54;\r\n    font-weight: 100;\r\n  }\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/step/StepTitle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-title-component step__order por\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"step_left\"},[_vm._v(_vm._s(_vm.step.title))]),_vm._v(\" \"),_c('span',{class:_vm.colorStyle},[_vm._v(_vm._s(_vm.step.content))])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_vm._t(\"default\")],2)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-27537562\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/step/StepTitle.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27537562\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StepTitle.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StepTitle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StepTitle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27537562\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./StepTitle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-27537562\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/step/StepTitle.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}