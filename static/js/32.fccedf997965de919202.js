webpackJsonp([32],{OHnZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("kZ4T"),n=a("kfhN"),i={components:{TabsScrm:s.a,ScrmFormItem:n.a},data:function(){return{tabs:[{title:"同品牌战败设置",name:"1"},{title:"他品牌战败设置",name:"2"},{title:"取消计划原因设置",name:"3"}],activedTab:1,defeatList:[],dialog:{show:!1,label:"同品牌战败原因",value:""}}},created:function(){this.queryData()},methods:{queryData:function(){var t=this;this.$fetch.callCenter.defeatReason({type:this.activedTab}).then(function(e){t.$handleResponse(e,function(e){t.defeatList=t.$hasArrContent(e)?e:[],t.defeatList.forEach(function(t){t.status=1==t.status})},!0)}).catch(function(){t.$store.commit("closeLoading")})},changeTab:function(t){this.activedTab=t,this.queryData()},addReason:function(){1==this.activedTab?this.dialog.label="同品牌战败原因":2==this.activedTab?this.dialog.label="他品牌战败原因":3==this.activedTab&&(this.dialog.label="取消计划原因"),this.dialog.value="",this.dialog.show=!0},cancel:function(){this.dialog.show=!1},createdFn:function(){var t=this;this.dialog.value?this.$fetch.callCenter.createDefeatReason({title:this.dialog.value,type:this.activedTab}).then(function(e){t.$handleResponse(e,function(e){t.dialog.show=!1,t.$message.success("新增成功"),t.queryData()},!0)}).catch(function(){t.$store.commit("closeLoading")}):this.$message.error("请输入内容")},deleteFn:function(t){var e=this;this.$confirm("您确定要删除该战败原因吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.$fetch.callCenter.deleteDefeatReason({id:t.id}).then(function(t){e.$handleResponse(t,function(t){e.$message.success("删除成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})})},changeStatue:function(t){var e=this;this.$fetch.callCenter.updateDefeatReason({status:t.status?1:0,id:t.id}).then(function(t){e.$handleResponse(t,function(t){e.$message.success("更新成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"param-defeat-setting m-20 common-box min-h-750"},[a("div",{staticClass:"title line"},[t._v("战败原因设置")]),t._v(" "),a("div",{staticClass:"defeat-content"},[a("tabs-scrm",{attrs:{tabs:t.tabs,tabStyle:{height:"4px",line:"bottom"}},on:{change:t.changeTab}}),t._v(" "),a("el-button",{staticClass:"m-b-20 w-100",attrs:{round:"",icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.addReason}},[t._v("新增")]),t._v(" "),a("div",{staticClass:"box-wrap"},t._l(t.defeatList,function(e,s){return a("div",{key:s,staticClass:"flex box-item"},[a("div",{staticClass:"flex-1 p-r-20"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"flex-1"},[a("el-switch",{staticClass:"switch-scrm",attrs:{"active-text":"ON","inactive-text":"OFF"},on:{change:function(a){return t.changeStatue(e)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"item.status"}})],1),t._v(" "),a("div",{staticClass:"w-100"},[a("el-button",{staticClass:"red_font",attrs:{type:"text"},on:{click:function(a){return t.deleteFn(e)}}},[t._v("删除")])],1)])}),0)],1),t._v(" "),a("el-dialog",{staticClass:"add-defeat-dialog",attrs:{title:"新增",visible:t.dialog.show,width:"540px","append-to-body":"","close-on-click-modal":!1,"before-close":t.cancel},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}},[a("el-form",{ref:"form",attrs:{"label-width":"130px"}},[a("scrm-form-item",{attrs:{itemLabel:t.dialog.label,itemType:"input",subClass:"w-100-percent",maxlength:"20",placeholder:"请输入内容，20个字符以内",itemInfo:t.dialog,itemKey:"value"}})],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:t.createdFn}},[t._v(" 确定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,c,!1,function(t){a("aK3Y")},"data-v-72b4c10c",null);e.default=o.exports},aK3Y:function(t,e){}});
//# sourceMappingURL=32.fccedf997965de919202.js.map