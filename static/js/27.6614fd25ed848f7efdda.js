webpackJsonp([27],{dCbR:function(e,t){},eq0J:function(e,t){},"w/5A":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("IaGi"),o=a("ufHF"),r=a("kfhN"),s={props:{info:{type:Object,default:function(){return{}}}},components:{ScrmFormItem:r.a},data:function(){return{dialogVisible:!0}},methods:{cancel:function(){this.$emit("cancel")}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"shop-detail-dialog",attrs:{title:"门店详情",visible:e.dialogVisible,width:"650px",appentToBody:"","close-on-click-modal":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-width":"155px"}},[a("el-form-item",{attrs:{label:"增入时间:"}},[e._v("\n            "+e._s(e._f("filterBlank")(e.info.created_date))+"\n        ")]),e._v(" "),a("el-form-item",{attrs:{label:"门店名称:"}},[e._v("\n            "+e._s(e._f("filterBlank")(e.info.full_name))+"\n        ")]),e._v(" "),a("el-form-item",{attrs:{label:"品牌:"}},[e._v("\n            "+e._s(e._f("filterBlank")(e.info.brandsName))+"\n        ")]),e._v(" "),a("el-form-item",{attrs:{label:"门店地址:"}},[e._v("\n            "+e._s(e._f("filterBlank")(e.info.address))+"\n        ")]),e._v(" "),a("el-form-item",{attrs:{label:"所属组织("+e.info.orgs.length+"):"}},e._l(e.info.orgs,function(t,n){return a("p",{key:n},[e._v(" "+e._s(e._f("filterBlank")(t.name)))])}),0),e._v(" "),a("el-form-item",{attrs:{label:"门店系统管理员:"}},[e._v("\n            "+e._s(e._f("filterBlank")(e.info.admin_name))+"\n        ")])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(e){a("eq0J")},"data-v-fe999e84",null).exports,c=a("PdD4"),d={components:{SearchCol:n.a,DataTable:o.a,ShopDetail:l},mixins:[c.a],data:function(){return{showDialog:!1}},created:function(){this.initData(),this.queryData()},methods:{initData:function(){this.initSearch(),this.initTable()},initSearch:function(){this.search={list:[{prop:"keyword",type:"input",label:"门店名称",currentVal:""}],keyword:0}},initTable:function(){this.dataTable={tr:[{id:"2",label:"门店名称",prop:"short_name",tooltip:!0,show:"template",align:"center"},{id:"3",label:"品牌",prop:"brands",tooltip:!0,show:"template",align:"center"},{id:"4",label:"所属组织",prop:"orgs",tooltip:!0,show:"template",align:"center"},{id:"5",label:"门店地址",prop:"address",align:"center"},{id:"6",label:"系统管理员",prop:"admin_name",align:"center"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},border:!0,hasSelect:!1,hasExpand:!1,hasFirstPagination:!1,showScrollBar:!0,search:{value:"",show:!1,url:"setting.queryAreasList",width:"300",placeholder:"线索号码、微信号",displayCol:["nickname","tel"],params:{id:""}}}},getParams:function(){var e=this.dataTable.page,t=e.currentPage,a=e.pageSize,n=this.search,o=n.keyword;return{expand:"brands,orgs",name:n.list[o].currentVal,pageSize:a,page:t}},queryData:function(){var e=this,t=this,a=this.getParams();this.$fetch.setting.queryAreasList(a).then(function(a){e.$handleResponse(a,function(e){t.dataTable.data=e.list?e.list:[],t.dataTable.page=e.page?e.page:t.dataTable.page},!0)}).catch(function(){e.$store.commit("closeLoading")})},viewDetail:function(e){if(!e.hasOwnProperty("brandsName")){var t=[];this.$hasArrContent(e.brands)&&(e.brands.forEach(function(e){t.push(e.name)}),e.brandsName=t.join("、"))}this.shopInfo=e,this.showDialog=!0}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting-shop-page m-20 common-box"},[a("div",{staticClass:"top-title"},[e._v("集团门店列表")]),e._v(" "),a("div",{staticClass:"search-flex p-l-r-20 m-t-30 m-b-10"},[a("search-col",{attrs:{info:e.search.list[e.search.keyword],placeholder:"请输入"}}),e._v(" "),a("search-col",{staticClass:"export-log-btn",attrs:{leftCol:0,rightCol:24}},[a("div",{attrs:{slot:"custom"},slot:"custom"},[a("el-button",{staticClass:"m-l-20 w-110",attrs:{round:"",icon:"el-icon-search",size:"small",type:"primary"},on:{click:e.find}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{round:"",icon:"el-icon-delete",size:"small",plain:""},on:{click:e.clear}},[e._v("清空查询条件")])],1)])],1),e._v(" "),a("div",{staticClass:"p-l-r-20 p-b-20"},[a("data-table",{ref:"DataTableRef",attrs:{table:e.dataTable},on:{searchTable:e.searchTable,onHandleSelectionChange:e.handleSelectionChange},scopedSlots:e._u([{key:"short_name",fn:function(t){return[a("el-button",{staticClass:"pointer",attrs:{type:"text"},on:{click:function(a){return e.viewDetail(t.obj.row)}}},[e._v(" "+e._s(e._f("filterBlank")(t.obj.row.short_name)))])]}},{key:"brands",fn:function(t){return[t.obj.row.brands&&t.obj.row.brands.length?a("span",[e._v("\n                    "+e._s(t.obj.row.brands[0].name)+"\n                    "),t.obj.row.brands.length>1?a("span",[e._v("等"+e._s(t.obj.row.brands.length)+"个品牌")]):e._e()]):a("span",[e._v(" --")])]}},{key:"orgs",fn:function(t){return[t.obj.row.orgs&&t.obj.row.orgs.length?a("span",[e._v("\n                    "+e._s(t.obj.row.orgs[0].name)+"\n                    "),t.obj.row.orgs.length>1?a("span",[e._v("等"+e._s(t.obj.row.orgs.length)+"个组织")]):e._e()]):a("span",[e._v(" --")])]}}])})],1),e._v(" "),e.showDialog?a("shop-detail",{attrs:{info:e.shopInfo},on:{cancel:function(t){e.showDialog=!1}}}):e._e()],1)},staticRenderFns:[]};var h=a("VU/8")(d,f,!1,function(e){a("dCbR")},"data-v-23000cfb",null);t.default=h.exports}});
//# sourceMappingURL=27.6614fd25ed848f7efdda.js.map