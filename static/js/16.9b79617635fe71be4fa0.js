webpackJsonp([16],{FUmt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("/Uby"),l=a("IaGi"),n=a("ufHF"),i=a("PdD4"),o=a("Dd8w"),r=a.n(o),c=a("woOf"),u=a.n(c),d=a("NYxO"),p={props:{dialogType:{type:Number,default:1},content:{type:Object,default:{}},options:{type:Array,default:[]}},watch:{dialogType:function(t,e){1==t?this.title="新增常用话术":2==t?this.title="编辑常用话术":3==t&&(this.title="常用话术详情")}},data:function(){return{formDefault:{title:"",content:"",displayStatus:""},dialogVisible:!0,title:""}},mounted:function(){console.log("传入的数据",this.content),1==this.dialogType?(this.formDefault={title:"",content:"",displayStatus:""},this.title="新增常用话术"):2==this.dialogType?(this.title="编辑常用话术",u()(this.formDefault,this.content)):3==this.dialogType&&(this.title="常用话术详情",u()(this.formDefault,this.content))},methods:r()({},Object(d.c)(["closeLoading"]),{handleClose:function(){this.$emit("closeDiolag")},confirm:function(){var t=this;if(1==t.dialogType){if(""===t.formDefault.displayStatus)return void this.$message.warning("状态必填");if(!t.formDefault.title)return void this.$message.warning("常用话术标题必填");if(!t.formDefault.content)return void this.$message.warning("内容必填");this.$fetch.callCenter.normalCreate(t.formDefault).then(function(e){t.closeLoading(),t.$message.success("新增成功"),t.handleClose()}).catch(function(e){t.closeLoading()})}else 2==t.dialogType?this.$fetch.callCenter.normalUpdate(t.formDefault).then(function(e){t.closeLoading(),t.$message.success("编辑成功"),t.handleClose()}).catch(function(e){t.closeLoading()}):3==t.dialogType&&(t.dialogType=2)}})},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"add-mormal-dialog-self",attrs:{title:t.title,visible:t.dialogVisible,width:"550px","before-close":t.handleClose,appentToBody:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[1==t.dialogType||2==t.dialogType?a("el-row",{staticClass:"marTop15"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content godian"},[t._v(" 状态"),a("span",{staticClass:"reddot"},[t._v("*")])])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.formDefault.displayStatus,callback:function(e){t.$set(t.formDefault,"displayStatus",e)},expression:"formDefault.displayStatus"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)],1):t._e(),t._v(" "),3==t.dialogType?a("el-row",{staticClass:"marTop15"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content godian"},[t._v(" 状态")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"godian"},[t._v(" "+t._s(t.formDefault.displayStatusTitle)+"  ")])])],1):t._e(),t._v(" "),1==t.dialogType||2==t.dialogType?a("el-row",{staticClass:"marTop15"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content godian"},[t._v(" 常用话术标题"),a("span",{staticClass:"reddot"},[t._v("*")])])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{maxlength:"20",placeholder:"20个字符以内",size:"small"},model:{value:t.formDefault.title,callback:function(e){t.$set(t.formDefault,"title",e)},expression:"formDefault.title"}})],1)],1):t._e(),t._v(" "),3==t.dialogType?a("el-row",{staticClass:"marTop15"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content godian"},[t._v(" 常用话术标题")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"godian"},[t._v(" "+t._s(t.formDefault.title))])])],1):t._e(),t._v(" "),1==t.dialogType||2==t.dialogType?a("el-row",{staticClass:"marTop15"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content godian"},[t._v(" 内容"),a("span",{staticClass:"reddot"},[t._v("*")])])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{type:"textarea",maxlength:"300",rows:"5",placeholder:"300个字符以内"},model:{value:t.formDefault.content,callback:function(e){t.$set(t.formDefault,"content",e)},expression:"formDefault.content"}})],1)],1):t._e(),t._v(" "),3==t.dialogType?a("el-row",{staticClass:"marTop15"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content godian"},[t._v(" 内容")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"godian"},[t._v(" "+t._s(t.formDefault.content))])])],1):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),3==t.dialogType?a("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:t.confirm}},[t._v("编辑")]):t._e(),t._v(" "),1==t.dialogType||2==t.dialogType?a("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:t.confirm}},[t._v("保存")]):t._e()],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,f,!1,function(t){a("dLUx"),a("Y3EW")},"data-v-eed7931c",null).exports,g={components:{SearchBar:s.a,SearchCol:l.a,DataTable:n.a,NormalDialog:h},mixins:[i.a],data:function(){return{showView:!1,currentRow:{},dialogType:""}},created:function(){this.initData(),this.queryData()},methods:{closeDiolag:function(){this.showView=!1,this.queryData()},initData:function(){this.initSearch(),this.initTable()},initSearch:function(){this.search={list:[{type:"select",label:"状态",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"datePicker",label:"创建时间",currentVal:""},{type:"datePicker",label:"更新时间",currentVal:""}],status:0,create_time:1,update_time:2}},initTable:function(){this.dataTable={tr:[{id:"2",label:"话术ID",prop:"longId",tooltip:!0,align:"center"},{id:"3",label:"常用话术标题",prop:"title",tooltip:!0,align:"center"},{id:"4",label:"状态",prop:"displayStatusTitle",tooltip:!0,align:"center"},{id:"5",label:"创建时间",prop:"createDate",tooltip:!0,align:"center"},{id:"6",label:"更新时间",prop:"updateDate",tooltip:!0,align:"center"},{id:"11",label:"操作",prop:"caozuo",show:"template",width:"300",align:"center"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},border:!0,hasSelect:!0,hasExpand:!1,hasFirstPagination:!0,showScrollBar:!0,search:{value:"",show:!0,width:"300",keyword:"kwd",url:"callCenter.normalList",placeholder:"请输入话术ID/常用话术标题",displayCol:["longId","title"],parma:{id:""}}}},getParams:function(){var t=this.dataTable.page,e=t.currentPage,a=t.pageSize,s=this.search,l=s.status,n=s.create_time,i=s.update_time,o=s.list;return{displayStatus:o[l].currentVal,createDateStart:o[n].currentVal&&o[n].currentVal[0],createDateEnd:o[n].currentVal&&o[n].currentVal[1],updateDateStart:o[i].currentVal&&o[i].currentVal[0],updateDateEnd:o[i].currentVal&&o[i].currentVal[1],pageSize:a,page:e}},queryData:function(){var t=this,e=this,a=this.getParams();this.$fetch.callCenter.normalList(a,!0).then(function(a){t.$handleResponse(a,function(a){e.dataTable.data=a.list?a.list:[],e.dataTable.page=a.page?a.page:e.dataTable.page;var s=a.options.displayStatus;t.search.list[t.search.status].selectOptions=t.$hasArrContent(s)?s:[]},!0)}).catch(function(){t.$store.commit("closeLoading")})},taskToggle:function(t){var e=this;this.$confirm("您确定要"+(1==t.displayStatus?"隐藏":"显示")+"该常用话术吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.$fetch.callCenter.normalToggle({id:t.id}).then(function(a){e.$handleResponse(a,function(a){e.$message.success((1==t.displayStatus?"隐藏":"显示")+"成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})})},deleteTask:function(t){var e=this;this.$confirm("您确定要删除此常用话术吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.$fetch.callCenter.normalDelete({id:[t.id]}).then(function(t){e.$handleResponse(t,function(t){e.$message.success("删除成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})})},viewFn:function(t,e){this.currentRow=t,this.dialogType=e,this.showView=!0},batchDelete:function(){var t=this;console.log(this.selectData),this.$hasArrContent(this.selectData)?this.$confirm("您确定要删除选中的常用话术吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){var e=[];t.selectData.forEach(function(t){e.push(t.id)}),t.$fetch.callCenter.normalDelete({id:e}).then(function(e){t.$handleResponse(e,function(e){t.$message.success("删除成功"),t.queryData()},!0)}).catch(function(){t.$store.commit("closeLoading")})}):this.$message.warning("您还没选择常用话术")}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"normal-page m-20 common-box"},[a("search-bar",{staticClass:"m-t-10 p-20",attrs:{size:"medium"},on:{clear:t.clear,find:t.find}},[a("div",{staticClass:"search-flex"},[a("search-col",{attrs:{info:t.search.list[t.search.status],placeholder:"请输入"}}),t._v(" "),a("search-col",{attrs:{info:t.search.list[t.search.create_time],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}}),t._v(" "),a("search-col",{attrs:{info:t.search.list[t.search.update_time],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}})],1)]),t._v(" "),a("div",{staticClass:"p-l-r-20 p-b-20"},[a("data-table",{ref:"DataTableRef",staticClass:"table-cyan",attrs:{table:t.dataTable},on:{searchTable:t.searchTable,onHandleSelectionChange:t.handleSelectionChange},scopedSlots:t._u([{key:"caozuo",fn:function(e){return[a("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(a){return t.viewFn(e.obj.row,3)}}},[t._v("查看")]),t._v(" "),a("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(a){return t.taskToggle(e.obj.row)}}},[t._v(t._s(1==e.obj.row.displayStatus?"隐藏":"显示"))]),t._v(" "),a("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(a){return t.viewFn(e.obj.row,2)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"red_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(a){return t.deleteTask(e.obj.row)}}},[t._v("删除")])]}}])},[a("div",{attrs:{slot:"buttons"},slot:"buttons"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",round:"",size:"small"},on:{click:function(e){return t.viewFn({},1)}}},[t._v("新建话术")]),t._v(" "),a("el-button",{staticClass:"w-90",attrs:{plain:"",size:"small",round:""},on:{click:t.batchDelete}},[t._v("删除")])],1)])],1),t._v(" "),t.showView?a("NormalDialog",{attrs:{dialogType:t.dialogType,content:t.currentRow,options:t.search.list[t.search.status].selectOptions},on:{closeDiolag:t.closeDiolag}}):t._e()],1)},staticRenderFns:[]};var v=a("VU/8")(g,m,!1,function(t){a("tSYh")},"data-v-65bef14e",null);e.default=v.exports},Y3EW:function(t,e){},dLUx:function(t,e){},tSYh:function(t,e){}});
//# sourceMappingURL=16.9b79617635fe71be4fa0.js.map