webpackJsonp([22],{"35Uv":function(n,t,e){(n.exports=e("UTlt")(!0)).push([n.i,"\n.step__order[data-v-05796cd9]{height:36px;line-height:36px;background:#edf3f9;font-size:15px;color:#3d7eff;padding-left:17px;font-weight:700\n}\n.step__order[data-v-05796cd9]:before{content:'';width:4px;height:36px;border-left:4px solid #3d7eff;position:absolute;left:0\n}\n.step__order .step_left[data-v-05796cd9]{margin-right:22px\n}\n.step__order .red_style[data-v-05796cd9]{color:#ea5a54;font-weight:100\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/components/step/D:/liu/vue-project/MyTest/src/components/step/StepTitle.vue"],names:[],mappings:";AAsCA,8BACE,YACA,iBACA,mBACA,eACA,cACA,kBACA,eAAgB;CAPlB;AAAA,qCASI,WACA,UACA,YACA,8BACA,kBACA,MAAO;CAdX;AAAA,yCAiBI,iBAAkB;CAjBtB;AAAA,yCAoBI,cACA,eAAgB;CACjB",file:"StepTitle.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.step__order{\r\n  height: 36px;\r\n  line-height: 36px;\r\n  background: #edf3f9;\r\n  font-size: 15px;\r\n  color: #3d7eff;\r\n  padding-left: 17px;\r\n  font-weight: 700;\r\n  &:before {\r\n    content: '';\r\n    width: 4px;\r\n    height: 36px;\r\n    border-left: 4px solid #3d7eff;\r\n    position: absolute;\r\n    left: 0;\r\n  }\r\n  .step_left{\r\n    margin-right: 22px;\r\n  }\r\n  .red_style {\r\n    color: #ea5a54;\r\n    font-weight: 100;\r\n  }\r\n}\r\n"],sourceRoot:""}])},YPkI:function(n,t,e){(n.exports=e("UTlt")(!0)).push([n.i,"\n.detail-wrap[data-v-6b2d4556]{padding:30px 20px\n}\n.el-form-item[data-v-6b2d4556]{margin-bottom:4px\n}\n.clue-follow-record[data-v-6b2d4556]{max-height:780px;overflow-y:auto\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/business/clue/D:/liu/vue-project/MyTest/src/pages/business/clue/ClueDetail.vue"],names:[],mappings:";AAkSA,8BACI,iBAAkB;CACrB;AAAA,+BAEG,iBAAkB;CACrB;AAAA,qCAGG,iBACA,eAAgB;CACnB",file:"ClueDetail.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.detail-wrap {\r\n    padding: 30px 20px;\r\n}\r\n.el-form-item {\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.clue-follow-record {\r\n    max-height: 780px;\r\n    overflow-y: auto;\r\n}\r\n"],sourceRoot:""}])},a9tQ:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=e("aA9S"),s=e.n(o),a=e("IHPB"),l=e.n(a),r=e("4YfN"),c=e.n(r),f=e("a3Yh"),d=e.n(f),u=e("kciL"),p=e("MvR/"),h=e("zWK9"),g=e("Y1jt"),v=e("MsbF"),m=e("K9jU"),_={components:(i={BreadCrumb:p.a,StepTitle:h.a,FollowRecord:g.a,Distribute:v.a},d()(i,"Distribute",v.a),d()(i,"Actived",m.a),i),data:function(){return{info:{},showDistribute:!1,showActived:!1,recordList:[],followPage:{totalCount:0,page:1,pageSize:10,totalPage:1},dialogLoading:!1}},created:function(){this.editId=this.$route.query.id,this.getDetail(),this.getFollowList("init")},computed:c()({},Object(u.b)(["roleKey"]),{customeFrom:function(){var n=[];return this.info&&this.info.fromTopName&&n.push(this.info.fromTopName),this.info&&this.info.fromSecondName&&n.push(this.info.fromSecondName),n.join("--")},buyPlace:function(){var n=[];return this.info&&this.info.provinceName&&n.push(this.info.provinceName),this.info&&this.info.cityName&&n.push(this.info.cityName),this.info&&this.info.regionName&&n.push(this.info.regionName),n.join("--")},buyQuotaText:function(){var n="";if(this.info)switch(this.info.buyQuota){case 0:n="未知";break;case 1:n="有";break;case 2:n="无"}return n}}),methods:{getDetail:function(){var n=this;this.$fetch.business.clueDetail({id:this.editId}).then(function(t){n.$handleResponse(t,function(t){n.info=t},!0)}).catch(function(){n.$store.commit("closeLoading")})},getFollowList:function(n){var t=this;"init"==n&&(this.recordList=[],this.followPage.page=1);var e=this.followPage,i=e.page,o=e.pageSize,s={typeId:2,id:this.editId,page:i,pageSize:o};this.$fetch.common.followListByType(s).then(function(n){t.$handleResponse(n,function(n){var e=n.list,i=n.page;e&&e.length>0&&(t.recordList=[].concat(l()(t.recordList),l()(e))),t.followPage.totalCount=i.totalCount,t.followPage.totalPage=i.totalPage},!0)}).catch(function(){t.$store.commit("closeLoading")})},handleFollowScroll:function(){this.followPage.page>=this.followPage.totalPage||(this.followPage.page++,this.getFollowList())},handleClue:function(){this.$router.push({path:"/work/cluesDeal",query:{id:this.info.id,userId:this.info.userId}})},seeArchive:function(){this.$router.push({path:"/business/potential/detail",query:{id:this.info.intentionId}})},distributeFn:function(){var n=this;this.disConfig={title:"分配",groupLabel:"处理坐席组",groupOptions:[],groupObj:{},dccLabel:"处理DCC",selectId:[this.editId],tip:""},this.$fetch.business.assignDCCList({ids:this.disConfig.selectId,operate:"assign"}).then(function(t){n.$handleResponse(t,function(t){n.disConfig.listTotal=t.listTotal,1==t.listTotal?(n.disConfig.groupOptions=n.$hasArrContent(t.list)?t.list:[],n.showDistribute=!0,n.dialogLoading=!1):t.listTotal>1?n.$message.error("所选线索分别归属多个组，不能被分配"):n.$notify.error({title:"错误提示",message:"当前线索不符合要求"})},!0)}).catch(function(){n.$store.commit("closeLoading")})},closeDistribute:function(n,t){var e=this;if("cancel"==n)return this.showDistribute=!1,void(this.dialogLoading=!1);var i=s()({ids:this.disConfig.selectId},t);this.dialogLoading=!0,this.$fetch.business.clueAssign(i).then(function(n){e.$handleResponse(n,function(n){e.$message.success("分配成功"),e.showDistribute=!1,e.getDetail(),e.getFollowList("init")},!0),e.dialogLoading=!1}).catch(function(){e.dialogLoading=!1,e.$store.commit("closeLoading")})},handleActive:function(){var n=this;this.actConfig={title:"激活",groupLabel:"处理坐席组",groupOptions:[],groupObj:{},dccLabel:"处理DCC",selectId:[this.editId],tip:"线索激活状态变为“待处理”由所选坐席组及对应人员进行跟进处理"},this.$fetch.business.assignDCCList({ids:this.actConfig.selectId,operate:"invalidActive"}).then(function(t){n.$handleResponse(t,function(t){n.actConfig.listTotal=t.listTotal,1==t.listTotal?(n.actConfig.groupOptions=n.$hasArrContent(t.list)?t.list:[],n.showActived=!0,n.dialogLoading=!1):t.listTotal>1?(n.showActived=!0,n.dialogLoading=!1,n.actConfig.groupOptions=[],n.actConfig.tip="您所选中的线索分别归属多个组，批量激活后由原处理的DCC继续处理"):n.$notify.error({title:"错误提示",message:"当前线索不符合要求"})},!0)}).catch(function(){n.$store.commit("closeLoading")})},closeActived:function(n,t){var e=this;if("cancel"==n)return this.showActived=!1,void(this.dialogLoading=!1);var i=s()({ids:this.actConfig.selectId},t);this.dialogLoading=!0,this.$fetch.business.InvalidActive(i).then(function(n){e.$handleResponse(n,function(n){e.$message.success("激活成功"),e.showActived=!1,e.getDetail(),e.getFollowList("init")},!0),e.dialogLoading=!1}).catch(function(){e.dialogLoading=!1,e.$store.commit("closeLoading")})}}},A=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"clue-detail-page m-20"},[e("bread-crumb"),n._v(" "),e("div",{staticClass:"common-box detail-wrap m-t-20"},[e("div",{staticClass:"text-right m-b-20"},[n.info&&[1,2,3].indexOf(n.info.status)>-1?e("el-button",{staticClass:"w-60",attrs:{type:"primary",round:"",size:"small",disabled:-1==["dcc_supervisor","dcc_group_leader","administrator"].indexOf(n.roleKey)},on:{click:function(t){return n.distributeFn()}}},[n._v("分配")]):n._e(),n._v(" "),n.info&&1==n.info.status?e("el-button",{staticClass:"w-60",attrs:{type:"primary",round:"",size:"small",disabled:"dcc_inviter"!=n.roleKey},on:{click:n.handleClue}},[n._v("处理")]):n._e(),n._v(" "),n.info&&n.info.intentionId?e("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"small"},on:{click:n.seeArchive}},[n._v("查看档案")]):n._e()],1),n._v(" "),e("div",{staticClass:"flex"},[e("div",{staticClass:"flex-1 detail-left"},[e("step-title",{attrs:{step:{title:"线索信息"}}}),n._v(" "),e("el-form",{ref:"form",staticClass:"m-t-20",attrs:{"label-position":"right","label-width":"150px"}},[e("el-form-item",{attrs:{label:"线索状态"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.statusName))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"线索类型"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.clueTypeName))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"处理坐席组"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.dccGroupName))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"处理DCC"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.dccName))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"客户姓名"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.nickname))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"手机号码"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.tel))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"线索评分"}},[n._v(" "+n._s(n._f("filterBlank")(11!=n.info.grade?n.info.grade:"--"))+" "),11!=n.info.grade?e("span",[n._v("分")]):n._e()]),n._v(" "),e("el-form-item",{attrs:{label:"归属门店"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.areaName))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"意向车型"}},[n._v(" "+n._s(n._f("filterBlank")(n.info.model))+" ")]),n._v(" "),e("el-form-item",{attrs:{label:"客户来源"}},[n._v(" "+n._s(n._f("filterBlank")(n.customeFrom)))]),n._v(" "),e("el-form-item",{attrs:{label:"购车区域"}},[n._v(" "+n._s(n._f("filterBlank")(n.buyPlace)))]),n._v(" "),e("el-form-item",{attrs:{label:"购车指标"}},[n._v(" "+n._s(n._f("filterBlank")(n.buyQuotaText))+" ")])],1)],1),n._v(" "),e("div",{staticClass:"w-100"}),n._v(" "),e("div",{staticClass:"flex-1 detail-right"},[e("step-title",{attrs:{step:{title:"跟进记录"}}}),n._v(" "),e("follow-record",{staticClass:"m-t-20 p-20 clue-follow-record reset-scrollbar",attrs:{"record-list":n.recordList,scrollEvent:!0},on:{"event-scroll":n.handleFollowScroll}})],1)])]),n._v(" "),n.showDistribute?e("distribute",{attrs:{config:n.disConfig,loading:n.dialogLoading},on:{close:n.closeDistribute}}):n._e(),n._v(" "),n.showActived?e("actived",{attrs:{config:n.actConfig,loading:n.dialogLoading},on:{close:n.closeActived}}):n._e()],1)};A._withStripped=!0;var C={render:A,staticRenderFns:[]},b=C;var w=!1;var x=e("C7Lr")(_,b,!1,function(n){w||e("nxgf")},"data-v-6b2d4556",null);x.options.__file="src/pages/business/clue/ClueDetail.vue";t.default=x.exports},liph:function(n,t,e){var i=e("35Uv");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("FIqI")("6f9d9844",i,!1,{})},nxgf:function(n,t,e){var i=e("YPkI");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("FIqI")("8eddeb28",i,!1,{})},zWK9:function(n,t,e){"use strict";var i={props:{step:{type:Object,default:function(){return{title:"第一步",content:"海报内容"}}},colorStyle:{type:String,default:""}},data:function(){return{}}},o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"step-title-component step__order por"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"step_left"},[n._v(n._s(n.step.title))]),n._v(" "),e("span",{class:n.colorStyle},[n._v(n._s(n.step.content))])]),n._v(" "),e("el-col",{attrs:{span:12}},[n._t("default")],2)],1)],1)};o._withStripped=!0;var s={render:o,staticRenderFns:[]},a=s;var l=!1;var r=e("C7Lr")(i,a,!1,function(n){l||e("liph")},"data-v-05796cd9",null);r.options.__file="src/components/step/StepTitle.vue";t.a=r.exports}});
//# sourceMappingURL=22.5c2ffb73ea55cbac3457.js.map