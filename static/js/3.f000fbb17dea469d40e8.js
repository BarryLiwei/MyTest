webpackJsonp([3],{"5d1e":function(t,e){},"8Jr1":function(t,e){},Hlkc:function(t,e){},Izm0:function(t,e){},LWUU:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("MvR/"),o=i("kfhN"),s={props:{selectedOptions:Array,unSelectOptions:Array,transProps:{default:function(){return{key:"area_id",label:"name"}}},title:{type:String,default:"选择4s店"}},data:function(){return{dialogShow:!0,pRelationAreas:this.unSelectOptions,relationAreas:this.obj2Array(this.selectedOptions,this.transProps.key)}},methods:{onSubmit:function(t){this.$emit("areas-change",this.handleSelectData(this.relationAreas,this.pRelationAreas)),this.handleClose()},handleClose:function(){this.$emit("cancel")},leftCheckChange:function(){},handleChange:function(t,e,i){},handleSelectData:function(t,e){var i=this.transProps.key,n=[];return t&&t.length&&t.forEach(function(t){e.forEach(function(e){t==e[i]&&n.push(e)})}),n},obj2Array:function(t,e){var i=[];return t&&t.length&&t.forEach(function(t){t[e]&&i.push(t[e])}),i}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"transfer-dialog",attrs:{title:t.title,visible:t.dialogShow,width:"750px","close-on-click-modal":!1,"before-close":t.handleClose,"append-to-body":""},on:{"update:visible":function(e){t.dialogShow=e}}},[i("el-transfer",{staticClass:"transfer-class",attrs:{filterable:"","filter-placeholder":"4S店名称",data:t.pRelationAreas,titles:["选择：","已选："],props:t.transProps},on:{"left-check-change":t.leftCheckChange,change:t.handleChange},model:{value:t.relationAreas,callback:function(e){t.relationAreas=e},expression:"relationAreas"}}),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90",attrs:{type:"primary",size:"small",round:""},on:{click:function(e){return t.onSubmit("menuInfo")}}},[t._v("确 定")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{size:"small",round:""},on:{click:t.handleClose}},[t._v("取 消")])],1)],1)},staticRenderFns:[]};var c={components:{SelectArea:i("VU/8")(s,a,!1,function(t){i("q2nx")},"data-v-564684fd",null).exports},props:{btnName:{type:String,default:"添加"},dialogTitle:{type:String,default:"添加4S店"},transProps:{default:function(){return{key:"area_id",label:"name"}}},optionKey:{type:String,default:"name"},configs:{type:Object,default:function(){return{selectedOptions:[],unSelectOptions:[]}}}},data:function(){return{showDailog:!1}},methods:{listenToAreas:function(t){this.configs.selectedOptions=t}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"transfer-component"},[i("el-button",t._b({attrs:{round:"",type:"primary"},on:{click:function(e){t.showDailog=!0}}},"el-button",t.$attrs,!1),[t._v(t._s(t.btnName))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.configs.selectedOptions&&t.configs.selectedOptions.length,expression:"configs.selectedOptions && configs.selectedOptions.length"}],staticClass:"mt15 sale_box"},[i("div",{staticClass:"sale_style"},t._l(t.configs.selectedOptions,function(e,n){return i("p",{key:n,staticClass:"item"},[t._v(t._s(e[t.optionKey]))])}),0)]),t._v(" "),t.showDailog?i("select-area",{attrs:{title:t.dialogTitle,transProps:t.transProps,selectedOptions:t.configs.selectedOptions,unSelectOptions:t.configs.unSelectOptions},on:{"areas-change":t.listenToAreas,cancel:function(e){t.showDailog=!t.showDailog}}}):t._e()],1)},staticRenderFns:[]};var r=i("VU/8")(c,l,!1,function(t){i("5d1e")},"data-v-4346230e",null).exports,f={components:{AddSeatDailog:i("xlys").a},props:{btnName:{type:String,default:"添加"},isMultiple:{type:Boolean,default:!0},configs:{type:Object,default:function(){return{title:"添加坐席",label:"坐席",selectOptions:[],optionLabel:"",optionValue:"",itemInfo:{},itemKey:"name"}}}},data:function(){return{showDailog:!1}},methods:{}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-seat-component"},[i("el-button",{attrs:{round:"",size:"small",type:"primary"},on:{click:function(e){t.showDailog=!0}}},[t._v(t._s(t.btnName))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.configs.itemInfo[t.configs.itemKey]&&t.configs.itemInfo[t.configs.itemKey].length&&t.isMultiple,expression:"configs.itemInfo[configs.itemKey] && configs.itemInfo[configs.itemKey].length && isMultiple"}],staticClass:"mt15 sale_box"},[i("div",{staticClass:"sale_style"},t._l(t.configs.itemInfo[t.configs.itemKey],function(e,n){return i("p",{key:n,staticClass:"item"},[t._v("\n                "+t._s(t._f("filterBlank")(t._f("getOptionsValue")(t.configs.selectOptions,t.configs.optionValue,t.configs.optionLabel,e)))+"\n            ")])}),0)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.configs.itemInfo[t.configs.itemKey]&&!t.isMultiple,expression:"configs.itemInfo[configs.itemKey] && !isMultiple"}],staticClass:"mt15 sale_box"},[i("div",{staticClass:"sale_style"},[i("p",{staticClass:"item"},[t._v("\n                "+t._s(t._f("filterBlank")(t._f("getOptionsValue")(t.configs.selectOptions,t.configs.optionValue,t.configs.optionLabel,t.configs.itemInfo[t.configs.itemKey])))+"\n            ")])])]),t._v(" "),t.showDailog?i("add-seat-dailog",t._b({attrs:{isDccDialog:t.configs.isDccDialog,title:t.configs.title,config:t.configs},on:{close:function(e){t.showDailog=!1}}},"add-seat-dailog",t.$attrs,!1)):t._e()],1)},staticRenderFns:[]};var u=i("VU/8")(f,d,!1,function(t){i("8Jr1")},"data-v-a7554934",null).exports,p={components:{BreadCrumb:n.a,ScrmFormItem:o.a,Transfer:r,SelectDialog:u},data:function(){return{minH:500,shopList:{unSelectOptions:[],selectedOptions:[]},dccGroupConfig:{title:"选择DCC组长",label:"DCC组长",selectOptions:[],optionLabel:"nickname",optionValue:"id",itemInfo:{leaderId:""},itemKey:"leaderId"},dccConfig:{title:"添加DCC邀约员",label:"DCC邀约员",selectOptions:[],isCheckRemove:!0,isDccDialog:!0,optionLabel:"nickname",optionValue:"id",itemInfo:{dcc:[]},itemKey:"dcc"},form:{title:""}}},created:function(){this.initData(),this.getUsers(),"/call/seat/seat-manage/edit"==this.$route.path&&(this.editId=this.$route.query.id,this.type="edit",this.getViewInfo())},mounted:function(){var t=this;this.$nextTick(function(){t.minH=document.body.clientHeight-200})},methods:{initData:function(){var t=this;this.transProps={key:"id",label:"title"},this.$fetch.callCenter.areaSelectList({}).then(function(e){t.$handleResponse(e,function(e){t.shopList.unSelectOptions=e},!0)}).catch(function(e){t.$store.commit("closeLoading")})},getUsers:function(){var t=this;this.$fetch.setting.queryAccountList({pagination:0,roleKey:"dcc_group_leader"}).then(function(e){t.$handleResponse(e,function(e){t.dccGroupConfig.selectOptions=t.$hasArrContent(e.list)?e.list:[],t.checkGroupLeader()},!0)}).catch(function(e){t.$store.commit("closeLoading")})},getViewInfo:function(){var t=this;this.$fetch.callCenter.viewGroup({id:this.editId}).then(function(e){t.$handleResponse(e,function(e){if(t.form.title=e.title,t.dccGroupConfig.itemInfo.leaderId=e.leaderId,t.$hasArrContent(e.areas)&&e.areas.forEach(function(e){t.shopList.selectedOptions.push({id:e.id,title:e.areaName}),t.shopList.unSelectOptions.push({id:e.id,title:e.areaName})}),t.$hasArrContent(e.dccs)){var i=[],n=[];e.dccs.forEach(function(t){i.push(t.dccId),n.push({id:t.dccId,nickname:t.dccName?t.dccName:"--"})}),t.dccConfig.itemInfo.dcc=i,t.dccConfig.selectOptions=n}t.checkGroupLeader()},!0)}).catch(function(){t.$store.commit("closeLoading")})},checkGroupLeader:function(){var t=this.dccGroupConfig.itemInfo,e=t.leaderId,i=t.leaderName;if("edit"==this.type&&e>-1){var n=!1;if(this.$hasArrContent(this.dccGroupConfig.selectOptions))for(var o=0;o<this.dccGroupConfig.selectOptions.length;o++)if(this.dccGroupConfig.selectOptions[o].id==e){n=!0;break}n||this.dccGroupConfig.selectOptions.unshift({id:e,nickname:i||"--"})}},getParams:function(){if(!this.form.title)return this.$message.error("坐席组名称不为空"),!1;var t=this.dccGroupConfig.itemInfo.leaderId;if(!t)return this.$message.error("负责人不为空"),!1;var e=[];if(this.$hasArrContent(this.shopList.selectedOptions)&&this.shopList.selectedOptions.forEach(function(t){e.push(t.id)}),!this.$hasArrContent(e))return this.$message.error("服务门店不为空"),!1;var i=this.dccConfig.itemInfo.dcc;return{title:this.form.title,leaderId:t,area:e,dccId:i,id:this.editId}},saveFn:function(){var t=this,e=this.getParams();if(e){var i=this.editId?"updateSeatGroup":"createGroupSeat";this.$fetch.callCenter[i](e).then(function(e){t.$handleResponse(e,function(e){t.$message.success((t.editId?"编辑":"新增")+"成功"),t.$router.push("/call/seat/seat-manage")},!0)}).catch(function(){t.$store.commit("closeLoading")})}},cancelFn:function(){this.$router.push("/call/seat/seat-manage")}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-seat-page"},[i("bread-crumb",{staticClass:"m-20 common-box"}),t._v(" "),i("div",{staticClass:"m-20 common-box p-20 add-seat-content",style:{"min-height":t.minH+"px"}},[i("el-form",{ref:"form",staticClass:"add-seat-form m-t-10",attrs:{"label-width":"180px"}},[i("scrm-form-item",{attrs:{itemLabel:"坐席组名称",itemType:"input",itemRequired:!0,itemClass:"form_required_after",subClass:"w-100-percent",placeholder:"20个字符以内",itemInfo:t.form,itemKey:"title",maxlength:"20"}}),t._v(" "),i("scrm-form-item",{attrs:{itemLabel:"负责人",itemRequired:!0,itemClass:"form_required_after"}},[i("template",{slot:"custom"},[i("select-dialog",{key:"dcc",attrs:{btnName:"选择DCC组长",isMultiple:!1,configs:t.dccGroupConfig}})],1)],2),t._v(" "),i("scrm-form-item",{attrs:{itemLabel:"服务门店",itemRequired:!0,itemClass:"form_required_after"}},[i("template",{slot:"custom"},[i("transfer",{key:"shop",attrs:{size:"small",configs:t.shopList,btnName:"添加4S店",transProps:t.transProps,optionKey:"title"}})],1)],2),t._v(" "),i("scrm-form-item",{attrs:{itemLabel:"DCC邀约员",itemRequired:!0,itemClass:"form_required_after"}},[i("template",{slot:"custom"},[i("select-dialog",{key:"invite",attrs:{btnName:"添加DCC邀约员",multiple:"","collapse-tags":"",configs:t.dccConfig}})],1)],2),t._v(" "),i("scrm-form-item",{staticClass:"m-t-30"},[i("template",{slot:"custom"},[i("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:t.cancelFn}},[t._v("取 消")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:t.saveFn}},[t._v("确 定")])],1)],2)],1)],1)],1)},staticRenderFns:[]};var m=i("VU/8")(p,h,!1,function(t){i("Hlkc")},"data-v-2f5685a1",null);e.default=m.exports},q2nx:function(t,e){},xlys:function(t,e,i){"use strict";var n=i("woOf"),o=i.n(n),s=i("kfhN"),a={props:{title:{type:String,default:"添加坐席"},config:{type:Object,default:{label:"坐席",selectOptions:[],optionLabel:"",optionValue:"",itemInfo:{},itemKey:"name",isCheckRemove:!0}},isDccDialog:{type:Boolean,default:!1}},components:{ScrmFormItem:s.a},data:function(){return{dialogVisible:!0,dialogConfig:{},loading:!1}},created:function(){if(this.copyArr=[],this.dialogConfig=this.$deepCopyContent(this.config),this.dialogConfig.isCheckRemove){var t=this.dialogConfig.itemInfo[this.dialogConfig.itemKey];this.dialogConfig.copyDcc=t?this.$deepCopyContent(t):[],this.copyArr=t?this.$deepCopyContent(t):[]}this.isDccDialog&&this.getSelectList()},methods:{addFn:function(){o()(this.config,this.dialogConfig),this.$emit("close","success")},cancel:function(){this.$emit("close","cancel")},getSelectList:function(){var t=this;this.loading=!0,this.$fetch.callCenter.dccSelectList({page:1,pageSize:1e4}).then(function(e){t.loading=!1,t.$handleResponse(e,function(e){var i=t.$hasArrContent(e)?e:[];t.checkSelectOptions(i)},!1)}).catch(function(){t.loading=!1})},checkSelectOptions:function(t){var e=this,i=[];this.$hasArrContent(this.dialogConfig.selectOptions)&&this.dialogConfig.selectOptions.forEach(function(t){i.push(t[e.dialogConfig.optionValue])}),this.$hasArrContent(i)&&this.$hasArrContent(t)?t.forEach(function(t){-1==i.indexOf(t[e.dialogConfig.optionValue])&&e.dialogConfig.selectOptions.push(t)}):this.dialogConfig.selectOptions=this.dialogConfig.selectOptions.concat(t)},changeTag:function(t){var e=this;if(this.dialogConfig.isCheckRemove)if(this.copyArr.length<=t.length)this.copyArr=this.$deepCopyContent(t);else{var i=this.copyArr.filter(function(e){return-1===t.indexOf(e)});this.dialogConfig.copyDcc.includes(i[0])?(this.loading=!0,this.$fetch.callCenter.checkDccUnbind({dccId:i[0]}).then(function(n){e.loading=!1,e.$handleResponse(n,function(n){if(0==n.result)e.$message.error(n.msg),e.dialogConfig.itemInfo[e.dialogConfig.itemKey]=e.$deepCopyContent(e.copyArr);else{e.copyArr=e.$deepCopyContent(t);for(var o=0,s=e.dialogConfig.copyDcc.length;o<s;o++)if(e.dialogConfig.copyDcc[o]==i[0])return void e.dialogConfig.copyDcc.splice(o,1)}},!0)}).catch(function(t){e.loading=!1})):this.copyArr=this.$deepCopyContent(t)}}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"add-seat-dialog",attrs:{title:t.title,visible:t.dialogVisible,width:"520px","append-to-body":"","close-on-click-modal":!1,"before-close":t.cancel},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"110px"}},[i("scrm-form-item",t._g(t._b({attrs:{itemLabel:t.dialogConfig.label,itemType:"select",filterable:!0,selectOptions:t.dialogConfig.selectOptions,optionLabel:t.dialogConfig.optionLabel,optionValue:t.dialogConfig.optionValue,itemInfo:t.dialogConfig.itemInfo,itemKey:t.dialogConfig.itemKey},on:{change:t.changeTag}},"scrm-form-item",t.$attrs,!1),t.$listeners)),t._v(" "),i("el-form-item")],1),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:t.addFn}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var l=i("VU/8")(a,c,!1,function(t){i("Izm0")},"data-v-6f0e24a4",null);e.a=l.exports}});
//# sourceMappingURL=3.f000fbb17dea469d40e8.js.map