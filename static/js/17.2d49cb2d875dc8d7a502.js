webpackJsonp([17],{DHWZ:function(n,e,t){var o=t("J998");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);t("rjj0")("4cfb0f86",o,!1,{})},J998:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.edit-people-dialog[data-v-3fe4b574] .el-dialog__body{padding:20px 35px 20px 20px\n}\n.edit-people-dialog[data-v-3fe4b574] .el-dialog__footer{padding-bottom:35px\n}\n.edit-people-dialog .view-form[data-v-3fe4b574] .el-form-item{margin-bottom:0\n}\n.edit-people-dialog .edit-form[data-v-3fe4b574] .el-form-item{margin-bottom:10px\n}\n.p-text[data-v-3fe4b574]{height:27px;line-height:27px\n}\n.success[data-v-3fe4b574]{color:#34b572\n}\n.role-wrap[data-v-3fe4b574]{padding:2px 0 2px\n}\n.role-wrap-view[data-v-3fe4b574]{background:#f2f8fc;padding:2px 0 2px\n}\n.close-icon[data-v-3fe4b574]{right:5px;top:13px\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/setting/people/components/D:/liu/vue-project/MyTest/src/pages/setting/people/components/EditAndView.vue"],names:[],mappings:";AA4PA,sDACI,2BAA4B;CAC/B;AAAA,wDAGG,mBAAoB;CACvB;AAAA,8DAGG,eAAgB;CACnB;AAAA,8DAGG,kBAAmB;CACtB;AAAA,yBAEG,YACA,gBAAiB;CACpB;AAAA,0BAGG,aAAc;CACjB;AAAA,4BAIG,iBAAkB;CACrB;AAAA,iCAGG,mBACA,iBAAkB;CACrB;AAAA,6BAGG,UACA,QAAS;CACZ",file:"EditAndView.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.edit-people-dialog /deep/.el-dialog__body {\r\n    padding: 20px 35px 20px 20px;\r\n}\r\n\r\n.edit-people-dialog /deep/.el-dialog__footer {\r\n    padding-bottom: 35px;\r\n}\r\n\r\n.edit-people-dialog .view-form /deep/  .el-form-item {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.edit-people-dialog .edit-form /deep/ .el-form-item {\r\n    margin-bottom: 10px;\r\n}\r\n.p-text {\r\n    height: 27px;\r\n    line-height: 27px;\r\n}\r\n\r\n.success {\r\n    color: #34b572;\r\n}\r\n \r\n.role-wrap {\r\n    // background: #f2f8fc;\r\n    padding: 2px 0 2px;\r\n}\r\n\r\n.role-wrap-view {\r\n    background: #f2f8fc;\r\n    padding: 2px 0 2px;\r\n}\r\n\r\n.close-icon {\r\n    right: 5px;\r\n    top: 13px;\r\n}\r\n"],sourceRoot:""}])},Stbl:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.add-people-dialog[data-v-8d05bfb8] .el-dialog__body{padding:20px 35px 20px 20px\n}\n.add-people-dialog[data-v-8d05bfb8] .el-dialog__footer{padding-bottom:35px\n}\n.add-people-dialog[data-v-8d05bfb8] .el-form-item{margin-bottom:10px\n}\n.role-wrap[data-v-8d05bfb8]{padding:2px 0 2px\n}\n.close-icon[data-v-8d05bfb8]{right:5px;top:14px\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/setting/people/components/D:/liu/vue-project/MyTest/src/pages/setting/people/components/AddPeople.vue"],names:[],mappings:";AAqMA,qDACI,2BAA4B;CAC/B;AAAA,uDAGG,mBAAoB;CACvB;AAAA,kDAIG,kBAAmB;CACtB;AAAA,4BAIG,iBAAkB;CACrB;AAAA,6BAGG,UACA,QAAS;CACZ",file:"AddPeople.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.add-people-dialog /deep/.el-dialog__body {\r\n    padding: 20px 35px 20px 20px;\r\n}\r\n\r\n.add-people-dialog /deep/.el-dialog__footer {\r\n    padding-bottom: 35px;\r\n}\r\n\r\n\r\n.add-people-dialog /deep/ .el-form-item {\r\n    margin-bottom: 10px;\r\n}\r\n \r\n.role-wrap {\r\n    // background: #f2f8fc;\r\n    padding: 2px 0 2px;\r\n}\r\n\r\n.close-icon {\r\n    right: 5px;\r\n    top: 14px;\r\n}\r\n"],sourceRoot:""}])},YIrb:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.group-title[data-v-9ab7d11e]{color:#444;font-size:20px;padding-left:20px;font-weight:600;height:60px;line-height:60px;background-color:#fafcff;border-bottom:solid 1px #eaebf0\n}\n.group-people-page[data-v-9ab7d11e] .top-pagination{display:none\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/setting/people/D:/liu/vue-project/MyTest/src/pages/setting/people/GroupPeople.vue"],names:[],mappings:";AA6XA,8BACI,WACA,eACA,kBACA,gBACA,YACA,iBACA,yBACA,+BAAgC;CACnC;AAAA,oDAGG,YAAa;CAChB",file:"GroupPeople.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.group-title {\r\n    color: #444;\r\n    font-size: 20px;\r\n    padding-left: 20px;\r\n    font-weight: 600;\r\n    height: 60px;\r\n    line-height: 60px;\r\n    background-color: #fafcff;\r\n    border-bottom: solid 1px #eaebf0;\r\n}\r\n\r\n.group-people-page /deep/ .top-pagination {\r\n    display: none;\r\n}\r\n"],sourceRoot:""}])},cuxY:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("/Uby"),i=t("IaGi"),a=t("ufHF"),s={props:{info:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,dialogVisible:!0,title:"自定义增入",formInfo:{name:"",account:"",password:"",tel:"",status:"",roles:[{id:"",options:[]}]},nameList:[]}},created:function(){1==this.info.type&&(this.title="业财增入",this.getYecaiList()),this.formInfo.roles[0].options=this.$deepCopyContent(this.info.roleList)},methods:{getYecaiList:function(){var n=this;this.loading=!0,this.$fetch.setting.yecaiAccounts({pagination:0}).then(function(e){n.loading=!1,n.$handleResponse(e,function(e){n.nameList=n.$hasArrContent(e.list)?e.list:[],n.nameObj={},n.nameList.forEach(function(e){n.nameObj[e.id]=e})},!1)}).catch(function(e){n.loading=!1})},cancel:function(){this.$emit("close","cancel")},getParams:function(){var n=this.formInfo,e=n.name,t=n.account,o=n.tel,i=n.status,a=n.roles,s=[];if(a.forEach(function(n){""!==n.id&&s.push(n.id)}),!this.$hasArrContent(a)||a&&!a[0].id)return this.$message.error("第一个角色必填"),!1;var l={name:e,account:t,tel:o,type:this.info.type,status:i,roleIds:s};return 0==this.info.type&&this.formInfo.password&&(l.password=this.formInfo.password),l},saveFn:function(){var n=this,e=this.getParams();e&&(this.loading=!0,this.$fetch.setting.accountCreate(e).then(function(e){n.loading=!1,n.$handleResponse(e,function(e){n.$message.success("新增成功"),n.$emit("close","success")},!0)}).catch(function(){n.loading=!1,n.$store.commit("closeLoading")}))},addRole:function(){this.formInfo.roles.push({id:"",options:this.$deepCopyContent(this.info.roleList)}),this.roleChange()},deleteRole:function(n){this.formInfo.roles.splice(n,1),this.roleChange()},changePeople:function(n){var e=this.nameObj[n];this.formInfo.name=e.nickname,this.formInfo.account=e.account,this.formInfo.tel=e.tel},roleChange:function(){var n=this;this.selectId=[],this.formInfo.roles.forEach(function(e){e.id&&n.selectId.push(e.id)}),this.formInfo.roles.forEach(function(e){e.options.forEach(function(t){n.selectId.includes(t.id)&&t.id!=e.id?t.disabled=!0:t.disabled=!1})}),this.$forceUpdate()}}},l=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("el-dialog",{staticClass:"add-people-dialog",attrs:{title:n.title,visible:n.dialogVisible,width:"550px",appentToBody:"","close-on-click-modal":!1,"before-close":n.cancel},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"120px"}},[t("el-form-item",{staticClass:"form_required_after",attrs:{label:"姓名:",required:!0}},[0==n.info.type?t("el-input",{staticClass:"w-350",attrs:{placeholder:"自定义输入，最多可输入15个字符",maxlength:15,size:"small"},model:{value:n.formInfo.name,callback:function(e){n.$set(n.formInfo,"name",e)},expression:"formInfo.name"}}):t("el-select",{staticClass:"w-350",attrs:{filterable:"",size:"small"},on:{change:n.changePeople},model:{value:n.formInfo.yecai,callback:function(e){n.$set(n.formInfo,"yecai",e)},expression:"formInfo.yecai"}},n._l(n.nameList,function(n,e){return t("el-option",{key:"name"+e,attrs:{value:n.id,label:n.nickname}})}),1)],1),n._v(" "),t("el-form-item",{staticClass:"form_required_after",attrs:{label:"账号:",required:!0}},[t("el-input",{staticClass:"w-350",attrs:{placeholder:"自定义输入，最多可输入15个字符",maxlength:15,disabled:1==n.info.type,size:"small"},model:{value:n.formInfo.account,callback:function(e){n.$set(n.formInfo,"account",e)},expression:"formInfo.account"}})],1),n._v(" "),0==n.info.type?t("el-form-item",{staticClass:"form_required_after",attrs:{label:"密码:",required:!0}},[t("el-input",{staticClass:"w-350",attrs:{placeholder:"123456gqsm",size:"small"},model:{value:n.formInfo.password,callback:function(e){n.$set(n.formInfo,"password",e)},expression:"formInfo.password"}})],1):n._e(),n._v(" "),t("el-form-item",{staticClass:"form_required_after",attrs:{label:"电话号码:",required:!0}},[t("el-input",{staticClass:"w-350",attrs:{type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",maxlength:11,placeholder:"请输入",disabled:1==n.info.type,size:"small"},model:{value:n.formInfo.tel,callback:function(e){n.$set(n.formInfo,"tel","string"==typeof e?e.trim():e)},expression:"formInfo.tel"}})],1),n._v(" "),t("el-form-item",{staticClass:"form_required_after",attrs:{label:"账号状态:",required:!0}},[t("el-select",{staticClass:"w-350",attrs:{size:"small"},model:{value:n.formInfo.status,callback:function(e){n.$set(n.formInfo,"status",e)},expression:"formInfo.status"}},[t("el-option",{attrs:{value:0,label:"启用"}}),n._v(" "),t("el-option",{attrs:{value:1,label:"禁用"}})],1)],1),n._v(" "),n._l(n.formInfo.roles,function(e,o){return t("div",{key:"sub"+o,staticClass:"role-wrap por"},[t("el-form-item",{staticClass:"role-item",class:{form_required_after:0==o},attrs:{label:"角色"+(o+1)+":",required:0==o}},[t("el-select",{staticClass:"w-350",attrs:{size:"small"},on:{change:n.roleChange},model:{value:e.id,callback:function(t){n.$set(e,"id",t)},expression:"item.id"}},n._l(e.options,function(n,e){return t("el-option",{key:"role"+e,attrs:{value:n.id,label:n.name,disabled:n.disabled}})}),1)],1),n._v(" "),o?t("div",{staticClass:"poa close-icon pointer",on:{click:function(e){return n.deleteRole(o)}}},[t("i",{staticClass:"el-icon-error"})]):n._e()],1)}),n._v(" "),t("el-form-item",{attrs:{label:""}},[t("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",icon:"el-icon-plus",size:"small"},on:{click:n.addRole}},[n._v("增加角色")])],1)],2),n._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:n.cancel}},[n._v("取 消")]),n._v(" "),t("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:function(e){return n.saveFn()}}},[n._v(" 保存 ")])],1)],1)};l._withStripped=!0;var r={render:l,staticRenderFns:[]},c=r;var d=!1;var p=t("VU/8")(s,c,!1,function(n){d||t("ghp6")},"data-v-8d05bfb8",null);p.options.__file="src/pages/setting/people/components/AddPeople.vue";var f=p.exports,u=t("kfhN"),h={props:{info:{type:Object,default:function(){return{}}}},components:{ScrmFormItem:u.a},data:function(){return{loading:!1,dialogVisible:!0,title:"编辑用户",dialogType:"edit",editInfo:{}}},created:function(){this.dialogType=this.info.type,"view"==this.info.type?this.title="用户详情":this.editFn()},methods:{cancel:function(n){if("view"==this.info.type&&"edit"==this.dialogType&&"1"==n)return this.dialogType="view",void(this.title="用户详情");this.$emit("close","cancel")},editFn:function(){var n=this;this.title="编辑用户",this.dialogType="edit",this.editInfo=this.$deepCopyContent(this.info.data),this.$hasArrContent(this.editInfo.roles)?(this.editInfo.roles.forEach(function(e){e.options=n.$deepCopyContent(n.info.roleList)}),this.roleChange()):this.editInfo.roles=[]},getParams:function(){var n=this.editInfo,e=n.nickname,t=n.account,o=n.tel,i=n.type,a=n.status,s=(n.id,n.roles),l=[];if(this.$hasArrContent(s)&&s.forEach(function(n){""!==n.id&&l.push(n.id)}),!this.$hasArrContent(s)||s&&!s[0].id)return this.$message.error("第一个角色必填"),!1;var r={name:e,account:t,tel:o,type:i,status:a,roleIds:l};return 0==this.editInfo.type&&(r.password=this.editInfo.password),r},saveFn:function(){var n=this,e=this.getParams();e&&(this.loading=!0,this.$fetch.setting.accountUpdate(this.editInfo.id,e).then(function(t){n.loading=!1,n.$handleResponse(t,function(t){n.checkMySelf(e.roleIds),n.$emit("close","success")},!0)}).catch(function(){n.loading=!1,n.$store.commit("closeLoading")}))},checkMySelf:function(n){var e=JSON.parse(localStorage.getItem("roleInfo"));if(e&&e.id>-1&&e.id==this.info.data.id){for(var t=e&&e.currentRole&&e.currentRole.id,o=!1,i=0;i<n.length;i++)if(t>-1&&t==n[i]){o=!0;break}o?(this.$eventHub.$emit("editMySelf",!0,"people"),this.$message.success("编辑成功")):this.$eventHub.$emit("editMySelf",!1,"people")}},getDetail:function(n){var e=this;this.$fetch.setting.accountInfo(n,{}).then(function(n){e.$handleResponse(n,function(n){},!0)}).catch(function(){e.$store.commit("closeLoading")})},addRole:function(){this.editInfo.roles.push({id:"",options:this.$deepCopyContent(this.info.roleList)}),this.roleChange()},deleteRole:function(n){this.editInfo.roles.splice(n,1),this.roleChange()},roleChange:function(){var n=this;this.selectId=[],this.editInfo.roles.forEach(function(e){e.id&&n.selectId.push(e.id)}),this.editInfo.roles.forEach(function(e){e.options.forEach(function(t){n.selectId.includes(t.id)&&t.id!=e.id?t.disabled=!0:t.disabled=!1})}),this.$forceUpdate()}}},m=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("el-dialog",{staticClass:"edit-people-dialog",attrs:{title:n.title,visible:n.dialogVisible,width:"550px",appentToBody:"","close-on-click-modal":!1,"before-close":n.cancel},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"edit"==n.dialogType,expression:"dialogType == 'edit'"},{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"edit-form"},[t("el-form",{ref:"form",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:"账号:"}},[n._v("\n                "+n._s(n._f("filterBlank")(n.editInfo.account))+"\n            ")]),n._v(" "),t("el-form-item",{attrs:{label:"姓名:"}},[0==n.editInfo.type?t("el-input",{staticClass:"w-350",attrs:{size:"small"},model:{value:n.editInfo.nickname,callback:function(e){n.$set(n.editInfo,"nickname",e)},expression:"editInfo.nickname"}}):t("span",[n._v(n._s(n.editInfo.nickname))])],1),n._v(" "),0==n.editInfo.type?t("el-form-item",{attrs:{label:"重置密码:"}},[t("el-input",{staticClass:"w-350",attrs:{size:"small"},model:{value:n.editInfo.password,callback:function(e){n.$set(n.editInfo,"password",e)},expression:"editInfo.password"}})],1):n._e(),n._v(" "),t("el-form-item",{attrs:{label:"手机号:"}},[0==n.editInfo.type?t("el-input",{staticClass:"w-350",attrs:{type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",size:"small"},model:{value:n.editInfo.tel,callback:function(e){n.$set(n.editInfo,"tel","string"==typeof e?e.trim():e)},expression:"editInfo.tel"}}):t("span",[n._v(n._s(n.editInfo.tel))])],1),n._v(" "),t("el-form-item",{staticClass:"form_required_after",attrs:{label:"账号状态:",required:!0}},[t("el-select",{staticClass:"w-350",attrs:{size:"small"},model:{value:n.editInfo.status,callback:function(e){n.$set(n.editInfo,"status",e)},expression:"editInfo.status"}},[t("el-option",{attrs:{value:0,label:"启用"}}),n._v(" "),t("el-option",{attrs:{value:1,label:"禁用"}})],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"用户类型:"}},[n._v("\n               "+n._s(0==n.editInfo.type?"自定义增入":"业财增入")+"\n            ")]),n._v(" "),n._l(n.editInfo.roles,function(e,o){return t("div",{key:"sub"+o,staticClass:"role-wrap por"},[t("el-form-item",{staticClass:"role-item",class:{form_required_after:0==o},attrs:{label:"角色"+(o+1)+":",required:0==o}},[t("el-select",{staticClass:"w-350",attrs:{size:"small"},on:{change:n.roleChange},model:{value:e.id,callback:function(t){n.$set(e,"id",t)},expression:"item.id"}},n._l(e.options,function(n,e){return t("el-option",{key:"role"+e,attrs:{value:n.id,label:n.name,disabled:n.disabled}})}),1)],1),n._v(" "),o?t("div",{staticClass:"poa close-icon pointer",on:{click:function(e){return n.deleteRole(o)}}},[t("i",{staticClass:"el-icon-error"})]):n._e()],1)}),n._v(" "),t("el-form-item",{attrs:{label:""}},[t("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",icon:"el-icon-plus",size:"small"},on:{click:n.addRole}},[n._v("增加角色")])],1)],2)],1),n._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"view"==n.dialogType,expression:"dialogType == 'view'"}],staticClass:"view-form"},[t("el-form",{ref:"form",attrs:{"label-width":"155px"}},[t("el-form-item",{attrs:{label:"增入时间:"}},[n._v("\n                "+n._s(n._f("filterBlank")(n.info.data.createdDate))+"\n            ")]),n._v(" "),t("el-form-item",{attrs:{label:"姓名:"}},[n._v("\n                "+n._s(n._f("filterBlank")(n.info.data.nickname))+"\n            ")]),n._v(" "),t("el-form-item",{attrs:{label:"账号:"}},[n._v("\n                "+n._s(n._f("filterBlank")(n.info.data.account))+"\n            ")]),n._v(" "),t("el-form-item",{attrs:{label:"账号状态:"}},[t("span",{class:{success:0==n.info.data.status}},[n._v(n._s(0==n.info.data.status?"启用":"禁用"))])]),n._v(" "),n._l(n.info.data.roles,function(e,o){return t("div",{key:"sub"+o,staticClass:"role-wrap-view por"},[t("el-form-item",{staticClass:"role-item",attrs:{label:"角色"+(o+1)+":"}},[n._v("\n                     "+n._s(n._f("filterBlank")(e.name))+"\n                ")]),n._v(" "),t("el-form-item",{attrs:{label:"管理范围"+(o+1)+":"}},n._l(e.orgs,function(e,o){return t("p",{key:"orgs"+o,class:{"p-text":o>0}},[n._v(" "+n._s(n._f("filterBlank")(e.name)))])}),0)],1)})],2)],1),n._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:function(e){return n.cancel("1")}}},[n._v("取 消")]),n._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"view"==n.dialogType,expression:"dialogType== 'view'"}],staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:function(e){return n.editFn()}}},[n._v(" 编辑")]),n._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"edit"==n.dialogType,expression:"dialogType== 'edit'"}],staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:function(e){return n.saveFn()}}},[n._v(" 保存 ")])],1)])};m._withStripped=!0;var g={render:m,staticRenderFns:[]},v=g;var b=!1;var A=t("VU/8")(h,v,!1,function(n){b||t("DHWZ")},"data-v-3fe4b574",null);A.options.__file="src/pages/setting/people/components/EditAndView.vue";var _=A.exports,C=t("PdD4"),w={components:{SearchBar:o.a,SearchCol:i.a,DataTable:a.a,AddPeople:f,EditAndView:_},mixins:[C.a],data:function(){return{addDialog:{show:!1,type:0,roleList:[]},editDialog:{show:!1,type:"view",data:{},roleList:[],orgList:[]}}},created:function(){this.initData(),this.queryData()},methods:{initData:function(){this.initSearch(),this.initTable(),this.initPeopleOptions()},initSearch:function(){this.search={list:[{prop:"keyword",type:"input",label:"姓名/账号",currentVal:""},{prop:"status",type:"select",label:"账号状态",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[{label:"启用",val:0},{label:"禁用",val:1}],optionLabel:"label",optionValue:"val"},{prop:"role",type:"select",label:"角色权限",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"name",optionValue:"id"},{prop:"org",type:"select",label:"管理范围",currentVal:"",selectOptions:[],isAll:!0,isAllTitle:"全部",optionLabel:"name",optionValue:"id"}],keyword:0,status:1,role:2,org:3}},initTable:function(){this.dataTable={tr:[{id:"1",label:"姓名",prop:"nickname",tooltip:!0,show:"template",align:"center"},{id:"2",label:"账号",prop:"account",tooltip:!0,align:"center"},{id:"3",label:"电话号码",prop:"tel",tooltip:!0,align:"center"},{id:"4",label:"账号状态",prop:"status",show:"template",align:"center"},{id:"5",label:"角色",prop:"roles",show:"template",align:"center"},{id:"6",label:"管理范围",prop:"org",show:"template",align:"center"},{id:"7",label:"用户类型",prop:"type",show:"template",align:"center"},{id:"8",label:"操作",prop:"caozuo",show:"template",width:230,align:"center"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},hasSelect:!0,hasExpand:!1,hasFirstPagination:!0,showScrollBar:!0,search:{value:"",show:!1,url:"setting.queryAccountList",width:"300",placeholder:"线索号码、微信号",displayCol:["nickname","tel"],params:{id:""}}}},initPeopleOptions:function(){var n=this;this.$fetch.setting.queryOrgList({},!0,!1).then(function(e){var t=e.data.data.orgStruct;n.$hasArrContent(t)&&(n.search.list[n.search.org].selectOptions=[],n.getTreeSelect(t))}).catch(function(){n.$store.commit("closeLoading")}),this.$fetch.setting.queryRoleList({pagination:0},!0,!1).then(function(e){n.$handleResponse(e,function(e){n.search.list[n.search.role].selectOptions=n.$hasArrContent(e.list)?e.list:[]},!0)}).catch(function(){n.$store.commit("closeLoading")})},getTreeSelect:function(n){var e=this;n.forEach(function(n){e.search.list[e.search.org].selectOptions.push(n),e.$hasArrContent(n.child)&&e.getTreeSelect(n.child)})},getParams:function(){var n=this.dataTable.page,e=n.currentPage,t=n.pageSize,o=this.search,i=o.keyword,a=o.status,s=o.role,l=o.org,r=o.list;return{keyword:r[i].currentVal,status:r[a].currentVal,roleId:r[s].currentVal,orgId:r[l].currentVal,expand:"roles,orgs",pageSize:t,page:e}},queryData:function(){var n=this,e=this,t=this.getParams();this.$fetch.setting.queryAccountList(t).then(function(t){n.$handleResponse(t,function(n){e.dataTable.data=n.list?n.list:[],e.dataTable.page=n.page?n.page:e.dataTable.page},!0)}).catch(function(){n.$store.commit("closeLoading")})},addFn:function(n){var e=this.search,t=e.role,o=(e.org,e.list);this.addDialog.type=n,this.addDialog.show=!0,this.addDialog.roleList=o[t].selectOptions},closeAdd:function(n){this.addDialog.show=!1,"success"==n&&this.queryData()},editFn:function(n,e){var t=this.search,o=t.role,i=(t.org,t.list);this.editDialog.type=n,this.editDialog.data=e,this.editDialog.show=!0,this.editDialog.roleList=i[o].selectOptions},closeView:function(n){this.editDialog.show=!1,"success"==n&&this.queryData()},updateFn:function(n){var e=this;this.$confirm("您确认"+(0==n.status?"禁用":"启用")+"该账号","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){var t=0==n.status?"accountDisable":"accountEnable";e.$fetch.setting[t](n.id).then(function(t){e.$handleResponse(t,function(t){e.$message.success((0==n.status?"禁用":"启用")+"成功"),e.queryData()},!0)}).catch(function(n){e.$store.commit("closeLoading")})})},batchDelete:function(){var n=this;this.$hasArrContent(this.selectData)?this.$confirm("您确定要删除选中的人员吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){var e=[];n.selectData.forEach(function(n){e.push(n.id)}),n.deleteAccount(e)}):this.$message.warning("您还没选择人员")},deleteFn:function(n){var e=this;this.$confirm("是否确定删除此人员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.deleteAccount([n.id])})},deleteAccount:function(n){var e=this;this.$fetch.setting.accountDelete(n.join(","),{}).then(function(n){e.$handleResponse(n,function(n){e.$message.success("删除成功!"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})}}},y=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"group-people-page m-20 common-box"},[t("div",{staticClass:"group-title"},[n._v("集团人员列表")]),n._v(" "),t("search-bar",{staticClass:"p-20 m-t-10",attrs:{size:"small"},on:{clear:n.clear,find:n.find}},[t("div",{staticClass:"search-flex"},[t("search-col",{attrs:{info:n.search.list[n.search.keyword],placeholder:"请输入"}}),n._v(" "),t("search-col",{attrs:{info:n.search.list[n.search.status]}}),n._v(" "),t("search-col",{attrs:{info:n.search.list[n.search.role]}}),n._v(" "),t("search-col",{attrs:{info:n.search.list[n.search.org]}})],1)]),n._v(" "),t("div",{staticClass:"p-l-r-20 p-b-20"},[t("data-table",{ref:"DataTableRef",attrs:{table:n.dataTable},on:{searchTable:n.searchTable,onHandleSelectionChange:n.handleSelectionChange},scopedSlots:n._u([{key:"nickname",fn:function(e){return[t("el-button",{staticClass:"pointer",attrs:{type:"text"},on:{click:function(t){return n.editFn("view",e.obj.row)}}},[n._v(n._s(e.obj.row.nickname))])]}},{key:"status",fn:function(e){return[n._v("\n                "+n._s(0==e.obj.row.status?"启用":"禁用")+"\n            ")]}},{key:"roles",fn:function(e){return[e.obj.row.roles&&e.obj.row.roles.length?t("span",[n._v("\n                    "+n._s(e.obj.row.roles[0].name)+"\n                    "),e.obj.row.roles.length>1?t("span",[n._v("等"+n._s(e.obj.row.roles.length)+"个角色")]):n._e()]):t("span",[n._v(" --")])]}},{key:"org",fn:function(e){return[e.obj.row.roles&&e.obj.row.roles.length&&e.obj.row.roles[0].orgs&&e.obj.row.roles[0].orgs.length?t("span",[n._v("\n                    "+n._s(e.obj.row.roles[0].orgs[0].name)+"\n                    "),e.obj.row.roles[0].orgs.length>1?t("span",[n._v("等"+n._s(e.obj.row.roles[0].orgs.length)+"个组织")]):n._e()]):t("span",[n._v(" --")])]}},{key:"type",fn:function(e){return[n._v("\n                "+n._s(0==e.obj.row.type?"自定义增入":"业财增入")+"\n            ")]}},{key:"caozuo",fn:function(e){return[t("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(t){return n.updateFn(e.obj.row)}}},[n._v(n._s(0==e.obj.row.status?"禁用":"启用"))]),n._v(" "),t("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(t){return n.editFn("edit",e.obj.row)}}},[n._v("编辑")]),n._v(" "),t("el-button",{staticClass:"red_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(t){return n.deleteFn(e.obj.row)}}},[n._v("删除")])]}}])},[t("div",{attrs:{slot:"buttons"},slot:"buttons"},[t("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(e){return n.addFn(1)}}},[n._v("业财增入")]),n._v(" "),t("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(e){return n.addFn(0)}}},[n._v("自定义增入")]),n._v(" "),t("el-button",{staticClass:"w-90",attrs:{plain:"",size:"small",round:""},on:{click:n.batchDelete}},[n._v("删除")])],1)])],1),n._v(" "),n.addDialog.show?t("add-people",{attrs:{info:n.addDialog},on:{close:n.closeAdd}}):n._e(),n._v(" "),n.editDialog.show?t("edit-and-view",{attrs:{info:n.editDialog},on:{close:n.closeView}}):n._e()],1)};y._withStripped=!0;var x={render:y,staticRenderFns:[]},I=x;var k=!1;var $=t("VU/8")(w,I,!1,function(n){k||t("vw7D")},"data-v-9ab7d11e",null);$.options.__file="src/pages/setting/people/GroupPeople.vue";e.default=$.exports},ghp6:function(n,e,t){var o=t("Stbl");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);t("rjj0")("360d0109",o,!1,{})},vw7D:function(n,e,t){var o=t("YIrb");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);t("rjj0")("90681790",o,!1,{})}});
//# sourceMappingURL=17.2d49cb2d875dc8d7a502.js.map