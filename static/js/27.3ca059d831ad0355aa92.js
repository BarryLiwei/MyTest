webpackJsonp([27],{OY9L:function(t,e,n){(t.exports=n("UTlt")(!0)).push([t.i,"\n.attack-form-dialog .require-right[data-v-31516f3e] .el-form-item__label{position:relative\n}\n.attack-form-dialog .require-right[data-v-31516f3e] .el-form-item__label:before{position:absolute;right:5px;top:2px;z-index:1\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/call-center/know/attack/D:/liu/vue-project/MyTest/src/pages/call-center/know/attack/AttackForm.vue"],names:[],mappings:";AAqPA,yEAGY,iBAAkB;CAH9B;AAAA,gFAKgB,kBACA,UACA,QACA,SAAU;CACb",file:"AttackForm.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.attack-form-dialog {\r\n    .require-right {\r\n        /deep/ .el-form-item__label {\r\n            position: relative;\r\n            &:before {\r\n                position: absolute;\r\n                right: 5px;\r\n                top: 2px;\r\n                z-index: 1;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.el-form-item {\r\n    // margin-bottom: 10px;\r\n}\r\n"],sourceRoot:""}])},P2HM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/Uby"),i=n("IaGi"),r=n("ufHF"),s=n("PdD4"),o=n("QeCa"),l=n("rVsN"),c=n.n(l),d={components:{CarSelect:o.a},props:{dialogType:{type:String,default:""},rowData:{type:Object,default:{}}},data:function(){return{title:"新增攻防话术",isView:!1,stateOptions:[{label:"显示",value:1},{label:"隐藏",value:0}],mainCarConfig:{brand:!0,brandId:null,series:!0,seriesId:null,model:!1},compareCarConfig:{brand:!0,brandId:null,series:!0,seriesId:null,model:!1},attackForm:{carSeriesId:null,competitionCarSeriesId:null,brandId:null,competitionBrandId:null,displayStatus:null,displayStatusTitle:"",carSeriesName:"",competitionCarSeriesName:"",content:""},rules:{displayStatus:[{required:!0,message:"请选择状态",trigger:"change"}],carSeriesId:[{required:!0,message:"请选择主体车型",trigger:"change"}],competitionCarSeriesId:[{required:!0,message:"请选择对比车型",trigger:"change"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},dialogVisible:!0,brandOptions:[],compareBrandOptions:[]}},created:function(){this.initForm()},methods:{initForm:function(){var t=this;switch(this.dialogType){case"add":this.title="新增攻防话术",this.initBrandOptins(),this.initCompareBrandOptins();break;case"edit":this.title="编辑攻防话术",c.a.all([this.initBrandOptins(),this.initCompareBrandOptins()]).then(function(){t.initData()});break;case"view":this.title="攻防话术详情",this.initData(),this.isView=!0}},initBrandOptins:function(){var t=this;this.$fetch.common.carBrand({},!1).then(function(e){t.$handleResponse(e,function(e){t.brandOptions=e},!1)})},initCompareBrandOptins:function(t){var e=this;this.$fetch.common.carBrandAll({kwd:t},!1).then(function(t){e.$handleResponse(t,function(t){e.compareBrandOptions=t},!1)})},initData:function(){if(this.rowData){var t=this.rowData,e=t.id,n=t.displayStatus,a=t.carSeriesId,i=t.competitionCarSeriesId,r=t.content,s=t.displayStatusTitle,o=t.carSeriesName,l=t.competitionCarSeriesName,c=t.brandId,d=t.competitionBrandId;this.attackForm={id:e,displayStatus:n,displayStatusTitle:s,carSeriesName:o,competitionCarSeriesName:l,brandId:c,competitionBrandId:d,carSeriesId:a,competitionCarSeriesId:i,content:r},this.mainCarConfig.brandId=parseInt(c),this.compareCarConfig.brandId=parseInt(d),this.mainCarConfig.seriesId=parseInt(a),this.compareCarConfig.seriesId=parseInt(i)}},handleSave:function(){var t=this;this.$refs.attackForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;var n=t.attackForm,a="",i={displayStatus:n.displayStatus,carSeriesId:n.carSeriesId,competitionCarSeriesId:n.competitionCarSeriesId,content:n.content};switch(t.dialogType){case"add":a="competitionCreate";break;default:i.id=t.attackForm.id,a="competitionUpdate"}t.$fetch.callCenter[a](i).then(function(e){t.$handleResponse(e,function(e){t.$message.success(("add"==t.dialogType?"新增":"修改")+"成功"),t.$emit("success")},!0)}).catch(function(){t.$store.commit("closeLoading")})})},handleEdit:function(){this.isView=!this.isView},getMainCarData:function(t){var e=t.seriesId;this.attackForm.carSeriesId=e},getCompareCarData:function(t){var e=t.seriesId;this.attackForm.competitionCarSeriesId=e},handleCancel:function(){this.$emit("cancel")}}},u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"attack-form-dialog",attrs:{title:t.title,visible:t.dialogVisible,width:"480px","close-on-click-modal":!1,"before-close":t.handleCancel},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"attackForm",attrs:{"label-width":"90px",model:t.attackForm,rules:t.rules}},[n("el-form-item",{staticClass:"require-right",attrs:{label:"状态",prop:t.isView?"":"displayStatus"}},[t.isView?t._e():n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"状态",size:"small"},model:{value:t.attackForm.displayStatus,callback:function(e){t.$set(t.attackForm,"displayStatus",e)},expression:"attackForm.displayStatus"}},t._l(t.stateOptions,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),t.isView?n("div",[t._v(t._s(t.attackForm.displayStatusTitle))]):t._e()],1),t._v(" "),n("el-form-item",{staticClass:"require-right",attrs:{label:"主体车型",prop:t.isView?"":"carSeriesId"}},[t.isView?t._e():n("car-select",{attrs:{showCar:t.mainCarConfig,brandOptions:t.brandOptions},on:{carSelect:t.getMainCarData}}),t._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{size:"small"},model:{value:t.attackForm.carSeriesId,callback:function(e){t.$set(t.attackForm,"carSeriesId",e)},expression:"attackForm.carSeriesId"}}),t._v(" "),t.isView?n("div",[t._v(t._s(t.attackForm.carSeriesName))]):t._e()],1),t._v(" "),n("el-form-item",{staticClass:"require-right",attrs:{label:"对比车型",prop:t.isView?"":"competitionCarSeriesId"}},[t.isView?t._e():n("car-select",{attrs:{showCar:t.compareCarConfig,brandOptions:t.compareBrandOptions,remote:"","remote-method":t.initCompareBrandOptins},on:{carSelect:t.getCompareCarData}}),t._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{size:"small"},model:{value:t.attackForm.competitionCarSeriesId,callback:function(e){t.$set(t.attackForm,"competitionCarSeriesId",e)},expression:"attackForm.competitionCarSeriesId"}}),t._v(" "),t.isView?n("div",[t._v(t._s(t.attackForm.competitionCarSeriesName))]):t._e()],1),t._v(" "),n("el-form-item",{staticClass:"require-right",attrs:{label:"内容",prop:t.isView?"":"content"}},[t.isView?t._e():n("el-input",{attrs:{type:"textarea",maxlength:"500",autosize:{minRows:5},"show-word-limit":""},model:{value:t.attackForm.content,callback:function(e){t.$set(t.attackForm,"content",e)},expression:"attackForm.content"}}),t._v(" "),t.isView?n("div",[t._v(t._s(t.attackForm.content))]):t._e()],1)],1),t._v(" "),n("div",{staticClass:"p-b-20",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"blue_font_white_bg w-90",attrs:{size:"small",round:""},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),t.isView?t._e():n("el-button",{staticClass:"w-90",attrs:{size:"small",type:"primary",round:""},on:{click:t.handleSave}},[t._v("保存")]),t._v(" "),t.isView?n("el-button",{staticClass:"w-90",attrs:{size:"small",type:"primary",round:""},on:{click:t.handleEdit}},[t._v("编辑")]):t._e()],1)],1)};u._withStripped=!0;var p={render:u,staticRenderFns:[]},h=p;var m=!1;var f=n("C7Lr")(d,h,!1,function(t){m||n("YhIP")},"data-v-31516f3e",null);f.options.__file="src/pages/call-center/know/attack/AttackForm.vue";var g=f.exports,b={components:{SearchBar:a.a,SearchCol:i.a,DataTable:r.a,CarSelect:o.a,AttackForm:g},mixins:[s.a],data:function(){return{dialogType:"add",showDialog:!1,brandOptions:[],rowData:{}}},created:function(){this.initData(),this.initBrandOptins(),this.queryCompareData(),this.queryData()},methods:{initData:function(){this.initSearch(),this.initTable()},initSearch:function(){this.search={list:[{type:"input",label:"话术ID",currentVal:""},{type:"selectCar",label:"主体车型",brand:!0,series:!0,model:!1,brandId:null,seriesId:null},{prop:"compareCar",type:"cascader",label:"对比车型",currentVal:"",oneVal:"",oneOptions:[],oneOptionLabel:"title",oneOptionValue:"id",secondVal:"",isAll:!0,isAllTitle:"全部",secondOptions:[],secondOptionLabel:"title",secondOptionValue:"id"},{type:"select",label:"状态",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"datePicker",dateType:"daterange",label:"创建时间",currentVal:""},{type:"datePicker",dateType:"daterange",label:"更新时间",currentVal:""}],kwd:0,mainCar:1,compareCar:2,state:3,createTime:4,updateTime:5}},initTable:function(){this.dataTable={tr:[{id:"1",label:"话术ID",prop:"longId",tooltip:!0},{id:"2",label:"主体车型",prop:"carSeriesName",tooltip:!0,minWidth:"180"},{id:"3",label:"对比车型",prop:"competitionCarSeriesName",tooltip:!0,minWidth:"180"},{id:"4",label:"状态",prop:"displayStatusTitle",tooltip:!0,minWidth:"80"},{id:"5",label:"创建时间",prop:"createDate",tooltip:!0,minWidth:"110"},{id:"6",label:"更新时间",prop:"updateDate",tooltip:!0,minWidth:"110"},{id:"7",label:"操作选项",prop:"caozuo",show:"template",width:"300"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},border:!0,hasSelect:!0,hasExpand:!1,hasFirstPagination:!0,showScrollBar:!0,search:{value:"",show:!1,width:"300",placeholder:"请输入任务名称",displayCol:["name","tel"],parma:{id:""}}}},initBrandOptins:function(){var t=this;this.$fetch.common.carBrand({},!1).then(function(e){t.$handleResponse(e,function(e){t.brandOptions=e},!1)})},getParams:function(){var t=this.dataTable.page,e=t.currentPage,n=t.pageSize,a=this.search,i=a.kwd,r=a.mainCar,s=a.compareCar,o=a.state,l=a.createTime,c=a.updateTime,d=a.list;return{kwd:d[i].currentVal,carSeries:d[r].currentVal,competitionCarSeries:d[s].secondVal,displayStatus:d[o].currentVal,createDateStart:d[l].currentVal&&d[l].currentVal[0],createDateEnd:d[l].currentVal&&d[l].currentVal[1],updateDateStart:d[c].currentVal&&d[c].currentVal[0],updateDateEnd:d[c].currentVal&&d[c].currentVal[1],pageSize:n,page:e}},queryData:function(){var t=this,e=this,n=this.getParams();this.$fetch.callCenter.competitionList(n).then(function(n){t.$handleResponse(n,function(n){var a=n.list,i=n.page,r=n.options;e.dataTable.data=a||[],e.dataTable.page=i||e.dataTable.page,t.search.list[t.search.state].selectOptions=r.displayStatus?r.displayStatus:[]},!0)}).catch(function(){t.$store.commit("closeLoading")})},clear:function(){this.clearSearch(),this.dataTable.page.currentPage=1,this.$refs.DataTableRef.initCurrentPage(),this.queryData(),this.queryCompareData()},batchDelete:function(){var t=this;this.$hasArrContent(this.selectData)?this.$confirm("您确定要删除选中的话术吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){var e=[];t.selectData.forEach(function(t){e.push(t.id)}),t.deleteCompetition(e)}):this.$message.warning("您还没选择话术")},handleState:function(t){var e=this;this.$confirm("您确定要"+(1==t.displayStatus?"隐藏":"显示")+"此话术吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.$fetch.callCenter.competitionToggle({id:t.id}).then(function(n){e.$handleResponse(n,function(n){e.$message.success((1==t.displayStatus?"隐藏":"显示")+"成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})})},handleDelete:function(t){var e=this;this.$confirm("删除后不可恢复，是否确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.deleteCompetition([t.id])})},deleteCompetition:function(t){var e=this;this.$fetch.callCenter.competitionDelete({id:t}).then(function(t){e.$handleResponse(t,function(t){e.$message.success("删除成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})},handleFn:function(t,e){this.rowData=e,this.dialogType=t,this.showDialog=!0},handleCancelDialog:function(){this.showDialog=!1},handleSuccessDialog:function(){this.queryData(),this.showDialog=!1},getMainCarData:function(t){var e=t.seriesId,n=this.search,a=n.mainCar;n.list[a].currentVal=e},remoteMethod:function(t){console.log("haha"),this.queryCompareData(t)},getCompareCarData:function(t,e){var n=this;this.search.list[this.search.compareCar].secondVal="",this.$fetch.common.carSeries({brandId:t},!1).then(function(t){n.$handleResponse(t,function(t){n.search.list[n.search.compareCar].secondOptions=n.$hasArrContent(t)?t:[]},!1)})},queryCompareData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$fetch.common.carBrandAll({kwd:e},!1).then(function(e){t.$handleResponse(e,function(e){t.search.list[t.search.compareCar].oneOptions=t.$hasArrContent(e)?e:[]},!1)})}}},C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attack-skill-page m-20 common-box"},[n("search-bar",{staticClass:"m-t-10 p-20",attrs:{size:"medium"},on:{clear:t.clear,find:t.find}},[n("div",{staticClass:"search-flex"},[n("search-col",{attrs:{info:t.search.list[t.search.kwd],placeholder:"请输入"}}),t._v(" "),n("search-col",{attrs:{info:t.search.list[t.search.mainCar],colWidth:7,rightCol:23,brandOptions:t.brandOptions},on:{carSelect:t.getMainCarData}}),t._v(" "),n("search-col",{attrs:{info:t.search.list[t.search.compareCar],colWidth:7,rightCol:23,onePlaceholder:"请选择",filterable:"",secondPlaceholder:"请选择",size:"small",oneRemote:!0,"remote-method":t.remoteMethod},on:{fristChange:t.getCompareCarData}}),t._v(" "),n("search-col",{attrs:{info:t.search.list[t.search.state],colWidth:4}}),t._v(" "),n("search-col",{attrs:{info:t.search.list[t.search.createTime],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}}),t._v(" "),n("search-col",{attrs:{info:t.search.list[t.search.updateTime],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}})],1)]),t._v(" "),n("div",{staticClass:"p-l-r-20 p-b-20"},[n("data-table",{ref:"DataTableRef",staticClass:"table-cyan",attrs:{table:t.dataTable},on:{searchTable:t.searchTable,onHandleSelectionChange:t.handleSelectionChange},scopedSlots:t._u([{key:"caozuo",fn:function(e){return[n("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(n){return t.handleFn("view",e.obj.row)}}},[t._v("查看")]),t._v(" "),n("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(n){return t.handleState(e.obj.row)}}},[t._v(t._s(1==e.obj.row.displayStatus?"隐藏":"显示"))]),t._v(" "),n("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(n){return t.handleFn("edit",e.obj.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{staticClass:"red_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(n){return t.handleDelete(e.obj.row)}}},[t._v("删除")])]}}])},[n("div",{attrs:{slot:"buttons"},slot:"buttons"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",round:"",size:"small"},on:{click:function(e){return t.handleFn("add",{})}}},[t._v("新建话术")]),t._v(" "),n("el-button",{staticClass:"w-90",attrs:{plain:"",size:"small",round:""},on:{click:t.batchDelete}},[t._v("删除")])],1)])],1),t._v(" "),t.showDialog?n("attack-form",{attrs:{dialogType:t.dialogType,rowData:t.rowData},on:{cancel:t.handleCancelDialog,success:t.handleSuccessDialog}}):t._e()],1)};C._withStripped=!0;var v={render:C,staticRenderFns:[]},S=v;var _=!1;var w=n("C7Lr")(b,S,!1,function(t){_||n("obFY")},"data-v-b4b79d4c",null);w.options.__file="src/pages/call-center/know/attack/Attack.vue";e.default=w.exports},YhIP:function(t,e,n){var a=n("OY9L");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("FIqI")("5169a34c",a,!1,{})},obFY:function(t,e,n){var a=n("rWlB");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("FIqI")("fcb80556",a,!1,{})},rWlB:function(t,e,n){(t.exports=n("UTlt")(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Attack.vue",sourceRoot:""}])}});
//# sourceMappingURL=27.3ca059d831ad0355aa92.js.map