webpackJsonp([7],{"+erF":function(t,e,i){"use strict";var s=i("BO1k"),a=i.n(s),o=i("/Pc9"),n={props:["type","clueInfo"],data:function(){return{dialogVisible:!0,areaListOptions:"",brandOptions:[],seriesOptions:[],modelOptions:[],oneSourceOptions:[],secondSourceOptions:[],genderOptions:[{value:1,label:"男"},{value:2,label:"女"}],filters:{clueName:"",fromTopId:"",fromSecondId:"",tel:"",gender:"",id:this.$route.query.id}}},created:function(){this.getCommonAreaList(),this.getCommonFromList()},methods:{sourceChange:function(){this.filters.fromSecondId="";var t=!0,e=!1,i=void 0;try{for(var s,o=a()(this.oneSourceOptions);!(t=(s=o.next()).done);t=!0){var n=s.value;n.id==this.filters.fromTopId&&(this.secondSourceOptions=n.children||[])}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}},getCommonFromList:function(){var t=this;this.$fetch.common.commonFromList({}).then(function(e){t.$handleResponse(e,function(e){t.oneSourceOptions=e},!0)}).catch(function(e){t.$store.commit("closeLoading")})},handleClose:function(){this.dialogVisible=!1,this.$emit("transferClueCloseFn")},save:function(){var t=this,e=this.filters;e.areaId?e.modelId?e.fromTopId?e.transferReason?("customerFollow"==this.type&&(e.type=1),"cluesDeal"==this.type&&(e.type=2),o.clueTransfer(e).then(function(e){t.$handleResponse(e,function(e){console.log(e),t.$emit("transferClueCloseFn","next")},!0)}).catch(function(e){t.$store.commit("closeLoading")})):this.$message.error("请填写移交原因"):this.$message.error("请选择客户来源"):this.$message.error("请选择意向车型"):this.$message.error("请选择移交门店")},getCommonAreaList:function(){var t=this;this.$fetch.setting.queryAreasList({pagination:0}).then(function(e){t.$handleResponse(e,function(e){t.areaListOptions=e.list},!0)}).catch(function(e){t.$store.commit("closeLoading")})},areaIdChange:function(){this.filters.brandId="",this.filters.carSeriesId="",this.filters.modelId="",this.brandOptions=[],this.seriesOptions=[],this.modelOptions=[],this.getBrandList()},getBrandList:function(){var t=this;console.log(this.filters.areaId),this.$fetch.common.carBrand({areaId:this.filters.areaId},!1).then(function(e){t.$handleResponse(e,function(e){t.brandOptions=t.$hasArrContent(e)?e:[]},!1)})},changeBrand:function(t){var e=this;this.filters.carSeriesId="",this.filters.modelId="",this.seriesOptions=[],this.modelOptions=[],this.$fetch.common.carSeries({brandId:t},!1).then(function(t){e.$handleResponse(t,function(t){e.seriesOptions=e.$hasArrContent(t)?t:[]},!1)})},changeSeries:function(t){var e=this;this.filters.modelId="",this.modelOptions=[],this.$fetch.common.carModel({seriesId:t},!1).then(function(t){e.modelOptions=e.$hasArrContent(t.data.data)?t.data.data:[]})},changeModel:function(t){this.$forceUpdate()}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{staticClass:"transfer-clue-dialog",attrs:{visible:t.dialogVisible,width:"480px",title:"线索转移","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-center"},[i("el-row",{attrs:{gutter:22}},[i("el-col",{staticClass:"m-b-15",attrs:{span:24}},[i("el-row",{staticClass:"rowmbottom10"},[i("el-col",{attrs:{span:5}},[i("div",{staticClass:"grid-content-left"},[t._v("\n                移交门店\n                "),i("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"grid-content"},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",size:"medium"},on:{change:t.areaIdChange},model:{value:t.filters.areaId,callback:function(e){t.$set(t.filters,"areaId",e)},expression:"filters.areaId"}},t._l(t.areaListOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.short_name,value:t.id}})}),1)],1)])],1)],1),t._v(" "),t.filters.areaId?i("el-col",{staticClass:"m-b-15",attrs:{span:24}},[i("el-row",{staticClass:"rowmbottom10"},[i("el-col",{attrs:{span:5}},[i("div",{staticClass:"grid-content-left"},[t._v("\n                意向车型\n                "),i("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"grid-content"},[i("el-col",{attrs:{span:8}},[i("el-select",{class:""==t.filters.brandId?"c-placeholder":"",attrs:{placeholder:"请选择",filterable:"",size:"medium"},on:{change:t.changeBrand},model:{value:t.filters.brandId,callback:function(e){t.$set(t.filters,"brandId",e)},expression:"filters.brandId"}},t._l(t.brandOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-select",{class:""==t.filters.carSeriesId?"c-placeholder":"",attrs:{placeholder:"请选择",filterable:"",size:"medium"},on:{change:t.changeSeries},model:{value:t.filters.carSeriesId,callback:function(e){t.$set(t.filters,"carSeriesId",e)},expression:"filters.carSeriesId"}},t._l(t.seriesOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-select",{class:""==t.filters.modelId?"c-placeholder":"",attrs:{placeholder:"请选择",filterable:"",size:"medium"},on:{change:t.changeModel},model:{value:t.filters.modelId,callback:function(e){t.$set(t.filters,"modelId",e)},expression:"filters.modelId"}},t._l(t.modelOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)],1)])],1)],1):t._e(),t._v(" "),i("el-col",{staticClass:"m-b-15",attrs:{span:24}},[i("el-row",{staticClass:"rowmbottom10"},[i("el-col",{attrs:{span:5}},[i("div",{staticClass:"grid-content-left"},[t._v("\n                客户来源\n                "),i("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"grid-content flex"},[i("el-select",{attrs:{placeholder:"一级来源",filterable:"",size:"medium"},on:{change:t.sourceChange},model:{value:t.filters.fromTopId,callback:function(e){t.$set(t.filters,"fromTopId",e)},expression:"filters.fromTopId"}},t._l(t.oneSourceOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),i("el-select",{attrs:{placeholder:"二级来源",filterable:"",size:"medium"},model:{value:t.filters.fromSecondId,callback:function(e){t.$set(t.filters,"fromSecondId",e)},expression:"filters.fromSecondId"}},t._l(t.secondSourceOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)])],1)],1),t._v(" "),i("el-col",{staticClass:"m-b-15",attrs:{span:24}},[i("el-row",{staticClass:"rowmbottom10"},[i("el-col",{attrs:{span:5}},[i("div",{staticClass:"grid-content-left"},[t._v("\n                移交原因\n                "),i("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"grid-content"},[i("el-input",{attrs:{placeholder:"请输入",type:"textarea",maxlength:"120",autosize:{minRows:4},"show-word-limit":""},model:{value:t.filters.transferReason,callback:function(e){t.$set(t.filters,"transferReason",e)},expression:"filters.transferReason"}})],1)])],1)],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90 plain-btn-style",attrs:{type:"",size:"medium",round:""},on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{type:"primary",size:"medium",round:""},on:{click:t.save}},[t._v("移交")])],1)])],1)},staticRenderFns:[]};var c=i("VU/8")(n,l,!1,function(t){i("sWWH")},"data-v-2eb461e0",null);e.a=c.exports},"0ITc":function(t,e,i){"use strict";var s=i("/Pc9"),a=i("PJh5"),o=i.n(a),n={props:["type","followFormData","followArchiveData","intentionInfo"],data:function(){return{followTypeOptions:[{id:1,title:"电话跟进"},{id:2,title:"微信跟进"}],followResultOptions:[{id:1,title:"继续跟进"},{id:2,title:"下发邀约"}],options:[{id:"1",title:"是"},{id:"0",title:"否"}],levelOptions:["H","A","B","C"],defeatTypeOptions:[],defeatReasonOptions:[],followFilters:{level:"H",followType:1,followResult:1,defeatReasonId:""},pickerOptions:{},nextFollowDate:"",nextFollowDate2:"",inviteInfo:[{areaId:"",date:""}],remarkText:"客户描述",competeModels:[],areaIdHasSelect:[],minTime:o()(new Date).subtract(1,"day")}},created:function(){if("customerFollow"==this.type&&(this.remarkText="跟进描述",this.levelOptions=["H","A","B","C","O","F"]),this.followArchiveData&&this.followArchiveData.followFormData){var t=this.followArchiveData.followFormData;this.followTypeOptions=t.followType,this.followResultOptions=t.followResult,this.levelOptions=t.level,this.nextFollowDate=t.defaultNextFollowDate}if(this.followArchiveData&&this.followArchiveData.archiveInfo){this.competeModels=this.intentionInfo;var e=this.followArchiveData.archiveInfo;this.followFilters={level:e.level||"H",followType:e.followType||1,followResult:e.followResult||1,defeatReasonId:e.defeatReasonId||""}}this.getNextFollowDate(),"cluesDeal"==this.type&&this.intentionInfo&&(this.competeModels=this.intentionInfo),this.handleAreaIdHasSelect(),this.getInviteMaxTime()},methods:{addInvite:function(){this.inviteInfo.push({areaId:"",date:""})},clearCar:function(t){this.inviteInfo.splice(t,1),this.handleAreaIdHasSelect()},handleAreaIdHasSelect:function(){var t=this;this.areaIdHasSelect=[],this.inviteInfo.forEach(function(e){t.areaIdHasSelect.push(e.areaId)})},getNextFollowDate:function(){var t=this,e=this;1==this.followFilters.followResult&&"O"!=this.followFilters.level&&"F"!=this.followFilters.level&&s.nextFollowDate({level:this.followFilters.level}).then(function(i){t.$store.commit("closeLoading"),t.$handleResponse(i,function(i){t.pickerOptions={disabledDate:function(t){return t<new Date(e.minTime).getTime()||t>new Date(i.date).getTime()}},t.followArchiveData&&t.followArchiveData.followFormData&&t.followArchiveData.followFormData.defaultNextFollowDate?t.nextFollowDate=t.followArchiveData.followFormData.defaultNextFollowDate:t.nextFollowDate=i.date},!0)}).catch(function(e){t.$store.commit("closeLoading")}),"F"==this.followFilters.level&&0==this.defeatTypeOptions.length&&(console.log("获取战败类型"),this.defeatReasonTypeList())},getInviteMaxTime:function(){var t=this,e=this;this.$fetch.callCenter.optionalFunction({name:"inviteMaxTime"}).then(function(i){t.$store.commit("closeLoading"),t.$handleResponse(i,function(i){t.pickerOptions1={disabledDate:function(t){return!!i.inviteMaxTime&&(t<new Date(e.minTime).getTime()||t>new Date(o()(new Date).add(i.inviteMaxTime,"day")).getTime())}}},!0)}).catch(function(e){t.$store.commit("closeLoading")})},defeatReasonTypeList:function(){var t=this;this.$fetch.common.defeatReasonTypeList().then(function(e){t.$handleResponse(e,function(e){t.defeatTypeOptions=e},!0)}).catch(function(e){t.$store.commit("closeLoading")})},defeatReasonList:function(){var t=this;this.defeatReasonOptions=[],this.followFilters.defeatReasonId="";var e={reasonType:this.followFilters.defeatTypeId};this.$fetch.common.defeatReasonList(e).then(function(e){t.$handleResponse(e,function(e){t.defeatReasonOptions=e},!0)}).catch(function(e){t.$store.commit("closeLoading")})}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"add-follow-page"},[s("el-row",{staticClass:"customer-form",attrs:{gutter:22}},[s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n            客户级别\n            "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-radio-group",{staticClass:"radio-button-level",class:{"radio-button-level-follow":"customerFollow"==t.type},staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},on:{change:function(e){return t.getNextFollowDate()}},model:{value:t.followFilters.level,callback:function(e){t.$set(t.followFilters,"level",e)},expression:"followFilters.level"}},t._l(t.levelOptions,function(t){return s("el-radio-button",{key:t,attrs:{label:t}})}),1)],1)])],1)],1),t._v(" "),"F"==t.followFilters.level?s("div",[s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              战败类型\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(e){return t.defeatReasonList()}},model:{value:t.followFilters.defeatTypeId,callback:function(e){t.$set(t.followFilters,"defeatTypeId",e)},expression:"followFilters.defeatTypeId"}},t._l(t.defeatTypeOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              战败原因\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",size:"mini"},model:{value:t.followFilters.defeatReasonId,callback:function(e){t.$set(t.followFilters,"defeatReasonId",e)},expression:"followFilters.defeatReasonId"}},t._l(t.defeatReasonOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)])],1)],1)],1):t._e(),t._v(" "),"O"!=t.followFilters.level&&"F"!=t.followFilters.level?s("div",[s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              跟进类型\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},model:{value:t.followFilters.followType,callback:function(e){t.$set(t.followFilters,"followType",e)},expression:"followFilters.followType"}},t._l(t.followTypeOptions,function(e){return s("el-radio-button",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.title))])}),1)],1)])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              跟进结果\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},on:{change:function(e){return t.getNextFollowDate()}},model:{value:t.followFilters.followResult,callback:function(e){t.$set(t.followFilters,"followResult",e)},expression:"followFilters.followResult"}},t._l(t.followResultOptions,function(e){return s("el-radio-button",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.title))])}),1)],1)])],1)],1),t._v(" "),1==t.followFilters.followResult?s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              下次跟进\n              "),"O"!=t.followFilters.level&&"F"!=t.followFilters.level?s("span",{staticClass:"red"},[t._v("*")]):s("span",{staticClass:"mini-width5"})])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-date-picker",{staticClass:"my-date-picker",staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,size:"mini"},model:{value:t.nextFollowDate,callback:function(e){t.nextFollowDate=e},expression:"nextFollowDate"}})],1)])],1)],1):t._e(),t._v(" "),t._l(t.inviteInfo,function(e,a){return 2==t.followFilters.followResult?s("el-col",{key:a,staticClass:"m-b-10 store-and-car",class:{"store-and-car-oth":0!=a},attrs:{span:24}},[0!=a?s("div",{staticClass:"close-icon",on:{click:function(e){return t.clearCar(a)}}},[s("img",{attrs:{src:i("FzXW")}})]):t._e(),t._v(" "),s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              邀约门店\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(e){return t.handleAreaIdHasSelect()}},model:{value:e.areaId,callback:function(i){t.$set(e,"areaId",i)},expression:"items.areaId"}},t._l(t.competeModels,function(e){return s("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId,disabled:t.areaIdHasSelect.indexOf(e.areaId)>-1}})}),1)],1)])],1),t._v(" "),s("el-row",{staticClass:"rowmbottom10",staticStyle:{"margin-top":"10px"}},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              到店时间\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-date-picker",{staticClass:"my-date-picker",staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择到店时间","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions1,size:"mini"},model:{value:e.date,callback:function(i){t.$set(e,"date",i)},expression:"items.date"}})],1)])],1)],1):t._e()}),t._v(" "),2==t.followFilters.followResult&&t.competeModels&&t.competeModels.length>1?s("el-col",{staticClass:"m-b-10 store-and-car-btn",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left",staticStyle:{width:"88.5px",height:"1px"}})]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("div",{},[s("el-button",{attrs:{gutter:24,size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.addInvite}},[t._v("新增邀约计划")])],1)])])],1)],1):t._e(),t._v(" "),2==t.followFilters.followResult?s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              下次跟进\n              "),s("span",{staticClass:"mini-width5"})])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-date-picker",{staticClass:"my-date-picker",staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",size:"mini"},model:{value:t.nextFollowDate2,callback:function(e){t.nextFollowDate2=e},expression:"nextFollowDate2"}})],1)])],1)],1):t._e()],2):t._e(),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n            "+t._s(t.remarkText)+"\n            "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",[s("el-input",{staticStyle:{float:"right"},attrs:{placeholder:"请输入",type:"textarea",maxlength:"120",autosize:{minRows:3}},model:{value:t.followFilters.remark,callback:function(e){t.$set(t.followFilters,"remark",e)},expression:"followFilters.remark"}})],1)])],1)],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(n,l,!1,function(t){i("JndV")},"data-v-7a280669",null);e.a=c.exports},"14mc":function(t,e){},"4bKk":function(t,e){},"5ZCh":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlCOThGMDI2Nzk0NTExRUFCMTBGQTc4MjI3OTkwMzZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlCOThGMDI3Nzk0NTExRUFCMTBGQTc4MjI3OTkwMzZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUI5OEYwMjQ3OTQ1MTFFQUIxMEZBNzgyMjc5OTAzNkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUI5OEYwMjU3OTQ1MTFFQUIxMEZBNzgyMjc5OTAzNkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7sHfQaAAAAiElEQVR42mK0rfvPQAlgAuIjQPyfSIzVAGtKXMCCxGYk1wukAB90i0gxoA6INwPxFGRDSDHgBBB/B+IsZENYsCgkJl6zoHQOEwUR8ANkGTYDGHFgXyD+BVXTB8TFpIaBHhCzIWvGFQa4QBsQnwLiPZSkgz34UiIxoc+ILSUepTQv2FBiAECAAQCKRh3DD5ITygAAAABJRU5ErkJggg=="},"6+ZX":function(t,e){},BbOZ:function(t,e){},FzXW:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI2MDI3RTg3Nzk0NTExRUFCMTZFOEY5M0Y4RTc0RUJBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI2MDI3RTg4Nzk0NTExRUFCMTZFOEY5M0Y4RTc0RUJBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjYwMjdFODU3OTQ1MTFFQUIxNkU4RjkzRjhFNzRFQkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjYwMjdFODY3OTQ1MTFFQUIxNkU4RjkzRjhFNzRFQkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5+asT5AAAA1ElEQVR42rySwQqDMAyG7RDsrZftUfSsT66oJ8XHqIe5w3pQ25P+o6xENmUdY4FCk/Qj+ZOy63AP/C3EuZyFFzPc1Cn4yn6BTdNU17UxhgbhVlWF1C7WdZ2UMs9zR+ICt+97pHaxOI6FEEopS1oGLoJJktCXDAugk9RaF0Vhn8K1lyzLoig6miTnPE1TW/MtsztJxpj3AtCk00N1HmFUGHpz3b6SG6xtW6qH6myaZlMOk1yeNo5jWZaouRCb5xlBpFzk8fsp9qEB+e9XDu3WfbFVgAEAGczv04AP8r4AAAAASUVORK5CYII="},G6dl:function(t,e,i){"use strict";var s=i("Gu7T"),a=i.n(s),o=i("woOf"),n=i.n(o),l=i("/Pc9"),c=i("kZ4T"),r={props:["data","length","type"],data:function(){return{addCarModel:[],flagIndex:0,intentionInfoOptions:[]}},created:function(){console.log(this.data),this.handleModelsData()},computed:{parentsData:function(){return this.data}},methods:{handleModelsData:function(){var t=this;this.addCarModel=[],this.intentionInfoOptions=[],this.data.forEach(function(e,i){t.addCarModel.push({id:e.id,brandId:e.brandId,carSeriesId:e.carSeriesId,modelId:e.modelId}),t.intentionInfoOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]}),console.log(t.addCarModel),t.getBrandList("",i,"noclear"),t.addCarModel[i].brandId&&t.changeBrand(1,i,"noclear"),t.addCarModel[i].carSeriesId&&t.changeSeries(1,i,"noclear")})},addStroeAndCar:function(){this.addCarModel.push({brandId:"",carSeriesId:"",modelId:""}),this.intentionInfoOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]}),console.log(this.addCarModel,this.addCarModel.length),this.getBrandList("",this.addCarModel.length-1),this.$emit("callbackFlagFn",this.intentionInfoOptions)},clearCar:function(t){this.addCarModel[t].id&&this.$emit("deleteFn",this.addCarModel[t].id),this.addCarModel.splice(t,1),this.intentionInfoOptions.splice(t,1),this.$emit("callbackFn",this.addCarModel)},getBrandList:function(t,e,i){var s=this;this.flagIndex=e||this.flagIndex;var a="",o={};2==this.type?(a="carBrandAll",o.kwd=t):(a="carBrand",o={}),this.$fetch.common[a](o,!1).then(function(t){s.$handleResponse(t,function(t){s.intentionInfoOptions[s.flagIndex].brandOptions=s.$hasArrContent(t)?t:[]},!1)})},changeBrand:function(t,e,i){var s=this;i||(this.addCarModel[e].carSeriesId="",this.addCarModel[e].modelId="",this.intentionInfoOptions[e].seriesOptions=[],this.intentionInfoOptions[e].modelOptions=[]),this.$fetch.common.carSeries({brandId:this.addCarModel[e].brandId},!1).then(function(t){s.$handleResponse(t,function(t){s.intentionInfoOptions[e].seriesOptions=s.$hasArrContent(t)?t:[]},!1)})},changeSeries:function(t,e,i){var s=this;i||(this.addCarModel[e].modelId="",this.intentionInfoOptions[e].modelOptions=[]),this.$fetch.common.carModel({seriesId:this.addCarModel[e].carSeriesId},!1).then(function(t){s.intentionInfoOptions[e].modelOptions=s.$hasArrContent(t.data.data)?t.data.data:[]})},changeModel:function(t,e){var i=this;2==this.addType&&(console.log(this.intentionInfoOptions[e].modelOptions,this.addCarModel[e].modelId,e),this.intentionInfoOptions[e].modelOptions.forEach(function(t){t.id==i.addCarModel[e].modelId&&(i.addCarModel[e].modelName=t.title)})),this.$forceUpdate(),console.log(this.addCarModel),this.$emit("callbackFn",this.addCarModel)}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"add-models-temp"},[t._l(t.addCarModel,function(e,a){return s("el-col",{key:"add-"+a,staticClass:"m-b-15",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{attrs:{span:5}},[s("div",{staticClass:"grid-content-left"},[t._v("\n          意向车型"+t._s(a+1+t.length)+"：\n        ")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("div",{staticClass:"grid-content"},[s("el-col",{attrs:{span:7}},[1==t.type?s("el-select",{class:""==e.brandId?"c-placeholder":"",attrs:{placeholder:"请选择",filterable:"",size:"small"},on:{change:function(e){return t.changeBrand(1,a)}},model:{value:e.brandId,callback:function(i){t.$set(e,"brandId",i)},expression:"items.brandId"}},t._l(t.intentionInfoOptions[a].brandOptions,function(t){return s("el-option",{key:a+"-brand-"+t.id,attrs:{label:t.title,value:t.id}})}),1):t._e(),t._v(" "),2==t.type?s("el-select",{class:""==e.brandId?"c-placeholder":"",attrs:{placeholder:"请选择",filterable:"",remote:"","remote-method":t.getBrandList,size:"small"},on:{change:function(e){return t.changeBrand(1,a)}},model:{value:e.brandId,callback:function(i){t.$set(e,"brandId",i)},expression:"items.brandId"}},t._l(t.intentionInfoOptions[a].brandOptions,function(t){return s("el-option",{key:a+"-brand-"+t.id,attrs:{label:t.title,value:t.id}})}),1):t._e()],1),t._v(" "),s("el-col",{attrs:{span:7}},[s("el-select",{class:""==e.carSeriesId?"c-placeholder":"",attrs:{placeholder:"请选择",filterable:"",size:"small"},on:{change:function(e){return t.changeSeries(1,a)}},model:{value:e.carSeriesId,callback:function(i){t.$set(e,"carSeriesId",i)},expression:"items.carSeriesId"}},t._l(t.intentionInfoOptions[a].seriesOptions,function(t){return s("el-option",{key:a+"-series-"+t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),s("el-col",{attrs:{span:7}},[s("el-select",{class:""==e.modelId?"c-placeholder":"",attrs:{placeholder:"请选择",filterable:"",size:"small"},on:{change:function(e){return t.changeModel(1,a)}},model:{value:e.modelId,callback:function(i){t.$set(e,"modelId",i)},expression:"items.modelId"}},t._l(t.intentionInfoOptions[a].modelOptions,function(t){return s("el-option",{key:a+"-model"+t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),s("div",{staticClass:"close-icon",on:{click:function(e){return t.clearCar(a)}}},[s("img",{attrs:{src:i("FzXW")}})])],1)])],1)],1)}),t._v(" "),s("el-col",{staticClass:"m-b-15 store-and-car-btn",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left",staticStyle:{width:"88.5px",height:"1px"}})]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("div",{},[s("el-button",{attrs:{gutter:24,size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.addStroeAndCar}},[t._v("添加")])],1)])])],1)],1)],2)},staticRenderFns:[]};var u=i("VU/8")(r,d,!1,function(t){i("de9B")},"data-v-1a7ac804",null).exports,h={components:{TabsScrm:c.a,addModelsTemp:u},props:["competeModels","archiveModels","followType","extendDataIdx"],data:function(){return{tabs:[{title:"车型对比",name:"0"},{title:"攻防话术",name:"1"},{title:"当前活动",name:"2"},{title:"常用话术",name:"3"}],currentTab:"0",checked:"",options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value:"",models1:{name:"传祺CS4 2020款 270T 自动尊享版",price:"9.09",params:{"厂商":"广汽乘用车","级别":"suv","级别2":"suv","级别3":"suv","级别4":"suv","级别5":"suv","级别6":"suv","级别7":"suv","级别8":"suv","级别9":"suv","级别0":"suv","级别01":"suv"},cheshen:{width:1900,height:1200}},models2:{name:"传祺CS4 2020款 270T 自动尊享版222",price:"9.092",params:{"厂商":"广汽乘用车2","级别":"suv2"},cheshen:{width:1900,height:1200}},input:"",siveActivity:[],normalActivity:[],groupActivity:[],modelData1:"",modelData2:"",model1:"",model2:"",competeModels1:"",competeModels2:"",dialogVisible:!1,addCarModel:[],filter:{},addType:1,seriesId:"",kbModelsData:[],kbModelsData2:[],archiveAndModels:[],intentionInfoOptions:[],brandOptions:[],seriesOptions:[],modelOptions:[],compareModels:[],recordPage:{totalCount:0,page:1,pageSize:20,totalPage:1},recordDom:null,time:"",addModels:[],intentionInfoOptionsFlag:[]}},created:function(){console.log("档案车型",this.archiveModels),this.$route.query.id?(this.getKBModels(null,1),this.getKBModels(null,2)):this.archiveAndModels=this.archiveModelsList,this.competeModels1=n()({},this.competeModels),this.competeModels2=n()({},this.competeModels),this.model1=this.archiveModels&&this.archiveModels[this.extendDataIdx]&&this.archiveModels[this.extendDataIdx].modelId||"",this.seriesId=this.archiveModels&&this.archiveModels[this.extendDataIdx]&&this.archiveModels[this.extendDataIdx].carSeriesId||"",this.model1&&this.getKBModelParams(1)},computed:{archiveModelsList:function(){var t=[];return this.archiveModels.forEach(function(e){e.modelId&&e.modelName&&(e.brandId=e.brandId||"",e.brandName=e.brandName||"",e.carSeriesId=e.carSeriesId||"",e.carSeriesName=e.carSeriesName||"",e.modelId=e.modelId?e.modelId:e.modelName,e.modelName=e.modelName,t.push(e)),console.log(t)}),t}},mounted:function(){this.recordDom=document.querySelector(".record-activity"),console.log(this.recordDom),this.recordDom.addEventListener("scroll",this.onRecordDomScroll,!0)},methods:{onRecordDomScroll:function(){var t=this.recordDom.scrollTop,e=this.recordDom.clientHeight,i=this.recordDom.scrollHeight;if(i>e&&t+e===i)if(0==this.currentTab);else{if(this.recordPage.page>=this.recordPage.totalPage)return;this.recordPage.page++,this.recordPage.pageSize=20,1==this.currentTab?this.getKBSpeechcraft(2):2==this.currentTab?this.getKBGroupActivity():4==this.currentTab&&this.getKBSpeechcraft(1)}},tabChange:function(t){switch(this.currentTab=t,this.input="",t){case"0":break;case"1":this.getKBSpeechcraft(2,"init");break;case"2":this.getKBGroupActivity("init");break;case"3":this.getKBSpeechcraft(1,"init")}},getKBModelParams:function(t){var e=this;l.getKBModelParams({modelId:1==t?this.model1:this.model2}).then(function(i){e.$store.commit("closeLoading"),e.$handleResponse(i,function(i){1==t?e.modelData1=i:e.modelData2=i},!0)}).catch(function(t){e.$store.commit("closeLoading")})},getKBSpeechcraft:function(t,e){var i=this;"init"==e&&(this.normalActivity=[],this.siveActivity=[],this.recordPage.page=1,this.recordPage.pageSize=20);var s=this.recordPage,o=s.page,n=s.pageSize;l.getKBSpeechcraft({type:t,kwd:this.input,seriesId:this.seriesId,page:o,pageSize:n}).then(function(e){i.$store.commit("closeLoading"),i.$handleResponse(e,function(e){var s=e.list,o=e.page;s.length>0&&(1==t?i.normalActivity=[].concat(a()(i.normalActivity),a()(s)):i.siveActivity=[].concat(a()(i.siveActivity),a()(s))),i.recordPage.totalCount=o.totalCount,i.recordPage.totalPage=o.totalPage},!0)}).catch(function(t){i.$store.commit("closeLoading")})},getKBGroupActivity:function(t){var e=this;"init"==t&&(this.groupActivity=[],this.recordPage.page=1,this.recordPage.pageSize=20);var i=this.recordPage,s=i.page,o=i.pageSize;l.getKBGroupActivity({kwd:this.input,page:s,pageSize:o}).then(function(t){e.$store.commit("closeLoading"),e.$handleResponse(t,function(t){var i=t.list,s=t.page;i.length>0&&(e.groupActivity=[].concat(a()(e.groupActivity),a()(i))),e.recordPage.totalCount=s.totalCount,e.recordPage.totalPage=s.totalPage},!0)}).catch(function(t){e.$store.commit("closeLoading")})},modelChange:function(t){1==t||2==t?this.getKBModelParams(t):3==t?(console.log(this.seriesId),this.getKBSpeechcraft(2,"init")):4==t&&(console.log(this.seriesId),this.getKBSpeechcraft(1,"init"))},clearModle:function(t){1==t?(this.model1="",this.modelData1=""):(this.model2="",this.modelData2="")},allMore:function(t){var e=this;this.addType=t,this.time=(new Date).getTime(),this.dialogVisible=!0,1==t?this.getKBModels("true"):2==t&&(this.addCarModel=[],this.intentionInfoOptions=[],this.compareModels&&this.compareModels.length>0?this.compareModels.forEach(function(i,s){e.addCarModel.push({modelName:i.modelName,brandId:i.brandId,carSeriesId:i.carSeriesId,modelId:i.modelId}),e.intentionInfoOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]}),console.log(e.addCarModel),e.getBrandList(s,"noclear",t),e.addCarModel[s].brandId&&e.changeBrand(1,s,"noclear"),e.addCarModel[s].carSeriesId&&e.changeSeries(1,s,"noclear")}):this.addStroeAndCar(t))},getKBModels:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]);l.getKBModel({dataType:"cluesDeal"==this.followType?2:1,dataId:this.$route.query.id,modelType:e}).then(function(i){t.$store.commit("closeLoading"),t.$handleResponse(i,function(i){1==e?(t.kbModelsData=i,t.archiveAndModels=t.archiveModelsList.concat(t.kbModelsData)):(t.kbModelsData2=i,t.model2=i[0]&&i[0].modelId,t.model2?t.getKBModelParams(2):t.modelData2="")},!0)}).catch(function(e){t.$store.commit("closeLoading")})},addStroeAndCar:function(t){this.addCarModel.push({brandId:"",carSeriesId:"",modelId:""}),this.intentionInfoOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]}),this.getBrandList(this.addCarModel.length-1,"",t)},clearCar:function(t){this.addCarModel.splice(t,1),this.intentionInfoOptions.splice(t,1)},handleClose:function(){this.dialogVisible=!1},deleteFn:function(t){var e=this;l.deleteKBModel({id:t}).then(function(t){e.$handleResponse(t,function(t){e.$message.success("删除成功"),e.getKBModels(null,e.addType)},!0)}).catch(function(t){e.$store.commit("closeLoading")})},callbackFn:function(t){console.log(t),this.addCarModel=t},callbackFlagFn:function(t){this.intentionInfoOptionsFlag=t},save:function(t){var e=this;if(this.intentionInfoOptionsFlag&&this.intentionInfoOptionsFlag.length>0){var i={dataType:"cluesDeal"==this.followType?2:1,dataId:this.$route.query.id,userId:this.$route.query.userId,modelType:t,models:this.addCarModel};l.setBKeditModel(i).then(function(i){e.$handleResponse(i,function(i){e.$message.success("保存成功"),e.handleClose(),e.getKBModels(null,t)},!0)}).catch(function(t){e.$store.commit("closeLoading")}),1==t||2==t&&(this.compareModels=this.addCarModel,console.log(this.compareModels))}else this.handleClose()},getBrandList:function(t,e,i){var s=this,a=2==i?"carBrandAll":"carBrand";this.$fetch.common[a]({},!1).then(function(e){s.$handleResponse(e,function(e){s.intentionInfoOptions[t].brandOptions=s.$hasArrContent(e)?e:[]},!1)})},changeBrand:function(t,e,i){var s=this;i||(this.addCarModel[e].carSeriesId="",this.addCarModel[e].modelId="",this.intentionInfoOptions[e].seriesOptions=[],this.intentionInfoOptions[e].modelOptions=[]),this.$fetch.common.carSeries({brandId:this.addCarModel[e].brandId},!1).then(function(t){s.$handleResponse(t,function(t){s.intentionInfoOptions[e].seriesOptions=s.$hasArrContent(t)?t:[]},!1)})},changeSeries:function(t,e,i){var s=this;i||(this.addCarModel[e].modelId="",this.intentionInfoOptions[e].modelOptions=[]),this.$fetch.common.carModel({seriesId:this.addCarModel[e].carSeriesId},!1).then(function(t){s.intentionInfoOptions[e].modelOptions=s.$hasArrContent(t.data.data)?t.data.data:[]})},changeModel:function(t,e){var i=this;2==this.addType&&(console.log(this.intentionInfoOptions[e].modelOptions,this.addCarModel[e].modelId,e),this.intentionInfoOptions[e].modelOptions.forEach(function(t){t.id==i.addCarModel[e].modelId&&(i.addCarModel[e].modelName=t.title)})),this.$forceUpdate()}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"knowledge-base"},[i("tabs-scrm",{attrs:{tabs:t.tabs},on:{change:t.tabChange}}),t._v(" "),i("div",{staticClass:"tabs-pane"},[0==t.currentTab?i("div",{staticClass:"models-contrast record-activity"},[i("div",{staticClass:"models-group models-group-top"},[i("div",{staticClass:"models-group-items models-group-item1"},[i("div",{},[t._v("配置情况")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",[t._v("- 无")]),t._v(" "),i("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("隐藏相同")])],1),t._v(" "),i("div",{staticClass:"models-group-items models-group-item2"},[i("div",{staticClass:"models-info"},[i("div",{staticClass:"cont-flex"},[i("div",[t.modelData1?i("div",{staticClass:"img-box"},[i("img",{attrs:{src:t.modelData1.img[160],alt:""}})]):t._e(),t._v(" "),i("div",[t._v(t._s(t.modelData1.modelName))])]),t._v(" "),i("el-select",{attrs:{"popper-class":"models-contrast-select",size:"mini",placeholder:"意向车型",filterable:""},on:{change:function(e){return t.modelChange(1)}},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},[t._l(t.archiveAndModels,function(e){return i("el-option",{key:e.modelId,attrs:{label:e.modelName,value:e.modelId,disabled:e.modelId==t.model2}})}),t._v(" "),t.$route.query.id?i("div",{staticClass:"option-load-more",on:{click:function(e){return t.allMore(1)}}},[t._v("添加更多")]):t._e(),t._v(" "),t.$route.query.id?i("div",{staticClass:"option-load-more",attrs:{slot:"empty"},on:{click:function(e){return t.allMore(1)}},slot:"empty"},[t._v("添加更多")]):t._e()],2)],1)]),t._v(" "),t._e()]),t._v(" "),i("div",{staticClass:"models-group-items models-group-item3"},[i("div",{staticClass:"models-info"},[i("div",{staticClass:"cont-flex"},[i("div",[t.modelData2?i("div",{staticClass:"img-box"},[i("img",{attrs:{src:t.modelData2.img[160],alt:""}})]):t._e(),t._v(" "),i("div",[t._v(t._s(t.modelData2.modelName))])]),t._v(" "),i("el-select",{attrs:{"popper-class":"models-contrast-select",size:"mini",placeholder:"对比车型"},on:{change:function(e){return t.modelChange(2)}},model:{value:t.model2,callback:function(e){t.model2=e},expression:"model2"}},[t._l(t.kbModelsData2,function(e){return i("el-option",{key:e.modelId,attrs:{label:e.modelName,value:e.modelId,disabled:e.modelId==t.model1}})}),t._v(" "),t.$route.query.id?i("div",{staticClass:"option-load-more",on:{click:function(e){return t.allMore(2)}}},[t._v("添加更多")]):t._e(),t._v(" "),t.$route.query.id?i("div",{staticClass:"option-load-more",attrs:{slot:"empty"},on:{click:function(e){return t.allMore(2)}},slot:"empty"},[t._v("添加更多")]):t._e()],2)],1)]),t._v(" "),t._e()])]),t._v(" "),t.model1?i("div",{staticClass:"models-group"},[i("div",{staticClass:"models-group-items",staticStyle:{"text-align":"right"}},[t._v("厂商指导价(元)")]),t._v(" "),i("div",{staticClass:"models-group-items"},[t._v(t._s(t.modelData1.factoryPrice)+"万")]),t._v(" "),i("div",{staticClass:"models-group-items"},[t._v(t._s(t.modelData2.factoryPrice)+"万")])]):t._e(),t._v(" "),t._l(t.modelData1.params,function(e,s){return i("div",{key:s},t._l(e,function(e,a,o){return i("div",{key:o},["车身颜色"!=a?i("div",{staticClass:"models-Gtitle"},[t._v(t._s(a))]):t._e(),t._v(" "),"车身颜色"!=a?i("div",t._l(e,function(e,o,n){return i("div",{key:n},[t.checked&&t.modelData2.params&&e==t.modelData2.params[s][a][o]?t._e():i("div",{staticClass:"models-group"},[i("div",{staticClass:"models-group-items models-group-items-first"},[t._v(t._s(o))]),t._v(" "),i("div",{staticClass:"models-group-items"},[t._v(t._s(e))]),t._v(" "),i("div",{staticClass:"models-group-items"},[t._v(t._s(t.modelData2.params&&t.modelData2.params[s][a][o]||""))])])])}),0):t._e()])}),0)})],2):t._e(),t._v(" "),1==t.currentTab?i("div",{staticClass:"store-activity record-activity"},[i("el-row",{staticClass:"store-activity-car"},[i("el-col",{staticClass:"width-75"},[i("div",{staticClass:"grid-content-left"},[t._v("\n            意向车型\n          ")])]),t._v(" "),i("el-col",{staticClass:"width-right-cont"},[i("div",{staticClass:"grid-content"},[i("el-select",{attrs:{"popper-class":"models-contrast-select",size:"mini",placeholder:"意向车型",clearable:""},on:{change:function(e){return t.modelChange(3)}},model:{value:t.seriesId,callback:function(e){t.seriesId=e},expression:"seriesId"}},[t._l(t.archiveAndModels,function(t){return i("el-option",{key:t.carSeriesId,attrs:{label:t.carSeriesName,value:t.carSeriesId}})}),t._v(" "),t.$route.query.id?i("div",{staticClass:"option-load-more",on:{click:function(e){return t.allMore(1)}}},[t._v("添加更多")]):t._e(),t._v(" "),t.$route.query.id?i("div",{staticClass:"option-load-more",attrs:{slot:"empty"},on:{click:function(e){return t.allMore(1)}},slot:"empty"},[t._v("添加更多")]):t._e()],2)],1)])],1),t._v(" "),t.seriesId?i("div",[i("div",{staticClass:"knowledge-base-search"},[i("el-input",{attrs:{placeholder:"搜索",clearable:"",size:"mini"},on:{clear:function(e){return t.getKBSpeechcraft(2,"init")}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(e){return t.getKBSpeechcraft(2,"init")}},slot:"suffix"})])],1),t._v(" "),i("div",{staticClass:"sales-content-list"},[t.siveActivity.length>0?i("div",{staticClass:"sc-content-item"},[i("el-collapse",{attrs:{accordion:""}},t._l(t.siveActivity,function(e,s){return i("el-collapse-item",{key:s},[i("template",{slot:"title"},[i("div",{staticClass:"sc-item-title"},[t._v(t._s(e.titleAll))])]),t._v(" "),i("div",{staticClass:"sc-item-detail"},[t._v("\n                  "+t._s(e.content)+"\n                ")])],2)}),1)],1):i("div",{staticClass:"no-data"},[t._v("暂无数据")])])]):t._e()],1):t._e(),t._v(" "),2==t.currentTab?i("div",{staticClass:"sales-activity record-activity"},[i("div",{staticClass:"knowledge-base-search"},[i("el-input",{attrs:{placeholder:"搜索",clearable:"",size:"mini"},on:{clear:function(e){return t.getKBGroupActivity("init")}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(e){return t.getKBGroupActivity("init")}},slot:"suffix"})])],1),t._v(" "),i("div",{staticClass:"sales-content-list"},[i("div",{staticClass:"sc-content-item"},[i("el-collapse",{attrs:{accordion:""}},t._l(t.groupActivity,function(e,s){return i("el-collapse-item",{key:s},[i("template",{slot:"title"},[i("div",{staticClass:"sc-item-title"},[i("div",{staticClass:"title-store"},[t._v(t._s(e.activityTypeTitle)),1==e.activityType?i("span",[t._v("-"+t._s(e.areaOverview))]):t._e()]),t._v(" "),i("div",[t._v(t._s(e.title))])])]),t._v(" "),i("div",{staticClass:"sc-item-detail"},[i("div",{staticClass:"font-16"},[t._v("适用门店："+t._s(e.areaOverview))]),t._v(" "),i("div",{staticClass:"font-16"},[t._v("活动有效期："+t._s(e.startDate)+" —— "+t._s(e.endDate))]),t._v(" "),i("div",[t._v("活动内容："+t._s(e.content))])])],2)}),1)],1)])]):t._e(),t._v(" "),3==t.currentTab?i("div",{staticClass:"sive-activity record-activity"},[i("div",{staticClass:"knowledge-base-search"},[i("el-input",{attrs:{placeholder:"搜索",clearable:"",size:"mini"},on:{clear:function(e){return t.getKBSpeechcraft(1,"init")}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(e){return t.getKBSpeechcraft(1,"init")}},slot:"suffix"})])],1),t._v(" "),i("div",{staticClass:"sive-content-list"},[i("div",{staticClass:"sc-content-item"},[i("el-collapse",{attrs:{accordion:""}},t._l(t.normalActivity,function(e,s){return i("el-collapse-item",{key:s},[i("template",{slot:"title"},[i("div",{staticClass:"sc-item-title"},[t._v(t._s(e.titleAll))])]),t._v(" "),i("div",{staticClass:"sc-item-detail"},[t._v("\n              "+t._s(e.content)+"\n            ")])],2)}),1)],1)])]):t._e()]),t._v(" "),i("el-dialog",{staticClass:"add-car-dialog",attrs:{visible:t.dialogVisible,width:"480px",title:1==t.addType?"知识库意向车型管理":"知识库对比车型管理","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-center"},[1==t.addType?i("el-row",{attrs:{gutter:22}},[t._l(t.archiveModelsList,function(e,s){return i("el-col",{key:"a"+s,staticClass:"m-b-15",attrs:{span:24}},[i("el-row",{staticClass:"rowmbottom10"},[i("el-col",{attrs:{span:5}},[i("div",{staticClass:"grid-content-left"},[t._v("\n                意向车型"+t._s(s+1)+"：\n              ")])]),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"grid-content grid-content-right"},[t._v("\n                "+t._s(e.modelName||e.modelId)+"\n              ")])])],1)],1)}),t._v(" "),i("add-models-temp",{key:t.time,attrs:{length:t.archiveModelsList.length,data:t.kbModelsData,type:1},on:{deleteFn:t.deleteFn,callbackFn:t.callbackFn,callbackFlagFn:t.callbackFlagFn}})],2):t._e(),t._v(" "),2==t.addType?i("el-row",{attrs:{gutter:22}},[i("add-models-temp",{key:t.time,attrs:{length:0,data:t.kbModelsData2,type:2},on:{deleteFn:t.deleteFn,callbackFn:t.callbackFn,callbackFlagFn:t.callbackFlagFn}})],1):t._e()],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90 plain-btn-style",attrs:{type:"",size:"medium",round:""},on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{type:"primary",size:"medium",round:""},on:{click:function(e){return t.save(t.addType)}}},[t._v("保存")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"setting-icon setting-icon-bp"}),this._v(" 标配")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"setting-icon setting-icon-xp"}),this._v(" 选配")])}]};var v=i("VU/8")(h,m,!1,function(t){i("V7zU")},"data-v-d6566b34",null);e.a=v.exports},JndV:function(t,e){},Lo9G:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQyMkVEMjIyNzk0NTExRUFBN0YzOTI4MjgwM0Y5MDBDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQyMkVEMjIzNzk0NTExRUFBN0YzOTI4MjgwM0Y5MDBDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDIyRUQyMjA3OTQ1MTFFQUE3RjM5MjgyODAzRjkwMEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDIyRUQyMjE3OTQ1MTFFQUE3RjM5MjgyODAzRjkwMEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4toNdRAAAAuElEQVR42mK0rfvPQARIBeIbQHyYkEIWIgxLB+LpQPwViNWA+Dk+xUxEGgYC1YQMI2QgsmEFQDyJmLBhoqZhuAwk2zBsBlJkGLqBFBuGbCBVDIMZmAY1jBGKJwLxfzLxbpCBRlCDqAFYQAZmAvEsqMA3IHZFci2p2JEJ6tQMqKFcQLwRiF0oCUMGahqKnGyoYih6wqbYUGxZjyJDcRUOZBuKr/hCN3QDEEtSWmLDDAXR54kpYAECDABjV0E3+pUuCwAAAABJRU5ErkJggg=="},OBWM:function(t,e){},P0n6:function(t,e){},ULBH:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlCRUZFQjBDNzk0NTExRUFCRUJGRDE1Q0U0RjlDNkZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlCRUZFQjBENzk0NTExRUFCRUJGRDE1Q0U0RjlDNkZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUJFRkVCMEE3OTQ1MTFFQUJFQkZEMTVDRTRGOUM2RkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUJFRkVCMEI3OTQ1MTFFQUJFQkZEMTVDRTRGOUM2RkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6FVBeYAAAAVUlEQVR42mK0rfvPAARHgNiagTQA0mPLBOWQqhkEbEAEC5ogI5Ga/8MYTAwUAhZ8puMAKK6kiQsYaeEFnIYOvBcodsEwMICFxFSI0wVHybAcrAcgwAAZCgnogVsbKQAAAABJRU5ErkJggg=="},V7zU:function(t,e){},XFMD:function(t,e,i){"use strict";var s=i("BO1k"),a=i.n(s),o=i("woOf"),n=i.n(o),l=i("/Pc9"),c=i("oFuF"),r={props:["data","type","followFormData","areaList"],data:function(){return{customers:{fromTopId:"",fromSecondId:""},genderOptions:[{value:1,label:"男"},{value:2,label:"女"}],buyQuotaOptions:[{value:"1",label:"有"},{value:"2",label:"无"}],isMortgageOptions:[{value:"1",label:"是"},{value:"2",label:"否"}],options:[{value:"1",label:"是"},{value:"2",label:"否"}],isView:!0,source_second:"",editable:!1,customersView:"",intentionInfo:[],intentionInfoOptions:[],intentionArchive:[],intentionArchiveOptions:[],cars:[],address:"",shiAddress:"",sheng:"",quAddress:"",gender:"",areaIdHasSelect:[],dtIntentionInfo:[]}},created:function(){console.log(this.data),"customerFollow"==this.type||(this.editable=!0),this.getCitys(),this.initData(this.data)},computed:{clueFromOptions:function(){return this.followFormData.clueFrom},buyTypeOptions:function(){return this.followFormData.buyType},areaListOptions:function(){return Object(c.a)(this.dtIntentionInfo,"areaId","areaName",this.areaList,"id","title")}},methods:{initData:function(t){var e=this;this.intentionArchive=[];var i=this.data.intentionInfo||[];this.areaIdHasSelect=[],i.forEach(function(t,i){e.intentionArchive.push({id:t.id,areaId:t.areaId&&t.areaId.toString(),brandId:t.brandId||"",carSeriesId:t.carSeriesId||"",modelId:t.modelId?t.modelId:t.modelName,fromTopId:t.fromTopId||"",fromSecondId:t.fromSecondId||"",clueId:t.clueId&&parseInt(t.clueId)}),e.dtIntentionInfo.push({areaId:t.areaId&&t.areaId.toString(),areaName:t.areaName}),e.intentionArchiveOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]}),e.intentionArchive[i].areaId&&e.getBrandList(e.intentionArchive[i].areaId,1,i),e.intentionArchive[i].brandId&&e.changeBrand(1,i,"noclear"),e.intentionArchive[i].carSeriesId&&e.changeSeries(1,i,"noclear"),setTimeout(function(){e.intentionArchive.forEach(function(t,i){t.fromTopId&&e.sourceChange(i,"noclear")})},0),console.log(e.intentionArchive,e.data.intentionArchive),e.handleAreaIdHasSelect()}),this.customers={nickname:t.nickName||t.nickname,gender:t.gender,tel:t.tel,wechatNumber:t.wechatNumber,wechatAdded:1==t.wechatAdded,buyType:t.buyType,isMortgage:t.isMortgage,provinceId:t.provinceId||"",cityId:t.cityId?t.cityId:t.cityName,regionId:t.regionId||"",buyQuota:t.buyQuota},console.log(this.customers),"男"==t.gender?this.gender=1:"女"==t.gender?this.gender=2:this.gender="",this.customersView=n()({},this.data),this.customersView.gender=1==t.gender?"男":"女"},addStroeAndCar:function(){console.log(this.customers.gender),this.customers.nickname?this.customers.gender?this.customers.tel?(this.intentionInfo.push({areaId:"",brandId:"",carSeriesId:"",modelId:"",fromTopId:"",fromSecondId:""}),this.intentionInfoOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]})):this.$message.error("请填写线索号码"):this.$message.error("请填写性别"):this.$message.error("请填写线索姓名")},getCitys:function(){var t=this;this.$fetch.work.getRegin({}).then(function(e){t.$store.commit("closeLoading"),t.$handleResponse(e,function(e){console.log(e),t.address=e,t.address.forEach(function(e){t.customers.provinceId==e.id&&(t.sheng=e,t.shiAddress=e.children,e.children.forEach(function(e){t.customers.cityId==e.id&&(t.shi=e,t.quAddress=e.children,e.children.forEach(function(e){t.customers.regionId==e.id&&(t.qu=e)}))}))})},!0)}).catch(function(e){t.$store.commit("closeLoading")})},changeSheng:function(){this.customers.cityId="",this.customers.regionId="",this.shiAddress=[],this.quAddress=[];var t=!0,e=!1,i=void 0;try{for(var s,o=a()(this.address);!(t=(s=o.next()).done);t=!0){var n=s.value;n.id==this.customers.provinceId&&(this.shiAddress=n.children)}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}},changeShi:function(){this.customers.regionId="",this.quAddress=[];var t=!0,e=!1,i=void 0;try{for(var s,o=a()(this.shiAddress);!(t=(s=o.next()).done);t=!0){var n=s.value;n.id==this.customers.cityId&&(this.quAddress=n.children)}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}},changeQu:function(){},sourceChange:function(t,e){console.log(this.intentionArchive[t].fromTopId,this.clueFromOptions),e||(this.intentionArchive[t].fromSecondId="");var i=!0,s=!1,o=void 0;try{for(var n,l=a()(this.clueFromOptions);!(i=(n=l.next()).done);i=!0){var c=n.value;c.id==this.intentionArchive[t].fromTopId&&(console.log(c.children),this.source_second=c.children||[])}}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}},sourceSecondChange:function(){this.$forceUpdate()},edit:function(){this.editable=!this.editable},saveCustomer:function(){var t=this,e=n()({},this.customers);if(e.id=this.$route.query.id,e.userId=this.$route.query.userId,e.gender=this.customers.gender,e.wechatAdded=1==e.wechatAdded?1:0,e.intentionInfo=this.intentionArchive,console.log(e),e.nickname)if(e.gender)if(e.tel)if(!e.tel||/^1[0-9]{10}$/.test(e.tel)){var i=!0;try{e.intentionInfo.forEach(function(e,s){if(!e.areaId)throw t.$message.error("请选择归属门店"),i=!1,Error();if(e.areaId&&!e.modelId)throw t.$message.error("请选择意向车型"),i=!1,Error()})}catch(t){}i&&(e.provinceId?(console.log("保存档案：",e),l.editProfile(e).then(function(e){t.$handleResponse(e,function(e){t.$message.success("保存成功"),t.$emit("requeryDataFn"),t.editable=!t.editable},!0)}).catch(function(e){t.$store.commit("closeLoading")})):this.$message.error("请选择购车区域"))}else this.$message.error("线索号码格式错误！");else this.$message.error("请填写线索号码");else this.$message.error("请填写性别");else this.$message.error("请填写线索姓名")},addIntentionInfo:function(t,e){var i=this,s=t[e];s.userId=this.$route.query.userId,"customerFollow"==this.type?s.intentionId=this.$route.query.id:s.clueId=this.$route.query.id,s.tel=this.customers.tel,s.nickname=this.customers.nickname,s.gender=this.customers.gender,l.addIntentionInfo(s).then(function(t){i.$handleResponse(t,function(t){i.$emit("addIntentionInfoFn",t)},!0)}).catch(function(t){i.$store.commit("closeLoading")})},cancel:function(){this.initData(this.data),this.editable=!this.editable},clearCar:function(t){this.intentionInfo.splice(t,1),this.intentionInfoOptions.splice(t,1),this.handleAreaIdHasSelect()},handleAreaIdHasSelect:function(){var t=this;this.areaIdHasSelect=[],this.intentionArchive.forEach(function(e){t.areaIdHasSelect.push(e.areaId)}),this.intentionInfo.forEach(function(e){t.areaIdHasSelect.push(e.areaId)})},areaIdChange:function(t,e){this.handleAreaIdHasSelect(),console.log(this.areaIdHasSelect),1==t&&(this.intentionArchive[e].brandId="",this.intentionArchive[e].carSeriesId="",this.intentionArchive[e].modelId="",this.intentionArchiveOptions[e].brandOptions=[],this.intentionArchiveOptions[e].seriesOptions=[],this.intentionArchiveOptions[e].modelOptions=[],this.getBrandList(this.intentionArchive[e].areaId,t,e)),2==t&&(this.intentionInfo[e].brandId="",this.intentionInfo[e].carSeriesId="",this.intentionInfo[e].modelId="",this.intentionInfoOptions[e].brandOptions=[],this.intentionInfoOptions[e].seriesOptions=[],this.intentionInfoOptions[e].modelOptions=[],this.getBrandList(this.intentionInfo[e].areaId,t,e))},getBrandList:function(t,e,i){var s=this;console.log(t),this.$fetch.common.carBrand({areaId:t},!1).then(function(t){s.$handleResponse(t,function(t){1==e?s.intentionArchiveOptions[i].brandOptions=s.$hasArrContent(t)?t:[]:2==e&&(s.intentionInfoOptions[i].brandOptions=s.$hasArrContent(t)?t:[])},!1)})},changeBrand:function(t,e,i){var s=this;1==t?(i||(this.intentionArchive[e].carSeriesId="",this.intentionArchive[e].modelId="",this.intentionArchiveOptions[e].seriesOptions=[],this.intentionArchiveOptions[e].modelOptions=[]),this.$fetch.common.carSeries({brandId:this.intentionArchive[e].brandId},!1).then(function(t){s.$handleResponse(t,function(t){s.intentionArchiveOptions[e].seriesOptions=s.$hasArrContent(t)?t:[]},!1)})):2==t&&(this.intentionInfo[e].carSeriesId="",this.intentionInfo[e].modelId="",this.intentionInfoOptions[e].seriesOptions=[],this.intentionInfoOptions[e].modelOptions=[],this.$fetch.common.carSeries({brandId:this.intentionInfo[e].brandId},!1).then(function(t){s.$handleResponse(t,function(t){s.intentionInfoOptions[e].seriesOptions=s.$hasArrContent(t)?t:[]},!1)}))},changeSeries:function(t,e,i){var s=this;1==t?(i||(this.intentionArchive[e].modelId="",this.intentionArchiveOptions[e].modelOptions=[]),this.$fetch.common.carModel({seriesId:this.intentionArchive[e].carSeriesId},!1).then(function(t){s.intentionArchiveOptions[e].modelOptions=s.$hasArrContent(t.data.data)?t.data.data:[]})):2==t&&(this.intentionInfo[e].modelId="",this.intentionInfoOptions[e].modelOptions=[],this.$fetch.common.carModel({seriesId:this.intentionInfo[e].carSeriesId},!1).then(function(t){s.intentionInfoOptions[e].modelOptions=s.$hasArrContent(t.data.data)?t.data.data:[]}))},changeModel:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1],i=arguments[2];this.$forceUpdate(),t&&"edit"==i?this.addIntentionInfo(this.intentionArchive,e):this.addIntentionInfo(this.intentionInfo,e)}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"customer-files-page"},[s("div",{staticClass:"lt-title"},[t._v("客户档案\n    "),"customerFollow"==t.type?s("div",[t.editable?s("div",[s("span",{staticClass:"customer-files-btn save-btn",on:{click:function(e){return t.saveCustomer()}}},[t._v("保存")]),t._v(" "),s("span",{staticClass:"customer-files-btn cancle-btn",on:{click:function(e){return t.cancel()}}},[t._v("取消")])]):s("div",[s("span",{staticClass:"customer-files-btn edit-btn",on:{click:function(e){return t.edit()}}},[t._v("编辑")])])]):t._e()]),t._v(" "),s("div",{staticClass:"customer-files-content",class:{"customer-files-content-edit":t.editable}},[s("el-row",{staticClass:"customer-form",attrs:{gutter:22}},[s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              客户姓名\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content",staticStyle:{display:"flex"}},[s("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入",size:"mini"},model:{value:t.customers.nickname,callback:function(e){t.$set(t.customers,"nickname",e)},expression:"customers.nickname"}}),t._v(" "),s("div",{staticClass:"width-sex"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},model:{value:t.customers.gender,callback:function(e){t.$set(t.customers,"gender",e)},expression:"customers.gender"}},t._l(t.genderOptions,function(e){return s("el-radio-button",{key:e.value,attrs:{size:"mini",label:e.value}},[t._v(t._s(e.label))])}),1)],1)],1):s("div",{staticClass:"grid-content grid-content-right",staticStyle:{display:"flex"}},[s("span",{staticStyle:{flex:"1"}},[t._v(t._s(t.customersView.nickname))]),t._v(" "),s("span",[t._v(t._s(t.customersView.gender))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n              手机号码\n              "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-input",{attrs:{placeholder:"请输入",maxlength:"11",size:"mini"},model:{value:t.customers.tel,callback:function(e){t.$set(t.customers,"tel",e)},expression:"customers.tel"}})],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.tel))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("微信号")])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content",staticStyle:{display:"flex"}},[s("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入",size:"mini"},model:{value:t.customers.wechatNumber,callback:function(e){t.$set(t.customers,"wechatNumber",e)},expression:"customers.wechatNumber"}}),t._v(" "),s("el-checkbox",{staticStyle:{"line-height":"28px","padding-left":"10px"},model:{value:t.customers.wechatAdded,callback:function(e){t.$set(t.customers,"wechatAdded",e)},expression:"customers.wechatAdded"}},[t._v("已加微信")])],1):s("div",{staticClass:"grid-content grid-content-right",staticStyle:{display:"flex"}},[s("span",{staticStyle:{flex:"1"}},[t._v(t._s(t.customersView.wechatNumber))]),t._v(" "),1==t.customersView.wechatAdded?s("span",{staticClass:"wechat-add"},[s("i",{staticClass:"el-icon-circle-check"}),t._v(" 已加微信")]):t._e()])])],1)],1),t._v(" "),t._l(t.intentionArchive,function(e,i){return s("el-col",{key:i+"archive",staticClass:"m-b-10 store-and-car",class:{"store-and-car-oth":0!=i},attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("归属门店"+t._s(i+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(e){return t.areaIdChange(1,i)}},model:{value:e.areaId,callback:function(i){t.$set(e,"areaId",i)},expression:"items.areaId"}},t._l(t.areaListOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.title,value:e.id,disabled:t.areaIdHasSelect.indexOf(e.id)>-1}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.data.intentionInfo[i].areaName))])])])],1),t._v(" "),s("el-row",{staticClass:"rowmbottom10",staticStyle:{"margin-top":"10px"}},[s("el-tooltip",{attrs:{effect:"dark",placement:"top",content:"DCC需要根据文本从车型库选取对应的意向车型"}},[t.editable&&isNaN(e.modelId)?s("div",{staticClass:"car-ques-icon"},[s("i",{staticClass:"el-icon-question"})]):t._e()]),t._v(" "),s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("意向车型"+t._s(i+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{class:""==e.brandId?"c-placeholder":"",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeBrand(1,i)}},model:{value:e.brandId,callback:function(i){t.$set(e,"brandId",i)},expression:"items.brandId"}},t._l(t.intentionArchiveOptions[i].brandOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==e.carSeriesId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeSeries(1,i)}},model:{value:e.carSeriesId,callback:function(i){t.$set(e,"carSeriesId",i)},expression:"items.carSeriesId"}},t._l(t.intentionArchiveOptions[i].seriesOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==e.modelId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeModel(!0,i,"edit")}},model:{value:e.modelId,callback:function(i){t.$set(e,"modelId",i)},expression:"items.modelId"}},t._l(t.intentionArchiveOptions[i].modelOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.data.intentionInfo[i].modelName))])])])],1),t._v(" "),s("el-row",{staticClass:"rowmbottom10",staticStyle:{"margin-top":"10px"}},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("客户来源"),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"一级来源",filterable:"",size:"mini"},on:{change:function(e){return t.sourceChange(i)}},model:{value:e.fromTopId,callback:function(i){t.$set(e,"fromTopId",i)},expression:"items.fromTopId"}},t._l(t.clueFromOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{disabled:"",placeholder:"二级来源",filterable:"",size:"mini"},on:{change:t.sourceSecondChange},model:{value:e.fromSecondId,callback:function(i){t.$set(e,"fromSecondId",i)},expression:"items.fromSecondId"}},t._l(t.source_second,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.data.intentionInfo[i].fromTopText)+" - "+t._s(t.data.intentionInfo[i].fromSecondText))])])])],1)],1)}),t._v(" "),t._l(t.intentionInfo,function(e,a){return t.editable?s("el-col",{key:a,staticClass:"m-b-10 store-and-car store-and-car-oth",attrs:{span:24}},[s("div",{staticClass:"close-icon",on:{click:function(e){return t.clearCar(a)}}},[s("img",{attrs:{src:i("FzXW")}})]),t._v(" "),s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("归属门店"+t._s(t.intentionArchive.length+a+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(e){return t.areaIdChange(2,a)}},model:{value:e.areaId,callback:function(i){t.$set(e,"areaId",i)},expression:"items.areaId"}},t._l(t.areaListOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.title,value:e.id,disabled:t.areaIdHasSelect.indexOf(e.id)>-1}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.areaId))])])])],1),t._v(" "),s("el-row",{staticClass:"rowmbottom10",staticStyle:{"margin-top":"10px"}},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("意向车型"+t._s(t.intentionArchive.length+a+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-select",{class:""==e.brandId?"c-placeholder":"",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeBrand(2,a)}},model:{value:e.brandId,callback:function(i){t.$set(e,"brandId",i)},expression:"items.brandId"}},t._l(t.intentionInfoOptions[a].brandOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==e.carSeriesId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeSeries(2,a)}},model:{value:e.carSeriesId,callback:function(i){t.$set(e,"carSeriesId",i)},expression:"items.carSeriesId"}},t._l(t.intentionInfoOptions[a].seriesOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==e.modelId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeModel(!0,a)}},model:{value:e.modelId,callback:function(i){t.$set(e,"modelId",i)},expression:"items.modelId"}},t._l(t.intentionInfoOptions[a].modelOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)])],1),t._v(" "),s("el-row",{staticClass:"rowmbottom10",staticStyle:{"margin-top":"10px"}},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("客户来源"+t._s(t.intentionArchive.length+a+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"一级来源",filterable:"",size:"mini"},on:{change:function(e){return t.sourceChange(a)}},model:{value:e.fromTopId,callback:function(i){t.$set(e,"fromTopId",i)},expression:"items.fromTopId"}},t._l(t.clueFromOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"二级来源",filterable:"",size:"mini"},on:{change:t.sourceSecondChange},model:{value:e.fromSecondId,callback:function(i){t.$set(e,"fromSecondId",i)},expression:"items.fromSecondId"}},t._l(t.source_second,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)])],1)],1):t._e()}),t._v(" "),t.editable?s("el-col",{staticClass:"m-b-10 store-and-car-btn",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left",staticStyle:{width:"88.5px",height:"1px"}})]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("div",{},[s("el-button",{attrs:{gutter:24,size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.addStroeAndCar}},[t._v("新增门店和车型")])],1)])])],1)],1):t._e(),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                  购车区域\n                  "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-col",{attrs:{span:8}},[s("el-select",{class:""==t.customers.provinceId?"c-placeholder":"",staticStyle:{width:"98%"},attrs:{filterable:"",placeholder:"省",size:"mini"},on:{change:t.changeSheng},model:{value:t.customers.provinceId,callback:function(e){t.$set(t.customers,"provinceId",e)},expression:"customers.provinceId"}},t._l(t.address,function(t){return s("el-option",{key:t.id,attrs:{label:t.regionName,value:t.id}})}),1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-select",{class:""==t.customers.cityId?"c-placeholder":"",attrs:{placeholder:"市",filterable:"",size:"mini"},on:{change:t.changeShi},model:{value:t.customers.cityId,callback:function(e){t.$set(t.customers,"cityId",e)},expression:"customers.cityId"}},t._l(t.shiAddress,function(t){return s("el-option",{key:t.id,attrs:{label:t.regionName,value:t.id}})}),1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-select",{class:""==t.customers.regionId?"c-placeholder":"",attrs:{placeholder:"区",filterable:"",size:"mini"},on:{change:t.changeQu},model:{value:t.customers.regionId,callback:function(e){t.$set(t.customers,"regionId",e)},expression:"customers.regionId"}},t._l(t.quAddress,function(t){return s("el-option",{key:t.id,attrs:{label:t.regionName,value:t.id}})}),1)],1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.provinceName)+"-"+t._s(t.customersView.cityName)+"-"+t._s(t.customersView.regionName))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("购车指标")])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},model:{value:t.customers.buyQuota,callback:function(e){t.$set(t.customers,"buyQuota",e)},expression:"customers.buyQuota"}},t._l(t.buyQuotaOptions,function(e){return s("el-radio-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.buyQuotaText))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("购车类型")])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{gutter:24,filterable:"",placeholder:"请选择",size:"mini"},model:{value:t.customers.buyType,callback:function(e){t.$set(t.customers,"buyType",e)},expression:"customers.buyType"}},t._l(t.buyTypeOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.buyTypeText))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("是否贷款")])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},model:{value:t.customers.isMortgage,callback:function(e){t.$set(t.customers,"isMortgage",e)},expression:"customers.isMortgage"}},t._l(t.isMortgageOptions,function(e){return s("el-radio-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.isMortgageText))])])])],1)],1)],2)],1)])},staticRenderFns:[]};var u=i("VU/8")(r,d,!1,function(t){i("4bKk")},"data-v-fc819016",null);e.a=u.exports},Zlpi:function(t,e){},aKCq:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlCMzRGQ0JGNzk0NTExRUFCMzJDRjA0QUI1MUNBREI1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlCMzRGQ0MwNzk0NTExRUFCMzJDRjA0QUI1MUNBREI1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUIzNEZDQkQ3OTQ1MTFFQUIzMkNGMDRBQjUxQ0FEQjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzNEZDQkU3OTQ1MTFFQUIzMkNGMDRBQjUxQ0FEQjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5/UEoEAAABUUlEQVR42pTTOUsDURSG4cmICSKWVlamckNFBEmRQrSI+Au0DhpREGvBylqNWLjENn9ABIsEwUobF4yijWBhZauIcX0PfCOXcZsceLjj3JyP8c6ZWHrhwwtVB7IYQavu3WAPBVy6P/ad6zjWcI45tCEh7bpne+toCAdY8y6m8YpVpNAkKd2zvUnsqOcrYBnDzuMu4hAPYtezGMAdhrAUBHQqtYprPfo+mr3vdYpRPCNnvb4OrA4bSONCob+FnGFTPVkLyGijiHsMRggpas1YQFJ/HGuNEnKiNel7P9d/IfVaq75O3aqvhpAurbe+JsxqvIYnGdN+yQK28YYJ9EQIOdBrt56CBVT0ChOaxt4/Qq6cEbeeSnCINucltOAIK+hHo9j1vPPGyurxYs7XGNd4ToU+MrfesaXmp/DXaKM8g27kNdYveNT/n9cZ5YJmq08BBgBbNlp5U8sKVgAAAABJRU5ErkJggg=="},"ca//":function(t,e){},d8Vz:function(t,e){},de9B:function(t,e){},ezg5:function(t,e,i){"use strict";var s=i("/Pc9"),a={props:["data"],data:function(){return{cacheCheckBox:[],checkboxGroup:[]}},created:function(){var t=this;this.checkboxGroup=[],console.log(this.data),this.data.forEach(function(e){1==e.status&&(t.checkboxGroup.push(e.id),t.cacheCheckBox.push(e.id))})},methods:{saveOpenTask:function(){var t=this,e=this.checkboxGroup;if(e&&0!=e.length){var i={contentId:e};s.openTaskComplete(i).then(function(i){t.$handleResponse(i,function(i){t.$message.success("保存成功"),t.cacheCheckBox.push(e[0])},!0)}).catch(function(e){t.$store.commit("closeLoading")})}}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"open-task"},[i("div",{staticClass:"lt-content"},[i("el-checkbox-group",{attrs:{size:"small"},model:{value:t.checkboxGroup,callback:function(e){t.checkboxGroup=e},expression:"checkboxGroup"}},t._l(t.data,function(e,s){return i("el-checkbox-button",{key:s,attrs:{label:e.id,disabled:t.cacheCheckBox.indexOf(e.id)>-1}},[i("i",{staticClass:"item-num"},[t._v(t._s(s+1))]),t._v(" "),i("span",{staticClass:"text"},[t._v(t._s(e.content))]),t._v(" "),i("span",{staticClass:"icon-border"},[i("i",{staticClass:"el-icon-check"})])])}),1)],1)])},staticRenderFns:[]};var n=i("VU/8")(a,o,!1,function(t){i("d8Vz")},"data-v-0eed90da",null);e.a=n.exports},f6px:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clue-store"},[i("div",{staticClass:"lt-content"},[i("div",{staticClass:"store-list"},t._l(t.data,function(e,s){return i("div",{key:s,staticClass:"store-item",class:{"is-active":s==t.activeIdx},on:{click:function(e){return t.setActiveIdx(s)}}},[e.extend.distance?i("div",{staticClass:"distance-tips"},[t._v(t._s(e.extend.distance))]):t._e(),t._v(" "),i("div",{staticClass:"item-top"},[i("div",{staticClass:"top-left-title"},[t._v(t._s(e.areaName))]),t._v(" "),i("div",{staticClass:"top-left-time"},[t._v(t._s(e.createData))])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-center"},[t._v(t._s(e.modelName))]),t._v(" "),0!=e.extend.grade&&11!=e.extend.grade?i("div",{staticClass:"item-record"},[i("span",[t._v(t._s(e.extend.grade))]),t._v("分")]):t._e()])])}),0)])])},staticRenderFns:[]};var a=i("VU/8")({props:["data"],data:function(){return{activeIdx:0}},methods:{setActiveIdx:function(t){this.activeIdx=t,this.$emit("setExtendDataIdx",t)}}},s,!1,function(t){i("14mc")},"data-v-33132426",null);e.a=a.exports},"o+CZ":function(t,e,i){"use strict";var s={props:["data","extendDataIdx"],data:function(){return{radio4:"1",percentage:80,items:["内饰","外观","舒适度"]}},created:function(){console.log(this.data,this.extendDataIdx)},computed:{extendData:function(){return this.data[this.extendDataIdx]}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clue-em"},[i("div",{staticClass:"lt-content"},[i("div",{staticClass:"cp-models xs-left-title"},[t._m(0),t._v(" "),t.extendData?i("div",{staticClass:"models xs-right"},t._l(t.extendData.competeModel,function(e,s){return i("div",{key:s},[t._v(t._s(e.modelName||e))])}),0):t._e()]),t._v(" "),i("div",{staticClass:"purchase-focus xs-left-title"},[t._m(1),t._v(" "),t.extendData?i("div",{staticClass:"tag-group xs-right"},t._l(t.extendData.focus,function(e){return t.extendData.focus.length>0?i("el-tag",{key:e,attrs:{size:"small",type:"info",effect:"plain"}},[t._v(t._s(e))]):t._e()}),1):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-left"},[e("i",{staticClass:"title-left-style"}),this._v("\n        竞争车型\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-left"},[e("i",{staticClass:"title-left-style"}),this._v("\n        购车关注点\n      ")])}]};var o=i("VU/8")(s,a,!1,function(t){i("BbOZ")},"data-v-3e463ab2",null);e.a=o.exports},pVih:function(t,e,i){"use strict";var s={data:function(){return{alicc_code:6,callTime:"00:00:00",lastCallTime:"00:00:00",hour:0,minute:0,second:0,millisecond:0,int:"",toggleMuteInCallStatus:!0}},created:function(){var t=this;eventBus.$off("getCode"),eventBus.$on("getCode",function(e){console.log("获取code值："+e),t.alicc_code=e,console.log("获取_code值",t.alicc_code),8==e?console.log("拨号中、、、"):10==e?(console.log("已接通"),t.int=setInterval(t.timer,1e3)):5==e&&(console.log("结束通话时间",t.callTime),t.lastCallTime=t.callTime,window.clearInterval(t.int),t.millisecond=0,t.hour=0,t.minute=0,t.second=0,t.callTime="00时00分00秒",t.toggleMuteInCallStatus=!0)})},methods:{call:function(){window.workbench.call("17322300397")},hangUp:function(){window.workbench.hangUp(),console.log("挂机")},toggleMuteInCall:function(){window.workbench.toggleMuteInCall(),this.toggleMuteInCallStatus=!this.toggleMuteInCallStatus,console.log("静音")},timer:function(){this.second++,this.second>=60&&(this.second=0,this.minute=this.minute+1),this.minute>=60&&(this.minute=0,this.hour=this.hour+1),this.callTime=this.formatZero(this.hour)+"时"+this.formatZero(this.minute)+"分"+this.formatZero(this.second)+"秒"},formatZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).length>e?t:(Array(e).join(0)+t).slice(-e)}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"call-out-component"},[6==t.PhoneState?s("div",{on:{click:function(e){return t.call()}}},[s("img",{attrs:{src:i("QNcc"),alt:""}})]):t._e(),t._v(" "),8==t.alicc_code?s("div",{staticClass:"call-out waiting-for-answer"},[s("div",{staticClass:"temp-rl-style waiting-style"},[t._v("等待对方接听...")]),t._v(" "),s("div",{staticClass:"call-btns"},[s("div",{on:{click:function(e){return t.hangUp()}}},[s("img",{attrs:{src:i("4cN8"),alt:""}})])])]):t._e(),t._v(" "),10==t.alicc_code?s("div",{staticClass:"call-out in-the-call"},[s("div",{staticClass:"temp-rl-style calling-style"},[t._v("通话中 "+t._s(t.callTime))]),t._v(" "),s("div",{staticClass:"call-btns"},[s("div",{on:{click:function(e){return t.hangUp()}}},[s("img",{attrs:{src:i("4cN8"),alt:""}})])])]):t._e(),t._v(" "),5==t.PhoneState?s("div",{staticClass:"call-out end-calls"},[s("div",[t._v("结束 "+t._s(t.endTime))]),t._v(" "),s("div",{staticClass:"call-btns"},[s("div",{on:{click:function(e){return t.call()}}},[s("img",{attrs:{src:i("QNcc"),alt:""}})])])]):t._e()])},staticRenderFns:[]};var o=i("VU/8")(s,a,!1,function(t){i("6+ZX")},"data-v-4ebde032",null);e.a=o.exports},qmg0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("BO1k"),a=i.n(s),o=i("woOf"),n=i.n(o),l=i("Dd8w"),c=i.n(l),r=i("bOdI"),d=i.n(r),u=i("/Pc9"),h=i("pVih"),m=i("WgXR"),v=i("pAne"),f={data:function(){return{dialogVisible:!0,reasonInvalidOptions:[],filters:{id:this.$route.query.id}}},created:function(){this.getClueInvalidReasonList()},methods:{handleClose:function(){this.dialogVisible=!1,this.$emit("invalidClueCloseFn")},save:function(){var t=this,e=this.filters;e.reasonInvalidId?e.remark?(console.log(e),u.invalidApply(e).then(function(e){t.$handleResponse(e,function(e){console.log(e),t.$route.query.back?t.$route.query.total&&t.$route.query.total>0?t.$emit("invalidClueCloseFn","next"):t.$emit("invalidClueCloseFn"):t.$router.push({path:"/business/clue/detail",query:{id:t.$route.query.id}})},!0)}).catch(function(e){t.$store.commit("closeLoading")})):this.$message.error("请填写原因描述"):this.$message.error("请选择无效原因")},getClueInvalidReasonList:function(){var t=this;this.$fetch.common.clueInvalidReasonList({}).then(function(e){t.$handleResponse(e,function(e){t.reasonInvalidOptions=e},!0)}).catch(function(e){t.$store.commit("closeLoading")})}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{staticClass:"invalid-clue-dialog",attrs:{visible:t.dialogVisible,width:"480px",title:"线索无效","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-center"},[i("el-row",{attrs:{gutter:22}},[i("el-col",{staticClass:"m-b-15",attrs:{span:24}},[i("el-row",{staticClass:"rowmbottom10"},[i("el-col",{attrs:{span:5}},[i("div",{staticClass:"grid-content-left"},[t._v("\n                无效原因\n                "),i("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"grid-content"},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.filters.reasonInvalidId,callback:function(e){t.$set(t.filters,"reasonInvalidId",e)},expression:"filters.reasonInvalidId"}},t._l(t.reasonInvalidOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)])],1)],1),t._v(" "),i("el-col",{staticClass:"m-b-15",attrs:{span:24}},[i("el-row",{staticClass:"rowmbottom10"},[i("el-col",{attrs:{span:5}},[i("div",{staticClass:"grid-content-left"},[t._v("\n                原因描述\n                "),i("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"grid-content"},[i("el-input",{attrs:{placeholder:"请输入无效原因",type:"textarea",maxlength:"120",autosize:{minRows:4},"show-word-limit":""},model:{value:t.filters.remark,callback:function(e){t.$set(t.filters,"remark",e)},expression:"filters.remark"}})],1)])],1)],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90 plain-btn-style",attrs:{type:"",size:"medium",round:""},on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),t.$route.query.total&&t.$route.query.total>1?i("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:t.save}},[t._v("保存并进入下一条")]):i("el-button",{staticClass:"w-90",attrs:{type:"primary",size:"medium",round:""},on:{click:t.save}},[t._v("保存")])],1)])],1)},staticRenderFns:[]};var g=i("VU/8")(f,p,!1,function(t){i("OBWM")},"data-v-1a58826f",null).exports,I=i("+erF"),b=i("PJh5"),C=i.n(b),w={data:function(){return{dialogVisible:!0,filters:{id:this.$route.query.id},pickerOptions:{},maxTime:"",minTime:C()(new Date).subtract(1,"day"),defaultTime:(new Date).getHours()+":"+(new Date).getMinutes()+":00"}},created:function(){this.getLaterFollowMaxTime()},methods:{handleClose:function(){this.dialogVisible=!1,this.$emit("contactLaterCloseFn")},save:function(){var t=this,e=this.filters;e.followDate?e.remark?e.followDate>this.maxTime?this.$message.error("稍后联系时间不得超过"+this.maxTime):(console.log(e),u.clueLater(e).then(function(e){t.$handleResponse(e,function(e){console.log(e),t.$route.query.back?t.$route.query.total&&t.$route.query.total>0?t.$emit("contactLaterCloseFn","next"):t.$emit("contactLaterCloseFn"):t.$router.push({path:"/business/clue/detail",query:{id:t.$route.query.id}})},!0)}).catch(function(e){t.$store.commit("closeLoading")})):this.$message.error("请填写备注"):this.$message.error("请选择联系时间")},getLaterFollowMaxTime:function(){var t=this;this.$fetch.common.laterFollowMaxTime({}).then(function(e){t.$handleResponse(e,function(e){t.maxTime=e.laterMaxTime},!0)}).catch(function(e){t.$store.commit("closeLoading")})}},computed:{startTimeRange:function(){var t=this.filters.followDate;if(t){var e=this.maxTime.split(" "),i="";return i=t.split(" ")[0]==e[0]?e[1]+":00":"23:59:59",console.log("00:00:00 - ",i),"00:00:00 - "+i}}}},_={render:function(){var t=this,e=this,i=e.$createElement,s=e._self._c||i;return s("div",[s("el-dialog",{staticClass:"contact-later-dialog",attrs:{visible:e.dialogVisible,width:"480px",title:"稍后联系","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticClass:"dialog-center"},[s("el-row",{attrs:{gutter:22}},[s("el-col",{staticClass:"m-b-15",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{attrs:{span:5}},[s("div",{staticClass:"grid-content-left"},[e._v("\n                联系时间\n                "),s("span",{staticClass:"red"},[e._v("*")])])]),e._v(" "),s("el-col",{attrs:{span:18}},[s("div",{staticClass:"grid-content"},[s("el-date-picker",{staticClass:"my-date-picker",staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择下次跟进时间","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm","default-time":e.defaultTime,"time-arrow-control":"","picker-options":{disabledDate:function(e){return e<new Date(t.minTime).getTime()||e>new Date(t.maxTime).getTime()},selectableRange:e.startTimeRange}},model:{value:e.filters.followDate,callback:function(t){e.$set(e.filters,"followDate",t)},expression:"filters.followDate"}})],1)])],1)],1),e._v(" "),s("el-col",{staticClass:"m-b-15",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{attrs:{span:5}},[s("div",{staticClass:"grid-content-left"},[e._v("\n                备注\n                "),s("span",{staticClass:"red"},[e._v("*")])])]),e._v(" "),s("el-col",{attrs:{span:18}},[s("div",{staticClass:"grid-content"},[s("el-input",{attrs:{placeholder:"请输入",type:"textarea",maxlength:"120",autosize:{minRows:4},"show-word-limit":""},model:{value:e.filters.remark,callback:function(t){e.$set(e.filters,"remark",t)},expression:"filters.remark"}})],1)])],1)],1)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"w-90 plain-btn-style",attrs:{type:"",size:"medium",round:""},on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),e.$route.query.total&&e.$route.query.total>1?s("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:e.save}},[e._v("保存并进入下一条")]):s("el-button",{staticClass:"w-90",attrs:{type:"primary",size:"medium",round:""},on:{click:e.save}},[e._v("保存")])],1)])],1)},staticRenderFns:[]};var y=i("VU/8")(w,_,!1,function(t){i("P0n6")},"data-v-8af95b68",null).exports,A=i("ezg5"),k=i("f6px"),x=i("o+CZ"),O=i("XFMD"),S=i("0ITc"),T=i("wmRa"),M=i("G6dl"),$=(i("oFuF"),i("NYxO")),F={components:{CallOutTemp:h.a,CallOutTempTR:m.a,CallOutTempRL:v.a,InvalidClueDialog:g,TransferClueDialog:I.a,ContactLaterDialog:y,OpenTask:A.a,ClueStore:k.a,CustomerFiles:O.a,AddFollow:S.a,FollowRecord:T.a,ClueEm:x.a,KnowledgeBase:M.a},data:function(){var t;return t={dialogVisible:!0,val:"",options:[{value:"1",label:"是"},{value:"0",label:"否"}],followFilters:{},tabs:[{title:"车型对比",name:"0"},{title:"门店活动",name:"1"},{title:"销售活动",name:"2"},{title:"攻防话术",name:"3"}],currentTab:"0",input:"",alicc_code:6,callTime:"00:00:00",lastCallTime:"00:00:00",hour:0,minute:0,second:0,millisecond:0,int:"",toggleMuteInCallStatus:!0,dialogVisibleInvalidClue:!1,dialogVisibleTransferClue:!1,dialogVisibleContactLater:!1,openTask:"",clueInfo:"",intentionInfo:"",extendData:"",extendDataIdx:0,competeModels:"",archiveInfo:"",followType:"cluesDeal",sdkType:"",time:"",followFormData:{},areaList:[],followPage:{},key:"",isSaveFlag:!1,ctime:"",editable:!0,customers:{},intentionArchive:[],address:"",shiAddress:"",sheng:"",quAddress:"",gender:""},d()(t,"intentionArchive",[]),d()(t,"intentionArchiveOptions",[]),d()(t,"areaListOptions",[]),d()(t,"clueFromOptions",[]),d()(t,"buyTypeOptions",[]),d()(t,"areaListOptions",[]),d()(t,"source_second",""),d()(t,"catchIntentionInfo",[]),d()(t,"catchExtendData",[]),d()(t,"areaIdHasSelect",[]),d()(t,"genderOptions",[{value:1,label:"男"},{value:2,label:"女"}]),d()(t,"buyQuotaOptions",[{value:"1",label:"有"},{value:"2",label:"无"}]),d()(t,"isMortgageOptions",[{value:"1",label:"是"},{value:"2",label:"否"}]),d()(t,"addFollowKey",""),d()(t,"phoneJson",{}),t},computed:c()({},Object($.d)(["loginType"])),mounted:function(){console.log(document.getElementById("app"));document.getElementById("app");window.onbeforeunload=function(t){return(t=t||window.event)&&(t.returnValue="关闭提示"),"关闭提示"}},created:function(){var t=this;this.sdkType=window.localStorage.getItem("c_callSDKTools"),this.getFollowForm(),this.getAreaList(),this.$route.query.id?this.getFollowClue("init"):(this.archiveInfo={tel:this.$route.query.tel,intentionInfo:[]},this.customers=this.archiveInfo),window.eventBus.$on("objectDeclareFuncRLBus",function(e){console.log("通话信息",e.phoneJson),t.phoneJson=e.phoneJson}),eventBus.$off("getCode"),eventBus.$on("getCode",function(e){console.log("获取code值："+e),t.alicc_code=e,console.log("获取_code值",t.alicc_code),8==e?console.log("拨号中、、、"):10==e?(console.log("已接通"),t.int=setInterval(t.timer,1e3)):5==e&&(console.log("结束通话时间",t.callTime),t.lastCallTime=t.callTime,window.clearInterval(t.int),t.millisecond=0,t.hour=0,t.minute=0,t.second=0,t.callTime="00时00分00秒")})},methods:{doSomething:function(){},hangUp:function(){window.workbench.hangUp(),console.log("挂机")},toggleMuteInCall:function(){window.workbench.toggleMuteInCall(),this.toggleMuteInCallStatus=!this.toggleMuteInCallStatus,console.log("静音")},timer:function(){console.log("时间++"),this.second++,this.second>=60&&(this.second=0,this.minute=this.minute+1),this.minute>=60&&(this.minute=0,this.hour=this.hour+1),this.callTime=this.formatZero(this.hour)+"时"+this.formatZero(this.minute)+"分"+this.formatZero(this.second)+"秒"},formatZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).length>e?t:(Array(e).join(0)+t).slice(-e)},handleClose:function(){this.dialogVisible=!1,this.$emit("cluesDetailCloseFn")},save:function(t){var e=this,i={};if(n()(i,this.customers),i.wechatAdded=1==i.wechatAdded?1:0,i.intentionInfo=this.intentionArchive,i.userId=this.clueInfo.userId,i.nickname)if(i.gender)if(i.tel)if(!i.tel||/^1[0-9]{10}$/.test(i.tel)){var s=!0;try{i.intentionInfo.forEach(function(t,i){if(!t.areaId)throw e.$message.error("请选择归属门店"),s=!1,Error();if(t.areaId&&!t.modelId)throw e.$message.error("请选择意向车型"),s=!1,Error()})}catch(t){}if(s)if(i.provinceId){var a=this.$refs.followRef.followFilters;if(n()(i,this.$refs.followRef.followFilters),1==a.followResult?i.nextFollowDate=this.$refs.followRef.nextFollowDate:(i.inviteInfo=this.$refs.followRef.inviteInfo,i.nextFollowDate=this.$refs.followRef.nextFollowDate2),1==a.followResult){if(i.nextFollowDate=this.$refs.followRef.nextFollowDate,!i.nextFollowDate)return void this.$message.error("请选择下次跟进时间")}else{i.inviteInfo=this.$refs.followRef.inviteInfo;var o=!0;try{i.inviteInfo.forEach(function(t,i){if(!t.areaId)throw e.$message.error("请选择邀约门店"),o=!1,Error();if(t.areaId&&!t.date)throw e.$message.error("请选择到店时间"),o=!1,Error()})}catch(t){}if(!o)return}if(i.remark){switch(this.sdkType){case"RL":i.callThirdType=1;break;case"byaicc":i.callThirdType=2;break;case"cticloud":i.callThirdType=3}this.phoneJson.CallsheetId&&(i.callThirdId=this.phoneJson.CallsheetId),this.currentHasCall("save")&&(this.clueAdd(i,t),this.saveOpenTask())}else this.$message.error("请填写客户描述")}else this.$message.error("请选择购车区域")}else this.$message.error("线索号码格式错误！");else this.$message.error("请填写线索号码");else this.$message.error("请填写性别");else this.$message.error("请填写线索姓名")},clueAdd:function(t,e){var i=this;this.$route.query.id||(t.addClue=0),u.clueAdd2(t).then(function(t){i.$handleResponse(t,function(t){i.$message.success("保存成功"),i.isSaveFlag=!0,i.$route.query.back?e?i.handleNext():i.$router.replace({path:"/work"}):i.$router.push({path:"/business/clue/detail",query:{id:i.$route.query.id}})},!0)}).catch(function(t){i.$store.commit("closeLoading")})},saveOpenTask:function(){var t=this;if(this.openTask&&0!=this.openTask.length){var e=this.$refs.openTaskRef&&this.$refs.openTaskRef.checkboxGroup,i=[];this.openTask.forEach(function(t,s){e.indexOf(t.id)>-1?i.push({contentId:t.id,status:1}):i.push({contentId:t.id,status:0})});var s={type:2,userId:this.$route.query.userId,dataId:this.$route.query.id,task:i};u.openTaskComplete(s).then(function(e){t.$handleResponse(e,function(t){},!0)}).catch(function(e){t.$store.commit("closeLoading")})}},goBack:function(){if(this.currentHasCall("back")){if(window.history.length<=1)return void this.$router.push({path:"/work"});this.$router.go(-1)}},currentHasCall:function(t){return"EvtConnected"!=window.localStorage.getItem("objectDeclareFunc")&&"EvtConnected"!=window.localStorage.getItem("stateActionRL")||(this.$message({message:"save"==t?"保存失败，请先挂断通话在保存":"当前正在通话，请不要离开",type:"warning",showClose:!0}),!1)},invalidClue:function(){this.dialogVisibleInvalidClue=!0},invalidClueCloseFn:function(t){if(this.dialogVisibleInvalidClue=!1,t){console.log("页面跳转到“下一条”待处理线索详情");var e=this.followPage.next;this.handleData(e)}},transferClue:function(){this.dialogVisibleTransferClue=!0},transferClueCloseFn:function(t){this.dialogVisibleTransferClue=!1,t&&(console.log("回到线索详情页刷新页面"),this.getFollowClue())},contactLater:function(){this.dialogVisibleContactLater=!0},contactLaterCloseFn:function(t){if(this.dialogVisibleContactLater=!1,t){console.log("进入下一条数据");var e=this.followPage.next;this.handleData(e)}},getFollowClue:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u.getFollowClue({sort:this.$route.query.sort,id:this.$route.query.id,userId:this.$route.query.userId,pageFrom:this.$route.query.total?"":-1}).then(function(i){t.$store.commit("closeLoading"),t.$handleResponse(i,function(i){t.openTask=i.openTask,t.clueInfo=i.clueInfo,t.intentionInfo=[],t.extendData=[],t.catchIntentionInfo=[],t.catchExtendData=[],t.clueInfo.intentionInfo.forEach(function(e){t.intentionInfo.push(e),t.extendData.push(e.extend),t.catchIntentionInfo.push(e),t.catchExtendData.push(e.extend)}),t.competeModels=t.catchExtendData[0].competeModel,t.archiveInfo=i.clueInfo,t.followPage=i.followPage,t.customers=i.clueInfo,console.log("客户档案信息",t.customers),t.customers={nickname:t.archiveInfo.nickName||t.archiveInfo.nickname,gender:t.archiveInfo.gender,tel:t.archiveInfo.tel,wechatNumber:t.archiveInfo.wechatNumber,wechatAdded:1==t.archiveInfo.wechatAdded,buyType:t.archiveInfo.buyType||"",isMortgage:t.archiveInfo.isMortgage,provinceId:t.archiveInfo.provinceId||"",cityId:t.archiveInfo.cityId?t.archiveInfo.cityId:t.archiveInfo.cityName,regionId:t.archiveInfo.regionId||"",buyQuota:t.archiveInfo.buyQuota},t.intentionArchive=[],t.intentionArchiveOptions=[],t.archiveInfo.intentionInfo.forEach(function(i,s){t.intentionArchive.push({id:i.id,areaId:i.areaId&&i.areaId.toString(),brandId:i.brandId||"",carSeriesId:i.carSeriesId||"",modelId:i.modelId?i.modelId:i.modelName,fromTopId:i.fromTopId||"",fromSecondId:i.fromSecondId||"",clueId:i.clueId&&parseInt(i.clueId)}),t.intentionArchiveOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]}),t.intentionArchive[s].areaId&&t.getBrandList(t.intentionArchive[s].areaId,1,s),t.intentionArchive[s].brandId&&t.changeBrand(1,s,"noclear"),t.intentionArchive[s].carSeriesId&&t.changeSeries(1,s,"noclear"),setTimeout(function(){t.intentionArchive.forEach(function(e,i){e.fromTopId&&t.sourceChange(i,"noclear")})},0),t.handleAreaIdHasSelect(),e&&t.getCitys()}),t.ctime=(new Date).getTime(),t.time=(new Date).getTime(),t.addFollowKey=(new Date).getTime()},!0)}).catch(function(e){t.$store.commit("closeLoading")})},getFollowForm:function(){var t=this;u.getFollowForm({}).then(function(e){t.$handleResponse(e,function(e){console.log("潜客跟进 - 获取页面初始数据:",e),t.followFormData=e,t.clueFromOptions=e.clueFrom,t.buyTypeOptions=e.buyType,t.areaListOptions=e.buyType},!0)}).catch(function(e){t.$store.commit("closeLoading")})},getAreaList:function(){var t=this;this.$fetch.common.commonAreaList({}).then(function(e){t.$handleResponse(e,function(e){t.areaList=e,t.$forceUpdate()},!0)}).catch(function(e){t.$store.commit("closeLoading")})},setExtendDataIdx:function(t){this.extendDataIdx=t,this.competeModels=this.catchExtendData[this.extendDataIdx].competeModel},addIntentionInfoFn:function(t){this.getFollowClue()},handlePrev:function(){var t=this;if(this.isSaveFlag){var e=this.followPage.prev;this.handleData(e)}else this.$confirm("您当前的操作未保存，是否要进行上一条操作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.followPage.prev;t.handleData(e,!1)}).catch(function(t){})},handleNext:function(){var t=this;if(this.isSaveFlag){var e=this.followPage.next;this.handleData(e)}else this.$confirm("您当前的操作未保存，是否要进行下一条操作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.followPage.next;t.handleData(e,!1)}).catch(function(t){})},handleData:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.clueId&&t.userId?(this.$router.replace({path:"/_empty",query:{back:this.$route.query.back,total:this.$route.query.total,sort:this.$route.query.sort}}),this.$router.replace({path:"/work/cluesDeal",query:{back:this.$route.query.back,total:e?this.$route.query.total-1:this.$route.query.total,sort:this.$route.query.sort,id:t.clueId,userId:t.userId}}),this.getFollowClue(),this.key=(new Date).getTime()):(this.$message({message:"暂无需处理的线索",type:"warning",showClose:!0}),this.$router.replace({path:"/work"}))},addStroeAndCar:function(){this.customers.nickname?this.customers.gender?this.customers.tel?(this.intentionArchive.push({areaId:"",brandId:"",carSeriesId:"",modelId:"",fromTopId:this.intentionArchive[0].fromTopId,fromSecondId:this.intentionArchive[0].fromSecondId}),this.intentionArchiveOptions.push({brandOptions:[],seriesOptions:[],modelOptions:[]})):this.$message.error("请填写线索号码"):this.$message.error("请填写性别"):this.$message.error("请填写线索姓名")},clearCar:function(t){this.intentionArchive.splice(t,1),this.intentionArchiveOptions.splice(t,1),this.handleAreaIdHasSelect(),this.catchIntentionInfo.splice(t,1),this.catchExtendData.splice(t,1),this.extendDataIdx==t&&(this.extendDataIdx=0)},handleAreaIdHasSelect:function(){var t=this;this.areaIdHasSelect=[],this.intentionArchive.forEach(function(e){t.areaIdHasSelect.push(e.areaId)})},getCitys:function(){var t=this;this.$fetch.work.getRegin({}).then(function(e){t.$store.commit("closeLoading"),t.$handleResponse(e,function(e){t.address=e,t.address.forEach(function(e){t.customers.provinceId==e.id&&(t.sheng=e,t.shiAddress=e.children,e.children.forEach(function(e){t.customers.cityId==e.id&&(t.shi=e,t.quAddress=e.children,e.children.forEach(function(e){t.customers.regionId==e.id&&(t.qu=e)}))}))})},!0)}).catch(function(e){t.$store.commit("closeLoading")})},changeSheng:function(){this.customers.cityId="",this.customers.regionId="",this.shiAddress=[],this.quAddress=[];var t=!0,e=!1,i=void 0;try{for(var s,o=a()(this.address);!(t=(s=o.next()).done);t=!0){var n=s.value;n.id==this.customers.provinceId&&(this.shiAddress=n.children)}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}},changeShi:function(){this.customers.regionId="",this.quAddress=[];var t=!0,e=!1,i=void 0;try{for(var s,o=a()(this.shiAddress);!(t=(s=o.next()).done);t=!0){var n=s.value;n.id==this.customers.cityId&&(this.quAddress=n.children)}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}},changeQu:function(){},sourceChange:function(t,e){e||(this.intentionArchive[t].fromSecondId="");var i=!0,s=!1,o=void 0;try{for(var n,l=a()(this.clueFromOptions);!(i=(n=l.next()).done);i=!0){var c=n.value;c.id==this.intentionArchive[t].fromTopId&&(this.source_second=c.children||[],0==this.source_second.length&&this.intentionArchive[t].modelId&&this.addIntentionInfo(this.intentionArchive,t))}}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}},sourceSecondChange:function(t){this.$forceUpdate(),this.intentionArchive[t].modelId&&this.addIntentionInfo(this.intentionArchive,t)},areaIdChange:function(t,e){this.handleAreaIdHasSelect(),1==t&&(this.intentionArchive[e].brandId="",this.intentionArchive[e].carSeriesId="",this.intentionArchive[e].modelId="",this.intentionArchiveOptions[e].brandOptions=[],this.intentionArchiveOptions[e].seriesOptions=[],this.intentionArchiveOptions[e].modelOptions=[],this.getBrandList(this.intentionArchive[e].areaId,t,e))},getBrandList:function(t,e,i){var s=this;this.$fetch.common.carBrand({areaId:t},!1).then(function(t){s.$handleResponse(t,function(t){s.intentionArchiveOptions[i].brandOptions=s.$hasArrContent(t)?t:[]},!1)})},changeBrand:function(t,e,i){var s=this;1==t&&(i||(this.intentionArchive[e].carSeriesId="",this.intentionArchive[e].modelId="",this.intentionArchiveOptions[e].seriesOptions=[],this.intentionArchiveOptions[e].modelOptions=[]),this.$fetch.common.carSeries({brandId:this.intentionArchive[e].brandId},!1).then(function(t){s.$handleResponse(t,function(t){s.intentionArchiveOptions[e].seriesOptions=s.$hasArrContent(t)?t:[]},!1)}))},changeSeries:function(t,e,i){var s=this;1==t&&(i||(this.intentionArchive[e].modelId="",this.intentionArchiveOptions[e].modelOptions=[]),this.$fetch.common.carModel({seriesId:this.intentionArchive[e].carSeriesId},!1).then(function(t){s.intentionArchiveOptions[e].modelOptions=s.$hasArrContent(t.data.data)?t.data.data:[]}))},changeModel:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments[1];arguments[2];this.$forceUpdate(),this.intentionArchive[t].fromSecondId&&this.addIntentionInfo(this.intentionArchive,t)},addIntentionInfo:function(t,e){var i=this,s=t[e];s.userId=this.$route.query.userId,"customerFollow"==this.type?s.intentionId=this.$route.query.id:s.clueId=this.$route.query.id,s.tel=this.customers.tel,s.nickname=this.customers.nickname,s.gender=this.customers.gender,u.addIntentionInfo(s).then(function(t){i.$handleResponse(t,function(t){i.catchIntentionInfo[e]&&i.catchIntentionInfo[e].extend?i.catchIntentionInfo[e]=t:i.catchIntentionInfo.push(t),i.catchIntentionInfo.forEach(function(t){i.catchExtendData.push(t.extend)}),i.competeModels=i.catchExtendData[i.extendDataIdx].competeModel,i.ctime=(new Date).getTime()},!0)}).catch(function(t){i.$store.commit("closeLoading")})}},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},beforeDestroy:function(){},destroyed:function(){console.log("destroyed");document.getElementById("app")}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{key:t.key,staticClass:"clues-deal-page"},[s("div",{staticClass:"clues-deal-top"},[s("div",{staticClass:"clues-deal-title"},[s("div",{staticClass:"go-back"},[s("img",{attrs:{src:i("Lo9G"),alt:""},on:{click:function(e){return t.goBack()}}})]),t._v(" "),s("div",{staticClass:"clues-deal-tools"},[s("div",{staticClass:"dialog-title-left"},[s("span",{staticClass:"dialog-title-bt dialog-title-text"},[t._v("线索处理"),t.$route.query.total&&t.$route.query.total>0?s("span",[t._v("("+t._s(t.$route.query.total)+")")]):t._e()]),t._v(" "),s("span",{staticClass:"tools-line"}),t._v(" "),s("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.archiveInfo.nickName))]),t._v(" "),s("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.archiveInfo.tel))]),t._v(" "),s("span",{staticClass:"tools-line"}),t._v(" "),s("div",{staticClass:"dialog-title-right"},[s("el-button",{staticClass:"plain-btn-style",attrs:{size:"mini",round:"",plain:""},on:{click:function(e){return t.invalidClue()}}},[s("img",{staticClass:"_img",attrs:{src:i("aKCq"),alt:""}}),t._v(" 无效线索\n                    ")]),t._v(" "),s("el-button",{staticClass:"plain-btn-style",attrs:{size:"mini",round:"",plain:""},on:{click:function(e){return t.transferClue()}}},[s("img",{staticClass:"_img",attrs:{src:i("5ZCh"),alt:""}}),t._v(" 线索转移\n                    ")]),t._v(" "),s("el-button",{staticClass:"plain-btn-style",attrs:{size:"mini",round:"",plain:""},on:{click:function(e){return t.contactLater()}}},[s("img",{staticClass:"_img",attrs:{src:i("ULBH"),alt:""}}),t._v(" 稍后联系\n                    ")])],1)]),t._v(" "),"manage"!=t.loginType?s("div",{staticClass:"dialog-title-right"},["cticloud"==t.sdkType?s("CallOutTempTR",{attrs:{tel:t.archiveInfo.tel,dccGroupId:t.archiveInfo.dccGroupId}}):t._e(),t._v(" "),"RL"==t.sdkType?s("CallOutTempRL",{attrs:{tel:t.archiveInfo.tel,dccGroupId:t.archiveInfo.dccGroupId}}):t._e()],1):t._e()])]),t._v(" "),s("div",{staticClass:"call-dialog-center"},[s("el-row",{staticStyle:{height:"100%"},attrs:{gutter:22}},[s("el-col",{staticClass:"padding0 flex-box-col flex-box-col-1",attrs:{span:6}},[s("div",{staticClass:"flex-box-col-1-bottom"},[t.openTask&&t.openTask.length>0?s("div",{staticClass:"dialog-center-temp open-task"},[s("div",{staticClass:"lt-title"},[t._v("开口任务")]),t._v(" "),s("div",{staticClass:"lt-content"},[t.openTask?s("OpenTask",{ref:"openTaskRef",attrs:{data:t.openTask}}):t._e()],1)]):t._e(),t._v(" "),s("div",{staticClass:"dialog-center-temp clue-store"},[s("div",{staticClass:"lt-title"},[t._v("线索归属门店")]),t._v(" "),s("div",{staticClass:"lt-content"},[s("ClueStore",{key:t.ctime,attrs:{data:t.catchIntentionInfo},on:{setExtendDataIdx:t.setExtendDataIdx}})],1)])]),t._v(" "),s("div",{staticClass:"dialog-center-temp clue-em"},[s("div",{staticClass:"lt-title"},[t._v("线索增强")]),t._v(" "),s("div",{staticClass:"lt-content"},[t.catchExtendData?s("ClueEm",{attrs:{data:t.catchExtendData,extendDataIdx:t.extendDataIdx}}):t._e()],1)])]),t._v(" "),s("el-col",{staticClass:"padding0 flex-box-col flex-box-col-2",attrs:{span:6}},[s("div",{staticClass:"dialog-center-temp customer-files"},[s("div",{staticClass:"lt-content"},[s("div",{staticClass:"customer-files-page"},[s("div",{staticClass:"lt-title"},[t._v("客户档案\n                              ")]),t._v(" "),s("div",{staticClass:"customer-files-content",class:{"customer-files-content-edit":t.editable}},[s("el-row",{staticClass:"customer-form",attrs:{gutter:22}},[s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                                        客户姓名\n                                        "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content",staticStyle:{display:"flex"}},[s("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入",size:"mini",maxlength:"20"},model:{value:t.customers.nickname,callback:function(e){t.$set(t.customers,"nickname",e)},expression:"customers.nickname"}}),t._v(" "),s("div",{staticClass:"width-sex"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},model:{value:t.customers.gender,callback:function(e){t.$set(t.customers,"gender",e)},expression:"customers.gender"}},t._l(t.genderOptions,function(e){return s("el-radio-button",{key:e.value,attrs:{size:"mini",label:e.value}},[t._v(t._s(e.label))])}),1)],1)],1):s("div",{staticClass:"grid-content grid-content-right",staticStyle:{display:"flex"}},[s("span",{staticStyle:{flex:"1"}},[t._v(t._s(t.customersView.nickName))]),t._v(" "),s("span",[t._v(t._s(t.customersView.gender))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                                        手机号码\n                                        "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-input",{attrs:{placeholder:"请输入",maxlength:"11",size:"mini"},model:{value:t.customers.tel,callback:function(e){t.$set(t.customers,"tel",e)},expression:"customers.tel"}})],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.tel))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                                        微信号\n                                        "),s("span",{staticClass:"mini-width5"})])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content",staticStyle:{display:"flex"}},[s("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入",size:"mini"},model:{value:t.customers.wechatNumber,callback:function(e){t.$set(t.customers,"wechatNumber",e)},expression:"customers.wechatNumber"}}),t._v(" "),s("el-checkbox",{staticStyle:{"line-height":"28px","padding-left":"10px"},model:{value:t.customers.wechatAdded,callback:function(e){t.$set(t.customers,"wechatAdded",e)},expression:"customers.wechatAdded"}},[t._v("已加微信")])],1):s("div",{staticClass:"grid-content grid-content-right",staticStyle:{display:"flex"}},[s("span",{staticStyle:{flex:"1"}},[t._v(t._s(t.customersView.wechatNumber))]),t._v(" "),1==t.customersView.wechatAdded?s("span",{staticClass:"wechat-add"},[s("i",{staticClass:"el-icon-circle-check"}),t._v(" 已加微信")]):t._e()])])],1)],1),t._v(" "),t._l(t.intentionArchive,function(e,a){return s("el-col",{key:a+"archive",staticClass:"m-b-10 store-and-car",class:{"store-and-car-oth":0!=a},attrs:{span:24}},[a>0&&a>t.archiveInfo.intentionInfo.length-1?s("div",{staticClass:"close-icon",on:{click:function(e){return t.clearCar(a)}}},[s("img",{attrs:{src:i("FzXW")}})]):t._e(),t._v(" "),s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("归属门店"+t._s(a+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:a<t.archiveInfo.intentionInfo.length,filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(e){return t.areaIdChange(1,a)}},model:{value:e.areaId,callback:function(i){t.$set(e,"areaId",i)},expression:"items.areaId"}},t._l(t.areaList,function(e){return s("el-option",{key:e.id,attrs:{label:e.title,value:e.id,disabled:t.areaIdHasSelect.indexOf(e.id)>-1}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.data.intentionInfo[a].areaName))])])])],1),t._v(" "),s("el-row",{staticClass:"rowmbottom10",staticStyle:{"margin-top":"10px"}},[s("el-tooltip",{attrs:{effect:"dark",placement:"top",content:"DCC需要根据文本从车型库选取对应的意向车型"}},[t.editable&&isNaN(e.modelId)?s("div",{staticClass:"car-ques-icon"},[s("i",{staticClass:"el-icon-question"})]):t._e()]),t._v(" "),s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("意向车型"+t._s(a+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{class:""==e.brandId?"c-placeholder":"",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeBrand(1,a)}},model:{value:e.brandId,callback:function(i){t.$set(e,"brandId",i)},expression:"items.brandId"}},t._l(t.intentionArchiveOptions[a].brandOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==e.carSeriesId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeSeries(1,a)}},model:{value:e.carSeriesId,callback:function(i){t.$set(e,"carSeriesId",i)},expression:"items.carSeriesId"}},t._l(t.intentionArchiveOptions[a].seriesOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==e.modelId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"请选择",filterable:"",size:"mini"},on:{change:function(e){return t.changeModel(!0,a,"edit")}},model:{value:e.modelId,callback:function(i){t.$set(e,"modelId",i)},expression:"items.modelId"}},t._l(t.intentionArchiveOptions[a].modelOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.data.intentionInfo[a].modelName))])])])],1),t._v(" "),s("el-row",{staticClass:"rowmbottom10",staticStyle:{"margin-top":"10px"}},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("客户来源"+t._s(a+1)),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:a<t.archiveInfo.intentionInfo.length,placeholder:"一级来源",filterable:"",size:"mini"},on:{change:function(e){return t.sourceChange(a)}},model:{value:e.fromTopId,callback:function(i){t.$set(e,"fromTopId",i)},expression:"items.fromTopId"}},t._l(t.clueFromOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),s("el-select",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{disabled:a<t.archiveInfo.intentionInfo.length,placeholder:"二级来源",filterable:"",size:"mini"},on:{change:function(e){return t.sourceSecondChange(a)}},model:{value:e.fromSecondId,callback:function(i){t.$set(e,"fromSecondId",i)},expression:"items.fromSecondId"}},t._l(t.source_second,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.data.intentionInfo[a].fromTopText)+" - "+t._s(t.data.intentionInfo[a].fromSecondText))])])])],1)],1)}),t._v(" "),t.editable?s("el-col",{staticClass:"m-b-10 store-and-car-btn",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left",staticStyle:{width:"88.5px",height:"1px"}})]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[s("div",{staticClass:"grid-content"},[s("div",{},[s("el-button",{attrs:{gutter:24,size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.addStroeAndCar}},[t._v("新增门店和车型")])],1)])])],1)],1):t._e(),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                                            购车区域\n                                            "),s("span",{staticClass:"red"},[t._v("*")])])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{class:""==t.customers.provinceId?"c-placeholder":"",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"省",size:"mini"},on:{change:t.changeSheng},model:{value:t.customers.provinceId,callback:function(e){t.$set(t.customers,"provinceId",e)},expression:"customers.provinceId"}},t._l(t.address,function(t){return s("el-option",{key:t.id,attrs:{label:t.regionName,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==t.customers.cityId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"市",filterable:"",size:"mini"},on:{change:t.changeShi},model:{value:t.customers.cityId,callback:function(e){t.$set(t.customers,"cityId",e)},expression:"customers.cityId"}},t._l(t.shiAddress,function(t){return s("el-option",{key:t.id,attrs:{label:t.regionName,value:t.id}})}),1),t._v(" "),s("el-select",{class:""==t.customers.regionId?"c-placeholder":"",staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"区",filterable:"",size:"mini"},on:{change:t.changeQu},model:{value:t.customers.regionId,callback:function(e){t.$set(t.customers,"regionId",e)},expression:"customers.regionId"}},t._l(t.quAddress,function(t){return s("el-option",{key:t.id,attrs:{label:t.regionName,value:t.id}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.provinceName)+"-"+t._s(t.customersView.cityName)+"-"+t._s(t.customersView.regionName))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                                        购车指标\n                                        "),s("span",{staticClass:"mini-width5"})])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},model:{value:t.customers.buyQuota,callback:function(e){t.$set(t.customers,"buyQuota",e)},expression:"customers.buyQuota"}},t._l(t.buyQuotaOptions,function(e){return s("el-radio-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.buyQuotaText))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                                        购车类型\n                                        "),s("span",{staticClass:"mini-width5"})])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{gutter:24,filterable:"",placeholder:"请选择",size:"mini"},model:{value:t.customers.buyType,callback:function(e){t.$set(t.customers,"buyType",e)},expression:"customers.buyType"}},t._l(t.buyTypeOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.buyTypeText))])])])],1)],1),t._v(" "),s("el-col",{staticClass:"m-b-10",attrs:{span:24}},[s("el-row",{staticClass:"rowmbottom10"},[s("el-col",{staticClass:"width-75"},[s("div",{staticClass:"grid-content-left"},[t._v("\n                                        是否贷款\n                                        "),s("span",{staticClass:"mini-width5"})])]),t._v(" "),s("el-col",{staticClass:"width-right-cont"},[t.editable?s("div",{staticClass:"grid-content"},[s("el-radio-group",{staticClass:"radio-button-level",staticStyle:{width:"100%"},attrs:{gutter:24,size:"mini"},model:{value:t.customers.isMortgage,callback:function(e){t.$set(t.customers,"isMortgage",e)},expression:"customers.isMortgage"}},t._l(t.isMortgageOptions,function(e){return s("el-radio-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1):s("div",{staticClass:"grid-content grid-content-right"},[s("span",[t._v(t._s(t.customersView.isMortgageText))])])])],1)],1)],2)],1)])])])]),t._v(" "),s("el-col",{staticClass:"padding0 flex-box-col flex-box-col-3",attrs:{span:6}},[s("div",{staticClass:"dialog-center-temp add-follow"},[s("div",{staticClass:"lt-title"},[t._v("添加跟进")]),t._v(" "),s("div",{staticClass:"lt-content"},[s("AddFollow",{key:t.addFollowKey,ref:"followRef",attrs:{type:t.followType,followFormData:t.followFormData,intentionInfo:t.catchIntentionInfo}})],1)]),t._v(" "),s("div",{staticClass:"dialog-center-temp follow-record"},[s("div",{staticClass:"lt-content scroll-area"},[s("FollowRecord",{key:t.time,attrs:{type:t.followType,followFormData:t.followFormData}})],1)])]),t._v(" "),s("el-col",{staticClass:"padding0 knowledge-base flex-box-col flex-box-col-4",attrs:{span:6}},[s("div",{staticClass:"dialog-center-temp knowledge-base"},[s("div",{staticClass:"lt-title"},[t._v("知识库")]),t._v(" "),s("div",{staticClass:"lt-content"},[t.competeModels?s("KnowledgeBase",{key:t.ctime,attrs:{competeModels:t.competeModels,archiveModels:t.catchIntentionInfo,followType:t.followType,extendDataIdx:t.extendDataIdx}}):t._e()],1)])])],1)],1)]),t._v(" "),s("div",{staticClass:"clues-deal-footer"},[t.$route.query.total&&t.$route.query.total>1?s("el-button",{staticClass:"w-90 plain-btn-style",attrs:{size:"medium",type:"",round:""},on:{click:function(e){return t.handlePrev()}}},[t._v("上一条")]):t._e(),t._v(" "),t.$route.query.total&&t.$route.query.total>1?s("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:function(e){return t.save("next")}}},[t._v("保存并进入下一条")]):s("el-button",{staticClass:"w-90",attrs:{size:"medium",type:"primary",round:""},on:{click:function(e){return t.save()}}},[t._v("保存")]),t._v(" "),t.$route.query.total&&t.$route.query.total>1?s("el-button",{staticClass:"w-90 plain-btn-style",attrs:{size:"medium",type:"",round:""},on:{click:function(e){return t.handleNext()}}},[t._v("下一条")]):t._e()],1)]),t._v(" "),t.dialogVisibleInvalidClue?s("InvalidClueDialog",{on:{invalidClueCloseFn:t.invalidClueCloseFn}}):t._e(),t._v(" "),t.dialogVisibleTransferClue?s("TransferClueDialog",{attrs:{type:t.followType},on:{transferClueCloseFn:t.transferClueCloseFn}}):t._e(),t._v(" "),t.dialogVisibleContactLater?s("ContactLaterDialog",{on:{contactLaterCloseFn:t.contactLaterCloseFn}}):t._e()],1)},staticRenderFns:[]};var R=i("VU/8")(F,D,!1,function(t){i("ca//")},"data-v-65f920d7",null);e.default=R.exports},sWWH:function(t,e){},wmRa:function(t,e,i){"use strict";var s=i("Gu7T"),a=i.n(s),o=(i("/Pc9"),i("kZ4T")),n=i("Y1jt"),l=i("9Ak7"),c={components:{TabsScrm:o.a,FollowRecord:n.a,AreaFollowRecord:l.a},props:["type","areaArchive","followFormData"],data:function(){return{currentTodo:"0",todoTabs:[],search:"",recordList:[],recordPage:{totalCount:0,page:1,pageSize:10,totalPage:1},recordDom:null,followAction:[],areaRecordList:[]}},created:function(){this.followAction=this.followFormData&&this.followFormData.followAction,"cluesDeal"==this.type||(this.todoTabs=[{_id:"0",intentionId:this.$route.query.id,areaName:"DCC档案"}],this.areaArchive&&(this.areaArchive.forEach(function(t,e){t._id=(e+1).toString()}),this.todoTabs=this.todoTabs.concat(this.areaArchive))),this.$route.query.id&&this.getFollowList("init")},mounted:function(){this.recordDom=document.querySelector(".follow-record-list"),this.recordDom.addEventListener("scroll",this.onRecordDomScroll,!0)},methods:{onRecordDomScroll:function(){var t=this.recordDom.scrollTop,e=this.recordDom.clientHeight,i=this.recordDom.scrollHeight;if(i>e&&t+e===i){if(this.recordPage.page>=this.recordPage.totalPage)return;3==this.recordPage.pageSize?this.recordPage.page=1:this.recordPage.page++,this.recordPage.pageSize=10,this.getFollowList()}},handleTodoTabs:function(t,e){if(this.currentTodo=t.index,"0"==this.currentTodo)this.getFollowList("init");else if("0"!=this.currentTodo){var i=this.todoTabs[this.currentTodo]&&this.todoTabs[this.currentTodo].id;this.getAreaFollowList(i)}},handleClick:function(t){console.log(t.name,t.index)},getFollowList:function(t){var e=this;"init"==t&&(this.recordList=[],this.recordPage.page=1,this.recordPage.pageSize=3);var i=this.recordPage,s=i.page,o=i.pageSize,n={typeId:"cluesDeal"==this.type?2:1,id:"cluesDeal"==this.type?this.$route.query.id:this.todoTabs[this.currentTodo].intentionId,page:s,pageSize:o,followAction:this.search};this.$fetch.common.followListByType(n).then(function(t){e.$handleResponse(t,function(t){if(t){var i=t.list,s=t.page;1==e.recordPage.page&&(e.recordList=[]),i.length>0&&(e.recordList=[].concat(a()(e.recordList),a()(i))),e.recordPage.totalCount=s.totalCount,e.recordPage.totalPage=s.totalPage}},!0)}).catch(function(t){e.$store.commit("closeLoading")})},getAreaFollowList:function(t){var e=this;this.$fetch.business.archiveAreaDetail({id:t}).then(function(t){e.$handleResponse(t,function(t){e.areaRecordList=t.follows?t.follows:[]},!0)}).catch(function(){e.$store.commit("closeLoading")})}},beforeDestroy:function(){this.recordDom.removeEventListener("scroll",this.onRecordDomScroll,!0)}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"follow-record-page follow-record"},["customerFollow"==t.type?i("div",[i("el-tabs",{staticClass:"todo-tabs",class:"cook"+t.currentTodo,attrs:{type:"card"},on:{"tab-click":t.handleTodoTabs},model:{value:t.currentTodo,callback:function(e){t.currentTodo=e},expression:"currentTodo"}},t._l(t.todoTabs,function(e,s){return i("el-tab-pane",{key:e._id,attrs:{name:e._id}},[i("div",{class:{current:t.currentTodo==s},attrs:{slot:"label"},slot:"label"},[i("div",{staticClass:"tab-label-style"},[i("p",[t._v(t._s(e.areaName))])])])])}),1)],1):t._e(),t._v(" "),i("div",{staticClass:"lt-title"},[t._v("跟进记录\n    "),"cluesDeal"==t.type?i("router-link",{staticClass:"to-view",attrs:{tag:"a",target:"_blank",to:{path:"/business/clue/detail",query:{id:this.$route.query.id}}}},[t._v("查看全部")]):t._e(),t._v(" "),"customerFollow"==t.type?i("router-link",{staticClass:"to-view",attrs:{tag:"a",target:"_blank",to:{path:"/business/potential/detail",query:{id:this.$route.query.id}}}},[t._v("查看全部")]):t._e()],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==t.currentTodo,expression:"currentTodo=='0'"}],staticClass:"follow-record-search"},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"按事件标签筛选",size:"mini",clearable:""},on:{change:function(e){return t.getFollowList("init")}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},t._l(t.followAction,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),i("div",{staticClass:"follow-record-list"},[t._e(),t._v(" "),i("follow-record",{directives:[{name:"show",rawName:"v-show",value:"0"==t.currentTodo,expression:"currentTodo=='0'"}],staticClass:"p-10",attrs:{"record-list":t.recordList}}),t._v(" "),i("area-follow-record",{directives:[{name:"show",rawName:"v-show",value:"0"!=t.currentTodo,expression:"currentTodo!='0'"}],staticClass:"p-10",attrs:{list:t.areaRecordList}})],1)])},staticRenderFns:[]};var d=i("VU/8")(c,r,!1,function(t){i("Zlpi")},"data-v-3c6816f4",null);e.a=d.exports}});
//# sourceMappingURL=7.13e2f976f6133114d1a5.js.map