{"version":3,"sources":["webpack:///src/pages/call-center/record/CallFollow.vue","webpack:///./src/pages/call-center/record/CallFollow.vue?611d","webpack:///./src/pages/call-center/record/CallFollow.vue","webpack:///src/pages/call-center/record/CallRecord.vue","webpack:///./src/pages/call-center/record/CallRecord.vue?ce11","webpack:///./src/pages/call-center/record/CallRecord.vue"],"names":["CallFollow","components","FollowRecord","props","row","type","Object","default","data","dialogVisible","recordList","followPage","totalCount","page","pageSize","totalPage","created","this","getFollowList","methods","cancel","$emit","reset","_this","followList","_followPage","params","typeId","dataType","id","dataId","$fetch","common","followListByType","then","res","$handleResponse","list","length","concat","toConsumableArray_default","catch","$store","commit","handleFollowScroll","record_CallFollow","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","visible","width","append-to-body","close-on-click-modal","before-close","on","update:visible","$event","record-list","scrollEvent","event-scroll","staticRenderFns","call_center_record_CallFollow","__webpack_require__","normalizeComponent","ssrContext","CallRecord","SearchBar","SearchCol","DataTable","table","AudioPlayer","ExportLog","CommonExport","mixins","SearchMixins","search","dataTable","showFollow","showAudio","voiceFile","initData","queryData","initExport","initSearch","initTable","getDccList","exportConfig","fileName","ext","idName","select","taskType","url","other","label","currentVal","isAll","isAllTitle","selectOptions","optionLabel","optionValue","dccId","result","time","dccGroup","tr","prop","show","tooltip","currentPage","border","hasSelect","hasExpand","hasFirstPagination","value","keyword","placeholder","displayCol","parma","commonDccList","$hasArrContent","arr","forEach","item","dccList","getParams","_dataTable$page","_search","callType","callResult","dateStart","dateEnd","dccGroupId","_this2","that","assign_default","callCenter","dccCallList","seeFollow","showAudioFn","record_CallRecord","size","clear","find","info","filterable","_v","range-separator","start-placeholder","end-placeholder","value-format","ref","searchTable","onHandleSelectionChange","handleSelectionChange","scopedSlots","_u","key","fn","plain","round","disabled","obj","click","slot","_e","CallRecord_Component","CallRecord_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/20.5ab717a608784ff5996e.js","sourcesContent":["<template>\r\n    <el-dialog\r\n        title=\"跟进记录\"\r\n        class=\"right-side-dialog call-follow-dialog\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"450px\"\r\n        append-to-body\r\n        :close-on-click-modal=\"false\"\r\n        :before-close=\"cancel\">\r\n\r\n        <follow-record \r\n            class=\"m-t-20 p-20 clue-follow-record reset-scrollbar\" \r\n            :record-list=\"recordList\" \r\n            :scrollEvent=\"true\" \r\n            @event-scroll=\"handleFollowScroll\"\r\n        ></follow-record>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport FollowRecord from '@/components/follow-record/FollowRecord'\r\nexport default {\r\n    components:{\r\n       FollowRecord \r\n    },\r\n    props:{\r\n        row: {\r\n            type: Object,\r\n            default: ()=>{ return {}}\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            dialogVisible:true,\r\n            recordList: [], // 跟进列表\r\n            followPage: {\r\n                totalCount: 0,\r\n                page: 1,\r\n                pageSize: 10,\r\n                totalPage: 1\r\n            },\r\n        }\r\n    },\r\n    created(){\r\n        this.getFollowList('init'); \r\n    },\r\n    methods:{\r\n        cancel(){\r\n            this.$emit('cancel')\r\n        },\r\n        getFollowList(reset){\r\n            if(reset == 'init') {\r\n                this.followList = [];\r\n                this.followPage.page = 1;\r\n            }\r\n            const { page, pageSize } = this.followPage;\r\n            let params = {\r\n                typeId: this.row.dataType,\r\n                id: this.row.dataId,\r\n                page,\r\n                pageSize\r\n            }\r\n            this.$fetch.common.followListByType(params).then((res)=>{\r\n                this.$handleResponse(res, data=>{\r\n                    const { list, page } = data;\r\n                    if (list && list.length > 0) {\r\n                        this.recordList = [...this.recordList, ...list];\r\n                    }\r\n                    this.followPage.totalCount = page.totalCount;\r\n                    this.followPage.totalPage = page.totalPage;\r\n                },true);\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        handleFollowScroll() {\r\n            // 请求加载更多\r\n            if (this.followPage.page >= this.followPage.totalPage) {\r\n                return;\r\n            }\r\n            this.followPage.page++;\r\n            this.getFollowList();\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.right-side-dialog /deep/.el-dialog__body {\r\n    padding: 5px 20px 20px;\r\n}\r\n\r\n.clue-follow-record {\r\n    max-height: 780px;\r\n    overflow-y: auto;\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/call-center/record/CallFollow.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"right-side-dialog call-follow-dialog\",attrs:{\"title\":\"跟进记录\",\"visible\":_vm.dialogVisible,\"width\":\"450px\",\"append-to-body\":\"\",\"close-on-click-modal\":false,\"before-close\":_vm.cancel},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('follow-record',{staticClass:\"m-t-20 p-20 clue-follow-record reset-scrollbar\",attrs:{\"record-list\":_vm.recordList,\"scrollEvent\":true},on:{\"event-scroll\":_vm.handleFollowScroll}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f504890\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/call-center/record/CallFollow.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f504890\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CallFollow.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CallFollow.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CallFollow.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f504890\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CallFollow.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5f504890\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/call-center/record/CallFollow.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"call-record-page m-20 common-box\">\r\n        <search-bar size=\"medium\" class=\"m-t-10 p-20\" @clear=\"clear\" @find=\"find\">\r\n            <div class=\"search-flex\">\r\n                <!-- 用search-bar包裹的话，需要clearfix清除里面的浮动，-->\r\n                <!-- search-col通过search.key来判断是哪个选项；search-col用for循环，需要自定义的可以通过 search.key == index 来确定自定义的那一列，如<search-col><div slot=\"custom\" v-if=\"search.key==index\"></div></search-col>-->\r\n                <search-col :info=\"search.list[search.dccId]\" filterable></search-col>\r\n                <search-col :info=\"search.list[search.type]\"></search-col>\r\n                <search-col :info=\"search.list[search.result]\"></search-col>\r\n                <search-col :info=\"search.list[search.time]\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" value-format=\"yyyy-MM-dd\"></search-col>\r\n                <search-col :info=\"search.list[search.dccGroup]\" filterable></search-col>\r\n            </div>\r\n        </search-bar>\r\n\r\n        <div class=\"p-20\">\r\n            <data-table ref=\"DataTableRef\" :table=\"dataTable\" @searchTable='searchTable' @onHandleSelectionChange=\"handleSelectionChange\"> \r\n                <div slot=\"buttons\">              \r\n                    <!--导出-->\r\n                    <!-- <common-export :config=\"exportConfig\" plain></common-export> -->\r\n\r\n                    <!-- 导出日志 -->\r\n                    <!-- <export-log class=\"m-l-10\"></export-log> -->\r\n                </div>   \r\n                <template slot-scope=\"props\" slot=\"caozuo\">\r\n                    <el-button class=\"blue_font_white_bg\"  plain round size=\"mini\" @click=\"seeFollow(props.obj.row)\" :disabled=\"props.obj.row.dataId==0\">查看跟进</el-button>\r\n                    <el-button class=\"blue_font_white_bg\"  plain round size=\"mini\" :disabled=\"props.obj.row.voiceFile?false:true\" @click=\"showAudioFn(props.obj.row)\">录音</el-button>\r\n                </template> \r\n            </data-table>\r\n        </div>\r\n\r\n        <!-- 查看跟进 -->\r\n        <call-follow v-if=\"showFollow\" :row=\"row\" @cancel=\"showFollow=false\"></call-follow>\r\n\r\n        <!-- 查看录音 -->\r\n        <audio-player v-if=\"showAudio\" :url=\"voiceFile\" @cancel=\"showAudio=false\"></audio-player>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchBar from '@/components/SearchBar';\r\nimport SearchCol from '@/components/form/SearchCol';\r\nimport DataTable from \"@/components/dataTable/table\";\r\nimport CallFollow from './CallFollow';\r\nimport AudioPlayer from \"@/components/AudioPlayer\";\r\nimport ExportLog from '@/components/export/ExportLog';\r\nimport CommonExport from '@/components/export/CommonExport'\r\nimport SearchMixins from '@/pages/mixins/SearchMixins'\r\nexport default {\r\n    components: {\r\n        SearchBar,\r\n        SearchCol,\r\n        DataTable,\r\n        CallFollow,\r\n        AudioPlayer,\r\n        ExportLog,\r\n        CommonExport\r\n    },\r\n    mixins: [SearchMixins],\r\n    data(){\r\n        return{\r\n            search: {}, // 搜索列表的数据\r\n            dataTable: {}, // 表格数据\r\n            showFollow: false,\r\n            showAudio: false,\r\n            voiceFile: '',\r\n        }\r\n    },\r\n    created(){\r\n        this.initData();\r\n        this.queryData();\r\n    },\r\n    methods: {\r\n        initData(){\r\n            this.row={};\r\n            this.initExport();\r\n            this.initSearch(); // 初始化搜索列\r\n            this.initTable();\r\n\r\n            this.getDccList();\r\n        },\r\n        initExport(){\r\n            this.exportConfig = {\r\n                fileName: \"通话记录导出\",  // 导出文件名\r\n                ext: \"csv\",    // 导出文件格式\r\n                idName: \"id\",  // 取对象的那个字段的值\r\n                select: [],    // 多选的时候导出\r\n                taskType: \"\",  // 任务的类型\r\n                url: \"business.exportClueExcel\",       // 接口路径\r\n                other: {},     // 其它等参数，比如分页，每页多少，或者其他筛选条件的参数\r\n            }\r\n        },\r\n        initSearch(){\r\n            // 使用key防止在数组中间插入一列后，只要改变key的下标值就可以\r\n            this.search = { \r\n                list: [\r\n                    {\r\n                        type: 'select', \r\n                        label: 'DCC邀约员', \r\n                        currentVal: '', \r\n                        isAll: true,\r\n                        isAllTitle: '全部',\r\n                        selectOptions:[], \r\n                        optionLabel:'dccName', \r\n                        optionValue:\"id\", \r\n                    },{\r\n                        type: 'select', \r\n                        label: '通话方式', \r\n                        currentVal: '', \r\n                        isAll: true,\r\n                        isAllTitle: '全部',\r\n                        selectOptions:[{'title': '呼出', 'id': 1},{'title': '呼入', 'id': 2}], \r\n                        optionLabel:'title', \r\n                        optionValue:\"id\", \r\n                    },{\r\n                        type: 'select', \r\n                        label: '通话结果', \r\n                        currentVal: '', \r\n                        isAll: true,\r\n                        isAllTitle: '全部',\r\n                        selectOptions:[{'title': '成功', 'id': 1},{'title': '失败', 'id': 2},{'title': '未接通', 'id': 3}], \r\n                        optionLabel:'title', \r\n                        optionValue:\"id\", \r\n                    },{\r\n                        type: 'datePicker', \r\n                        label: '通话时间', \r\n                        currentVal: '',  \r\n                    },{\r\n                        type: 'select', \r\n                        label: '坐席组', \r\n                        currentVal: '',\r\n                        isAll: true,\r\n                        isAllTitle: '全部', \r\n                        selectOptions:[], \r\n                        optionLabel:'dccGroupName', \r\n                        optionValue:\"id\", \r\n                    }\r\n                ],\r\n                dccId: 0, // dcc邀约员( 不用dcc字段可以clearSearch的时候不需要联动删除)\r\n                type: 1, // 通话方式\r\n                result: 2, // 通话结果\r\n                time: 3,  // 通话时间\r\n                dccGroup: 4, // 坐席组\r\n            }\r\n        },\r\n        initTable(){\r\n            this.dataTable = {\r\n                tr: [{\r\n                      id: '1',\r\n                      label: '操作',\r\n                      prop: 'caozuo',\r\n                      show:'template',\r\n                      width: '170',\r\n                    },{\r\n                      id: '2',\r\n                      label: 'DCC邀约员',\r\n                      prop: 'dccName',\r\n                      tooltip:true,\r\n                    },{\r\n                      id: '3',\r\n                      label: '坐席组',\r\n                      prop: 'dccGroupName',\r\n                      tooltip:true,\r\n                    },{\r\n                      id: '4',\r\n                      label: '通话时间',\r\n                      prop: 'createDate',\r\n                      tooltip:true,\r\n                    },{\r\n                      id: '5',\r\n                      label: '客户姓名',\r\n                      prop: 'customerName',\r\n                      tooltip:true,\r\n                    },{\r\n                      id: '6',\r\n                      label: '客户手机号',\r\n                      prop: 'customerTel',\r\n                      tooltip:true,\r\n                    },{\r\n                      id: '7',\r\n                      label: '通话方式',\r\n                      prop: 'callTypeTitle',\r\n                      tooltip:true,\r\n                    },{\r\n                      id: '8',\r\n                      label: '通过结果',\r\n                      prop: 'callResultTitle',\r\n                      tooltip:true,\r\n                    },{\r\n                      id: '9',\r\n                      label: '通话时长',\r\n                      prop: 'duration',\r\n                      tooltip:true,\r\n                    },\r\n                ],\r\n                data: [],\r\n                page: {\r\n                    totalCount: 0,\r\n                    pageSize: 20,\r\n                    currentPage: 1\r\n                },\r\n                border: false, // 是否带边框\r\n                hasSelect: true, //是否有复选框\r\n                hasExpand: false, //是否有收缩功能\r\n                hasFirstPagination: true, //是否有第一条分页条\r\n                search: {\r\n                    value:'',\r\n                    show: true,\r\n                    keyword: 'kwd', // 搜索的关注子\r\n                    url: \"callCenter.dccCallList\", //快捷搜索的方法名称:  模块.方法名\r\n                    width: \"300\", //快捷搜索输入框宽度  \r\n                    placeholder: \"客户名称、客户手机号\", //快捷搜索输入框提示文字\r\n                    displayCol: [\"customerName\",\"customerTel\"], //弹出需要显示的列\r\n                    parma: {\r\n                      id: \"\"\r\n                    }\r\n                },\r\n            }\r\n        },\r\n        getDccList(){ // DCC/组列表\r\n            this.$fetch.common.commonDccList({},false, false).then((res)=>{\r\n                this.$handleResponse(res, res=>{\r\n                    this.search.list[this.search.dccGroup].selectOptions = this.$hasArrContent(res)?res:[];\r\n                    let arr =[];\r\n                    if(this.$hasArrContent(res)){\r\n                        res.forEach((item)=>{\r\n                            if(this.$hasArrContent(item.dccList)){\r\n                                arr = arr.concat(item.dccList);\r\n                            }\r\n                        })\r\n                        this.search.list[this.search.dccId].selectOptions = arr;\r\n                    }\r\n                }, false);\r\n            })\r\n        },\r\n        getParams(){\r\n            const { currentPage, pageSize } = this.dataTable.page;\r\n            const { dccId, type, result,time, dccGroup, list } = this.search;\r\n            let params = {\r\n                dccId: list[dccId].currentVal,       // dcc邀约员\r\n                callType: list[type].currentVal,     // 通话方式\r\n                callResult: list[result].currentVal, // 通话结果\r\n                dateStart: list[time].currentVal && list[time].currentVal[0], // 通话时间\r\n                dateEnd: list[time].currentVal && list[time].currentVal[1],   // 通话时间\r\n                dccGroupId: list[dccGroup].currentVal,       // 坐席组\r\n                pageSize: pageSize,     // 每页数量\r\n                page: currentPage,          // 当前页\r\n            }\r\n            return params;\r\n        },\r\n        queryData(){\r\n            let that = this;\r\n            let params = this.getParams();\r\n            this.exportConfig.other = Object.assign({},params);  // 导出配置参数\r\n            this.$fetch.callCenter.dccCallList(params).then((res)=>{\r\n                this.$handleResponse(res, res=>{\r\n                    that.dataTable.data = res.list?res.list:[]; //表格所需数据\r\n                    that.dataTable.page = res.page?res.page:that.dataTable.page; //表格所需页面\r\n                },true);\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        seeFollow(row){\r\n            this.showFollow=true;\r\n            this.row = row;\r\n        },\r\n        showAudioFn(row){\r\n            this.showAudio=true;\r\n            this.voiceFile = row.voiceFile;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n\r\n<style>\r\n\r\n\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/call-center/record/CallRecord.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"call-record-page m-20 common-box\"},[_c('search-bar',{staticClass:\"m-t-10 p-20\",attrs:{\"size\":\"medium\"},on:{\"clear\":_vm.clear,\"find\":_vm.find}},[_c('div',{staticClass:\"search-flex\"},[_c('search-col',{attrs:{\"info\":_vm.search.list[_vm.search.dccId],\"filterable\":\"\"}}),_vm._v(\" \"),_c('search-col',{attrs:{\"info\":_vm.search.list[_vm.search.type]}}),_vm._v(\" \"),_c('search-col',{attrs:{\"info\":_vm.search.list[_vm.search.result]}}),_vm._v(\" \"),_c('search-col',{attrs:{\"info\":_vm.search.list[_vm.search.time],\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"value-format\":\"yyyy-MM-dd\"}}),_vm._v(\" \"),_c('search-col',{attrs:{\"info\":_vm.search.list[_vm.search.dccGroup],\"filterable\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"p-20\"},[_c('data-table',{ref:\"DataTableRef\",attrs:{\"table\":_vm.dataTable},on:{\"searchTable\":_vm.searchTable,\"onHandleSelectionChange\":_vm.handleSelectionChange},scopedSlots:_vm._u([{key:\"caozuo\",fn:function(props){return [_c('el-button',{staticClass:\"blue_font_white_bg\",attrs:{\"plain\":\"\",\"round\":\"\",\"size\":\"mini\",\"disabled\":props.obj.row.dataId==0},on:{\"click\":function($event){return _vm.seeFollow(props.obj.row)}}},[_vm._v(\"查看跟进\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"blue_font_white_bg\",attrs:{\"plain\":\"\",\"round\":\"\",\"size\":\"mini\",\"disabled\":props.obj.row.voiceFile?false:true},on:{\"click\":function($event){return _vm.showAudioFn(props.obj.row)}}},[_vm._v(\"录音\")])]}}])},[_c('div',{attrs:{\"slot\":\"buttons\"},slot:\"buttons\"})])],1),_vm._v(\" \"),(_vm.showFollow)?_c('call-follow',{attrs:{\"row\":_vm.row},on:{\"cancel\":function($event){_vm.showFollow=false}}}):_vm._e(),_vm._v(\" \"),(_vm.showAudio)?_c('audio-player',{attrs:{\"url\":_vm.voiceFile},on:{\"cancel\":function($event){_vm.showAudio=false}}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0e519f15\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/call-center/record/CallRecord.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e519f15\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CallRecord.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e519f15\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./CallRecord.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CallRecord.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CallRecord.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e519f15\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CallRecord.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0e519f15\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/call-center/record/CallRecord.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}