webpackJsonp([5],{U8P7:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("MvR/"),r=e("kfhN"),s={components:{BreadCrumb:a.a,ScrmFormItem:r.a},data:function(){return{type:"add",parentData:{},info:{name:"",id:""},transProps:{key:"id",label:"short_name"},dataAreas:[],selectedAreas:[],labelTitle:"子组织名称"}},created:function(){this.parentData=this.$route.query,"/setting/org-structure/edit"==this.$route.path&&(this.type="edit",this.labelTitle="当前组织名称",this.getDetialOrg(this.parentData.id)),this.getShopList()},methods:{cancel:function(){this.$router.push("/setting/org-structure")},getShopList:function(){var n=this,t={pagination:0},e="edit"==this.type?this.parentData.id:this.parentData.parentId;t.mode="edit"==this.type?"update":"add",this.$fetch.setting.queryOrgShopList(e,t).then(function(t){n.$handleResponse(t,function(t){n.dataAreas=t.areas&&t.areas.list},!0),"edit"==n.type&&n.getRightShop()}).catch(function(t){n.$store.commit("closeLoading")})},getRightShop:function(){var n=this,t={expand:"brands",orgId:this.parentData.id};this.$fetch.setting.queryAreasList(t).then(function(t){n.$handleResponse(t,function(t){n.$hasArrContent(t.list)&&t.list.forEach(function(t){n.selectedAreas.push(t.id),n.dataAreas.push(t)})},!0)}).catch(function(t){n.$store.commit("closeLoading")})},getDetialOrg:function(n){var t=this;this.$fetch.setting.orgInfo(n,{}).then(function(n){t.$handleResponse(n,function(n){t.info=n.org},!0)}).catch(function(n){t.$store.commit("closeLoading")})},addManager:function(){var n=this.getParams();n&&("add"==this.type?this.createFn(n):this.updateFn(n))},getParams:function(){var n=this.info,t=(n.areaIds,n.name),e={areaIds:this.selectedAreas,name:t,pid:this.parentData.parentId};return t?e:(this.$message.error("组织名称不能为空"),!1)},createFn:function(n){var t=this;this.$fetch.setting.orgCreate(n).then(function(n){t.$handleResponse(n,function(n){t.$message.success("新增成功"),t.$router.push("/setting/org-structure")},!0)}).catch(function(n){t.$store.commit("closeLoading")})},updateFn:function(n){var t=this;this.$fetch.setting.orgUpdate(this.parentData.id,n).then(function(n){t.$handleResponse(n,function(n){t.$message.success("更新成功"),t.$router.push("/setting/org-structure")},!0)}).catch(function(n){t.$store.commit("closeLoading")})},filterMethod:function(n){}}},i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"add-org-page m-20"},[e("bread-crumb"),n._v(" "),e("div",{staticClass:"common-box p-b-20 m-t-20"},[e("div",{staticClass:"group-title"},[n._v("上层组织: "),e("span",{staticClass:"m-l-5"},[n._v(n._s(n.parentData.parentName?n.parentData.parentName:"广汽集团"))])]),n._v(" "),e("el-form",{ref:"form",staticClass:"m-t-20",attrs:{"label-width":"150px"}},[e("scrm-form-item",{attrs:{itemLabel:n.labelTitle,itemType:"input",itemRequired:!0,itemClass:"form_required_after",itemInfo:n.info,itemKey:"name",subClass:"w-350",placeholder:"限20个字符",maxlength:20}}),n._v(" "),e("el-form-item",{attrs:{label:"选择门店"}},[e("el-transfer",{staticClass:"transfer-class",attrs:{filterable:"","filter-placeholder":"请输入选项名称",data:n.dataAreas,titles:["待选选择：","已选列表："],props:n.transProps},model:{value:n.selectedAreas,callback:function(t){n.selectedAreas=t},expression:"selectedAreas"}})],1),n._v(" "),e("el-form-item",{staticClass:"m-t-50",attrs:{label:""}},[e("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:n.cancel}},[n._v("取 消")]),n._v(" "),e("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:n.addManager}},[n._v("保 存")])],1)],1)],1)],1)};i._withStripped=!0;var o={render:i,staticRenderFns:[]},d=o;var l=!1;var c=e("C7Lr")(s,d,!1,function(n){l||e("uWH8")},"data-v-21b05451",null);c.options.__file="src/pages/setting/org/AddOrg.vue";t.default=c.exports},qqk8:function(n,t,e){(n.exports=e("UTlt")(!0)).push([n.i,"\n.group-title[data-v-21b05451]{color:#444;font-size:16px;padding-left:20px;font-weight:600;height:60px;line-height:60px;background-color:#fafcff;border-bottom:solid 1px #eaebf0\n}\n.add-org-page[data-v-21b05451] .transfer-class .el-transfer__button{display:block;margin:0 auto 10px;padding:10px;border-radius:50%;color:#FFF;background-color:#409EFF;font-size:0\n}\n.add-org-page[data-v-21b05451] .transfer-class .el-transfer__button.is-disabled,.add-org-page[data-v-21b05451] .transfer-class .el-transfer__button.is-disabled:hover{border:1px solid #DCDFE6;background-color:#F5F7FA;color:#C0C4CC\n}\n.add-org-page[data-v-21b05451] .transfer-class .el-transfer-panel{width:350px\n}\n.add-org-page[data-v-21b05451] .transfer-class input.el-input__inner{width:100% !important\n}\n.add-org-page[data-v-21b05451] .transfer-class .el-transfer-panel__body{height:286px\n}\n.add-org-page[data-v-21b05451] .el-transfer-panel__item{display:block\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/setting/org/D:/liu/vue-project/MyTest/src/pages/setting/org/AddOrg.vue"],names:[],mappings:";AAyKA,8BACI,WACA,eACA,kBACA,gBACA,YACA,iBACA,yBACA,+BAAgC;CACnC;AAAA,oEAGG,cACA,mBACA,aACA,kBACA,WACA,yBACA,WAAY;CACf;AAAA,sKAIG,yBACA,yBACA,aAAc;CACjB;AAAA,kEAGC,WAAY;CACb;AAAA,qEAEC,qBAAqB;CACtB;AAAA,wEAGC,YAAa;CACd;AAAA,wDAGG,aAAc;CACjB",file:"AddOrg.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.group-title {\r\n    color: #444;\r\n    font-size: 16px;\r\n    padding-left: 20px;\r\n    font-weight: 600;\r\n    height: 60px;\r\n    line-height: 60px;\r\n    background-color: #fafcff;\r\n    border-bottom: solid 1px #eaebf0;\r\n}\r\n\r\n.add-org-page /deep/.transfer-class .el-transfer__button {\r\n    display: block;\r\n    margin: 0 auto 10px;\r\n    padding: 10px;\r\n    border-radius: 50%;\r\n    color: #FFF;\r\n    background-color: #409EFF;\r\n    font-size: 0;\r\n}\r\n\r\n.add-org-page /deep/.transfer-class .el-transfer__button.is-disabled, \r\n.add-org-page /deep/.transfer-class .el-transfer__button.is-disabled:hover{\r\n    border: 1px solid #DCDFE6;\r\n    background-color: #F5F7FA;\r\n    color: #C0C4CC;\r\n}\r\n\r\n.add-org-page /deep/.transfer-class .el-transfer-panel{\r\n  width: 350px;\r\n}\r\n.add-org-page /deep/.transfer-class input.el-input__inner {\r\n  width: 100%!important;\r\n}\r\n\r\n.add-org-page /deep/.transfer-class .el-transfer-panel__body{\r\n  height: 286px;\r\n}\r\n\r\n.add-org-page /deep/ .el-transfer-panel__item {\r\n    display: block;\r\n}\r\n"],sourceRoot:""}])},uWH8:function(n,t,e){var a=e("qqk8");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("FIqI")("4d054b61",a,!1,{})}});
//# sourceMappingURL=5.65c83ccfb50fb701a7b5.js.map