webpackJsonp([1],{"0gv8":function(t,e){},"8L8n":function(t,e){},"8eEq":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZCRTAwRDgzNzk0NTExRUFBQkM1Qzk5OThBMTJBNDE5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZCRTAwRDg0Nzk0NTExRUFBQkM1Qzk5OThBMTJBNDE5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkJFMDBEODE3OTQ1MTFFQUFCQzVDOTk5OEExMkE0MTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkJFMDBEODI3OTQ1MTFFQUFCQzVDOTk5OEExMkE0MTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5m9aP9AAAAjUlEQVR42pSSMQ6AIAxFv8SNWQ/grKfxAJ7Nk7HjzIy/piYKZaDJI6T9nwYKcs4gK/G6t5DaJvsRwEp2cpGTJPzDk4NMJDsuQcWzFrwhnlUTBmlTFKJ2gpFLr8EyoRRL4msoTSjFEg6d4RqnR6V6CNcQn0plkjtY4tQ6SDosOpRoDC59Ok2Ptvdr3AIMAIBIexKUeBfuAAAAAElFTkSuQmCC"},"9TfH":function(t,e){},DjG1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),a=i("mvHQ"),o=i.n(a),l=i("woOf"),c=i.n(l),r=i("bg5R"),d=i("NYxO"),u={data:function(){return{HeaderMenu:[],activeIndex:"/work",roleInfo:{},currentRole:{},roleList:[],showMenu:"menu",isLoadingReload:!0,redPoint:!1,msgTimer:null,maxId:"",notifications:{}}},created:function(){this.getRoleInfo(),this.intervalQuery(),this.getMsg()},mounted:function(){var t=this;this.updataIndex(),this.$eventHub.$on("editMySelf",function(e){e?t.getCurrentRole(!0):(t.$message.error("该角色已被删除,请重新登录"),t.$router.push("/login"))})},watch:{$route:function(){this.updataIndex()}},computed:s()({},Object(d.d)(["loginType"]),{nickName:function(){return this.roleInfo&&this.roleInfo.nickname},roleName:function(){return this.currentRole&&this.currentRole.name}}),methods:{getRoleInfo:function(){var t=localStorage.getItem("headerMenu"),e=localStorage.getItem("roleInfo");t&&e?(this.roleInfo=JSON.parse(e),this.currentRole=this.roleInfo.currentRole,this.roleList=this.roleInfo.list?this.$deepCopyContent(this.roleInfo.list):[],this.roleList.push({id:"logout",name:"退出登录"}),this.HeaderMenu=JSON.parse(t),this.$store.commit("saveRoleInfo",this.roleInfo),this.$store.commit("setLoginType",this.roleInfo.loginType),this.$store.commit("setRoleKey",this.roleInfo.currentRole&&this.roleInfo.currentRole.role_key),this.$store.commit("setAgentInfo",JSON.parse(localStorage.getItem("agentInfo"))),this.getCurrentRole(!0)):this.$router.push("/login")},updataIndex:function(){this.activeIndex="/"+Object(r.d)()},handleSelect:function(t){if(this.HeaderMenu&&this.HeaderMenu.length)for(var e=0;e<this.HeaderMenu.length;e++)if(t=="/"+this.HeaderMenu[e].url){if(this.HeaderMenu[e].child&&this.HeaderMenu[e].child.length){if(this.HeaderMenu[e].child[0].child&&this.HeaderMenu[e].child[0].child.length){this.$router.push("/"+this.HeaderMenu[e].child[0].child[0].url);break}this.$router.push("/"+this.HeaderMenu[e].child[0].url);break}this.$router.push("/"+this.HeaderMenu[e].url);break}},handleMessage:function(){this.$router.push("/work/messageList")},messageClose:function(){this.dialog.message=!1},handleFn:function(t){t.name!=this.currentRole.name&&("logout"!=t.id?this.setRole(t):this.logout())},logout:function(){var t=this;this.$confirm("请确认是否退出登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){t.doLogout()})},doLogout:function(){var t=this;this.$fetch.login.logout().then(function(e){t.$handleResponse(e,function(e){t.$router.push("/login"),window.localStorage.removeItem("c_callSDKTools"),window.sessionStorage.removeItem("c_RLtransferStatus"),window.localStorage.removeItem("c_use_tel"),"cticloud"==window.localStorage.getItem("c_callSDKTools")&&window.localStorage.setIremoveItemtem("stateAction"),phone&&(phone.destroy(),window.sessionStorage.removeItem("c_show_RL"),window.eventBus.$emit("destroyRLBus","")),t.callStatusTimer&&clearTimeout(t.callStatusTimer)},!0)}).catch(function(e){t.$store.commit("closeLoading")})},setRole:function(t){var e=this;this.$fetch.login.setRole({roleId:t.id},!0).then(function(t){e.$handleResponse(t,function(t){e.getCurrentRole(),phone&&(phone.destroy(),window.sessionStorage.removeItem("c_show_RL"),window.eventBus.$emit("destroyRLBus","")),window.sessionStorage.setItem("c_RLtransferStatus","3")},!1)}).catch(function(t){e.$store.commit("closeLoading")})},getCurrentRole:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$fetch.login.currentInfo({},!1).then(function(i){t.$handleResponse(i,function(i){var n=Object(r.a)(i.admin.permissions),s=Object(r.b)(n.menu);t.getNewRoleList(i.admin.roles);var a=t.$deepCopyContent(t.roleList),l=c()({loginType:n.type,list:a},i.admin);localStorage.setItem("roleInfo",o()(l)),localStorage.setItem("headerMenu",o()(n.menu)),t.roleList.push({id:"logout",name:"退出登录"}),t.$store.commit("saveRoleInfo",l),t.$store.commit("setLoginType",n.type),t.$store.commit("setMenuObj",s),t.$store.commit("setRoleKey",i.admin.currentRole&&i.admin.currentRole.role_key),t.roleInfo=l,t.currentRole=i.admin&&i.admin.currentRole,t.HeaderMenu=n.menu,t.$eventHub.$emit("headChangeRole",!0),e||t.goToPage(n),t.getAgentInfo(n.type,e)},!1),t.isLoadingReload?(t.isLoadingReload=!1,setTimeout(function(){t.$store.commit("closeLoading")},3e3)):t.$store.commit("closeLoading")}).catch(function(e){t.$store.commit("closeLoading")})},getNewRoleList:function(t){this.roleList=this.$hasArrContent(t)?t:[]},goToPage:function(t){var e="/error";if(t.menu.length&&(e="/"+t.menu[0].url,t.menu[0].child&&t.menu[0].child.length)){e="/"+t.menu[0].child[0].url;var i=t.menu[0].child[0];i.child&&i.child.length&&(e="/"+i.child[0].url)}this.$router.push(e),this.showMenu=this.showMenu+"a"},callAgentState:function(){var t=this,e={state:"1"==window.sessionStorage.getItem("c_RLtransferStatus")?1:"2"==window.sessionStorage.getItem("c_RLtransferStatus")?2:3};this.$fetch.dccSeat.callAgentState(e,!1).then(function(e){t.$handleResponse(e,function(t){},!1)}).catch(function(e){t.$store.commit("closeLoading")}),this.intervalQuery()},intervalQuery:function(){var t=this;this.callStatusTimer&&clearTimeout(this.callStatusTimer),this.callStatusTimer=setTimeout(function(){"group"==t.loginType||"invite"==t.loginType?t.callAgentState():t.intervalQuery()},1e4)},getMsg:function(){var t=this,e={max_id:this.maxId},i=this;this.$fetch.work.noReadMsg(e).then(function(e){t.$handleResponse(e,function(e){if(t.redPoint=!1,e.list&&e.list.length>0){var n=e.list;t.maxId=Math.max(n[0].id,n[n.length-1].id),n.forEach(function(e){setTimeout(function(){var n=t.$notify({title:e.type_text,dangerouslyUseHTMLString:!0,duration:0,offset:55,iconClass:"icon-msg el-icon-message-solid",customClass:"msg-tips",message:'<div class="message-body">\n                                                <div class="content">\n                                                    '+e.content+'\n                                                </div>\n                                                <div class="text-right">\n                                                    <a href="'+e.extend+'" target="_blank" class="see-btn">查看</a>\n                                                </div>\n                                            </div>',onClick:function(){i.handleRead(e.id)}});t.notifications[e.id]=n},1e3)}),t.redPoint=!0}t.intervalQueryMsg()})}).catch(function(){t.$store.commit("closeLoading")})},handleRead:function(t){var e=this;this.$fetch.work.readMsg({id:t}).then(function(t){e.$handleResponse(t,function(t){console.log(t)},!0)}).catch(function(){e.$store.commit("closeLoading")}),this.notifications[t].close(),delete this.notifications[t]},intervalQueryMsg:function(){this.msgTimer&&clearTimeout(this.msgTimer),this.msgTimer=setTimeout(this.getMsg,5e3)},getAgentInfo:function(t,e){var i=this;e||(window.sessionStorage.setItem("c_RLtransferStatus","3"),window.localStorage.setItem("c_use_tel",3)),this.$fetch.dccSeat.agentInfo({},!0).then(function(t){i.$handleResponse(t,function(t){localStorage.setItem("agentInfo",o()(o()(t))),i.$store.commit("setAgentInfo",t),t.thirdSeat&&"1"==t.thirdSeat.platformType?window.localStorage.setItem("c_callSDKTools","RL"):t.thirdSeat&&"3"==t.thirdSeat.platformType&&window.localStorage.setItem("c_callSDKTools","cticloud")},!0),i.loading=!1}).catch(function(t){i.loading=!1,i.$store.commit("closeLoading")})}},beforeDestroy:function(){clearTimeout(this.callStatusTimer),clearTimeout(this.msgTimer)}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"web-header-componet",attrs:{id:"webHeader"}},[i("div",{staticClass:"flex por"},[t._m(0),t._v(" "),i("el-menu",{staticClass:"header-menu flex-1",attrs:{mode:"horizontal","default-active":t.activeIndex},on:{select:t.handleSelect}},t._l(t.HeaderMenu,function(e,n){return i("el-menu-item",{key:t.showMenu+n,attrs:{index:"/"+e.url}},[i("div",[t._v("\n              "+t._s(e.name)+"\n            ")])])}),1),t._v(" "),i("div",{staticClass:"menu-right poa  flex"},[i("div",{staticClass:"notice por",on:{click:t.handleMessage}},[i("i",{staticClass:"notice-icon"}),t._v(" "),t.redPoint?i("span",{staticClass:"red-point poa"}):t._e()]),t._v(" "),i("el-dropdown",{attrs:{trigger:"click"}},[i("div",{staticClass:"avatar-wrapper pointer"},[i("span",{staticClass:"user-name"},[t._v(t._s(t._f("filterBlank")(t.nickName)))]),t._v(" "),i("span",{staticClass:"user-role"},[t._v(t._s(t._f("filterBlank")(t.roleName)))]),t._v(" "),i("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),i("el-dropdown-menu",{staticClass:"avatar-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.roleList,function(e,n){return i("div",{key:"log"+n,on:{click:function(i){return t.handleFn(e)}}},[i("el-dropdown-item",{class:{"is-active":t.roleName==e.name}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])],1)}),0)],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menu-left"},[e("img",{staticClass:"logo",attrs:{src:i("iQH9")}}),this._v(" "),e("span",{staticClass:"company"},[this._v("广汽集团")])])}]};var g=i("VU/8")(u,h,!1,function(t){i("kPK8")},"data-v-602c530d",null).exports,m={data:function(){return{dialogWidth:"210px",isCalling:!1,dialogVisible:!0,val:"",options:[{value:"1",label:"是"},{value:"0",label:"否"}],checkboxGroup1:["1","2"],radio4:"1",percentage:80,items:["内饰","外观","舒适度"],activeName:"first",input1:"",alicc_code:6,callTime:"00:00:00",hour:0,minute:0,second:0,millisecond:0,int:"",toggleMuteInCallStatus:!0,dialogVisibleIncomeCall:!1}},created:function(){var t=this;eventBus.$off("getCode"),eventBus.$on("getCode",function(e){console.log("获取code值："+e),t.alicc_code=e,console.log("获取_code值",t.alicc_code),6==e?(console.log("来电中、、、"),t.dialogVisibleIncomeCall=!0):9==e?(console.log("已接通"),t.dialogWidth="300px",t.isCalling=!0,t.int=setInterval(t.timer,1e3)):5==e?(console.log("结束通话时间",t.callTime),window.clearInterval(t.int),t.millisecond=0,t.hour=0,t.minute=0,t.second=0,t.callTime="00时00分00秒",t.dialogWidth="210px",t.isCalling=!1,t.toggleMuteInCallStatus=!0,t.dialogVisibleIncomeCall=!1):3==e&&(t.dialogVisibleIncomeCall=!1)}),eventBus.$off("caller"),eventBus.$on("caller",function(t){console.log("来电号码:",t)})},methods:{hangUp:function(){window.workbench.hangUp(),console.log("挂机")},answer:function(){this.alicc_code=9,this.dialogWidth="300px",this.isCalling=!0,window.workbench.answer(),console.log("接听电话，通过该方法可接听来电，建立通话连接。")},toggleMuteInCall:function(){window.workbench.toggleMuteInCall(),this.toggleMuteInCallStatus=!this.toggleMuteInCallStatus,console.log("静音")},timer:function(){this.second++,this.second>=60&&(this.second=0,this.minute=this.minute+1),this.minute>=60&&(this.minute=0,this.hour=this.hour+1),this.callTime=this.formatZero(this.hour)+"时"+this.formatZero(this.minute)+"分"+this.formatZero(this.second)+"秒"},formatZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).length>e?t:(Array(e).join(0)+t).slice(-e)},handleClick:function(t,e){console.log(t,e)},handleClose:function(){this.dialogVisible=!1,this.$emit("IncomeCallCloseFn")},save:function(){},toCluesDeal:function(){this.$router.push({path:"/work/cluesDeal",query:{}})}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.dialogVisibleIncomeCall?n("div",[n("el-dialog",{staticClass:"call-coming-dialog",attrs:{visible:t.dialogVisible,width:t.dialogWidth,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),n("div",{staticClass:"dialog-center call-coming-dialog-center",class:{"call-coming-time":t.isCalling}},[n("div",[t._v("电话呼入")]),t._v(" "),n("div",{staticClass:"call-info"},[n("div",{staticClass:"sf"},[t._v("线索")]),t._v(" "),n("div",{staticClass:"phone"},[t._v("17322300397")]),t._v(" "),n("div",[t._v("王五")])]),t._v(" "),t.dialogVisible&&9!=t.alicc_code?n("div",{staticClass:"before-coming"},[n("div",{on:{click:function(e){return t.answer()}}},[n("img",{attrs:{src:i("QNcc"),alt:""}})])]):t._e(),t._v(" "),9==t.alicc_code?n("div",{staticClass:"in-the-call"},[n("div",{staticStyle:{color:"#3bdaa4"}},[t._v("通话中 "+t._s(t.callTime))]),t._v(" "),n("div",{staticClass:"in-coming-btns"},[t.toggleMuteInCallStatus?n("el-button",{staticClass:"call-microphone",attrs:{type:"success",icon:"el-icon-microphone",circle:""},on:{click:t.toggleMuteInCall}}):t._e(),t._v(" "),t.toggleMuteInCallStatus?t._e():n("el-button",{staticClass:"call-microphone",attrs:{type:"info",icon:"el-icon-turn-off-microphone",circle:""},on:{click:t.toggleMuteInCall}}),t._v(" "),n("div",{on:{click:function(e){return t.hangUp()}}},[n("img",{attrs:{src:i("4cN8"),alt:""}})])],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:function(e){return t.toCluesDeal()}}},[t._v("通话建档")])],1):t._e()])])],1):t._e()])},staticRenderFns:[]};var p=i("VU/8")(m,v,!1,function(t){i("IPGi")},"data-v-7adbeb5e",null).exports,f=i("hN2f"),_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"欢迎回来",visible:t.dialogVisible,"close-on-click-modal":!1,width:"471px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-center",staticStyle:{"text-align":"center"}},[t._v("\n          欢迎回来，请问是否需要切换到“坐席在线”状态并开始工作？\n      ")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90 plain-btn-style",attrs:{size:"medium",type:"",round:""},on:{click:t.handleClose}},[t._v("不需要")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{size:"medium",type:"primary",round:""},on:{click:t.changeStatus}},[t._v("是的")])],1)]),t._v(" "),i("div",{staticClass:"RL-BOX remote-places"},[i("div",{staticStyle:{position:"relative"},attrs:{id:"softphonebar"}},[t._m(0),t._v(" "),i("div",{staticClass:"mrg5",attrs:{id:"callStatus"}},[i("input",{staticClass:"ipt fl",attrs:{type:"text",id:"moorCall-dialout-input",placeholder:"输入手机号",value:"",onKeyDown:"if(event.keyCode == 13){softphoneBar.dialout(m7$('#moorCall-dialout-input').val())}"}}),t._v(" "),i("ul",{attrs:{id:"callStatusList"}},[i("li",[i("a",{staticClass:"DialEnable",attrs:{href:"#",id:"DialEnable",onclick:""},on:{click:function(e){return t.diaLoutVue()}}},[t._v("\n              外呼\n              "),i("span",{staticClass:"icon outcallIcon"})]),t._v(" "),t._m(1)]),t._v(" "),t._m(2),t._v(" "),i("li",[i("a",{staticClass:"HangupEnable",attrs:{href:"#",id:"HangupEnable",onclick:""},on:{click:function(e){return t.hangupVue()}}},[t._v("\n              挂机\n              "),i("span",{staticClass:"icon handupIcon"})]),t._v(" "),t._m(3)]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10)])]),t._v(" "),i("div",{attrs:{id:"netMessage"}})]),t._v(" "),t._m(11),t._v(" "),i("div",{staticStyle:{display:"none"},attrs:{id:"cover"}})])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mrg5",attrs:{id:"peerStatus"}},[i("span",{attrs:{id:"phoneAgentStatus"}},[i("a",{staticClass:"IdleDisable userStatus",staticStyle:{color:"#53d466"},attrs:{href:"#",onclick:"javascript:phone.m7SetBusy(false,'0')",id:"IdleDisable"}},[i("span",{staticClass:"ponit",staticStyle:{"background-color":"#53d466"}}),t._v("空闲\n            "),i("span",{staticClass:"line"})]),t._v(" "),i("a",{staticClass:"RestDisable userStatus",attrs:{href:"#",onclick:"javascript:phone.m7SetBusy(true,'2')",id:"RestDisable"}},[i("span",{staticClass:"ponit"}),t._v("小休\n            "),i("span",{staticClass:"line"})]),t._v(" "),i("a",{staticClass:"BusyDisable userStatus",attrs:{href:"#",onclick:"javascript:phone.m7SetBusy(true,'1')",id:"BusyDisable"}},[i("span",{staticClass:"ponit"}),t._v("忙碌\n            "),i("span",{staticClass:"line"})]),t._v(" "),i("span",{attrs:{id:"phoneConfigStatus"}})]),t._v(" "),i("span",{staticClass:"softphone_timer"},[i("span",{staticStyle:{"margin-left":"10px"},attrs:{id:"softphonebar.peerState"}}),t._v(" "),i("span",{staticClass:"peerTimeState",attrs:{id:"softphonebar.peerTimeState"}},[t._v("00:00:00")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"DialDisable disable",staticStyle:{display:"none"},attrs:{href:"#",id:"DialDisable"}},[this._v("\n              外呼\n              "),e("span",{staticClass:"icon outcallIcon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticStyle:{display:"none"}},[e("a",{staticClass:"DialEnable",staticStyle:{width:"102px"},attrs:{href:"#",id:"smallDialEnable",onclick:"softphoneBar.dialout(m7$('#moorCall-dialout-input').val(), 'smallPhone')"}},[this._v("\n              小号外呼\n              "),e("span",{staticClass:"icon outcallIcon"})]),this._v(" "),e("a",{staticClass:"DialDisable disable",staticStyle:{display:"none",width:"102px"},attrs:{href:"#",id:"smallDialDisable"}},[this._v("\n              小号外呼\n              "),e("span",{staticClass:"icon outcallIcon"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"HangupDisable disable",attrs:{href:"#",id:"HangupDisable"}},[this._v("\n              挂机\n              "),e("span",{staticClass:"icon handupIcon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"HoldEnable",staticStyle:{display:"none"},attrs:{href:"#",id:"HoldEnable",onClick:"phone.hold();"}},[this._v("\n              保持\n              "),e("span",{staticClass:"icon holdIcon"})]),this._v(" "),e("a",{staticClass:"HoldDisable disable",attrs:{href:"#",id:"HoldDisable"}},[this._v("\n              保持\n              "),e("span",{staticClass:"icon holdIcon"})]),this._v(" "),e("a",{staticClass:"HoldGetEnable",staticStyle:{display:"none"},attrs:{href:"#",id:"HoldGetEnable",onClick:"phone.unhold();"}},[this._v("\n              继续\n              "),e("span",{staticClass:"icon holdIcon"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"TransferEnable",staticStyle:{display:"none"},attrs:{href:"#",id:"TransferEnable",onClick:"javascript:softphoneBar.m7ToTransfer();"}},[this._v("\n              转移\n              "),e("span",{staticClass:"icon transferIcon"})]),this._v(" "),e("a",{staticClass:"TransferDisable disable",attrs:{href:"#",id:"TransferDisable"}},[this._v("\n              转移\n              "),e("span",{staticClass:"icon transferIcon"})]),this._v(" "),e("a",{staticClass:"TransferEnable",staticStyle:{display:"none"},attrs:{href:"#",id:"ConsultTransferEnable",onclick:"javascript:phone.transfer('9333333','external', {})"}},[this._v("\n              转移\n              "),e("span",{staticClass:"icon transferIcon"})]),this._v(" "),e("a",{staticClass:"TransferDisable",staticStyle:{display:"none"},attrs:{href:"#",id:"ConsultTransferDisable"}},[this._v("\n              转移\n              "),e("span",{staticClass:"icon transferIcon"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"ConsultEnable",staticStyle:{display:"none"},attrs:{href:"#",id:"ConsultEnable",onclick:"javascript:softphoneBar.m7ToConsult();"}},[this._v("\n              咨询\n              "),e("span",{staticClass:"icon webchatIcon"})]),this._v(" "),e("a",{staticClass:"ConsultDisable disable",attrs:{href:"#",id:"ConsultDisable"}},[this._v("\n              咨询\n              "),e("span",{staticClass:"icon webchatIcon"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"StopConsultEnable disable",staticStyle:{width:"102px"},attrs:{href:"#",id:"StopConsultDisable"}},[this._v("\n              结束咨询\n              "),e("span",{staticClass:"icon webchatIcon"})]),this._v(" "),e("a",{staticClass:"StopConsultEnable",staticStyle:{width:"102px",display:"none"},attrs:{href:"#",id:"StopConsultEnable",onclick:"javascript:phone.stopConsult();"}},[this._v("\n              结束咨询\n              "),e("span",{staticClass:"icon webchatIcon"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"ThreeWayCallEnable",staticStyle:{display:"none",width:"102px"},attrs:{href:"#",id:"ThreeWayCallEnable",onclick:"javascript:softphoneBar.toThreeWayCall();"}},[this._v("\n              三方通话\n              "),e("span",{staticClass:"icon threeWaycall"})]),this._v(" "),e("a",{staticClass:"ThreeWayCallDisable disable",staticStyle:{width:"102px"},attrs:{href:"#",id:"ThreeWayCallDisable"}},[this._v("\n              三方通话\n              "),e("span",{staticClass:"icon threeWaycall"})]),this._v(" "),e("a",{staticClass:"ThreeWayCallEnable",staticStyle:{display:"none",width:"102px"},attrs:{href:"#",id:"ConsultThreeWayCallEnable",onclick:"javascript:phone.threeWayCall('9333333')"}},[this._v("\n              三方通话\n              "),e("span",{staticClass:"icon threeWaycall"})]),this._v(" "),e("a",{staticClass:"ThreeWayCallDisable",staticStyle:{display:"none",width:"102px"},attrs:{href:"#",id:"ConsultThreeWayCallDisable"}},[this._v("\n              三方通话\n              "),e("span",{staticClass:"icon threeWaycall"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"StopConsultEnable disable",staticStyle:{width:"110px"},attrs:{href:"#",id:"transferIVR"}},[this._v("\n              转IVR菜单\n              "),e("span",{staticClass:"icon transferIcon"})]),this._v(" "),e("a",{staticClass:"StopConsultEnable",staticStyle:{width:"110px",display:"none"},attrs:{href:"#",id:"transferIVREnable",onclick:"javascript:phone.m7Phone_toMenu('');"}},[this._v("\n              转IVR菜单\n              "),e("span",{staticClass:"icon transferIcon"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"transferSatisfaction disable",staticStyle:{width:"130px"},attrs:{href:"#",id:"transferSatisfaction"}},[this._v("\n              转满意度评价\n              "),e("span",{staticClass:"icon transferSatisfactionIcon"})]),this._v(" "),e("a",{staticClass:"transferSatisfaction",staticStyle:{width:"130px",display:"none"},attrs:{href:"#",id:"transferSatisfactionEnable",onclick:"javascript:phone.investigate();"}},[this._v("\n              转满意度评价\n              "),e("span",{staticClass:"icon transferSatisfactionIcon"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"moorCall_minitor"}},[i("div",{staticClass:"task_title"}),t._v(" "),i("div",{staticClass:"task_content"},[i("div",{staticClass:"form_area",staticStyle:{padding:"0px 10px 10px"}},[i("div",{staticStyle:{width:"100%","padding-bottom":"1px"}},[i("div",{staticClass:"grid"},[i("div",{staticClass:"gridhead"},[i("table",{attrs:{width:"100%",height:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[i("colgroup",[i("col",{attrs:{width:"100%"}})]),t._v(" "),i("thead",{staticClass:"monitor_thead"},[i("tr",[i("th",{attrs:{colspan:"4",align:"left"}},[i("div",{staticClass:"monitor_thead_title"},[t._v("服务号监控列表")])])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"padding-left":"1px"}},[i("table",{attrs:{border:"0",cellspacing:"0",cellpadding:"0",width:"100%"}},[i("tr",{attrs:{id:"icc.monitor.serviceNos.thead"}},[i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",id:"icc.monitor.serviceNosTd",onclick:"tablesort.sortTable(this, 'icc.monitor.serviceNos', 0, 'string');"}},[i("span",[t._v("服务号码")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",onclick:"tablesort.sortTable(this, 'icc.monitor.serviceNos', 1, 'int');"}},[i("span",[t._v("今日外部来电数")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",onclick:"tablesort.sortTable(this, 'icc.monitor.serviceNos', 2, 'int');"}},[i("span",[t._v("今日未接外部来电")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",onclick:"tablesort.sortTable(this, 'icc.monitor.serviceNos', 3, 'int');"}},[i("span",[t._v("今日已接外部来电")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})])])])])])])])]),t._v(" "),i("div",{staticClass:"griddata"},[i("div",[i("table",{attrs:{id:"icc.monitor.serviceNos",width:"100%",cellspacing:"0",cellpadding:"0"}},[i("colgroup",[i("col",{attrs:{width:"100%"}})]),t._v(" "),i("tbody")])])])]),t._v(" "),i("div",{staticClass:"grid",staticStyle:{width:"100%",float:"left",padding:"20px 0 30px 0"}},[i("div",{staticClass:"gridhead"},[i("table",{attrs:{width:"100%",height:"100%",cellspacing:"0",cellpadding:"0"}},[i("colgroup",[i("col",{attrs:{width:"100%"}})]),t._v(" "),i("thead",{staticClass:"monitor_thead"},[i("tr",[i("th",{attrs:{colspan:"5",align:"left"}},[i("div",{staticClass:"monitor_thead_title"},[t._v("技能组监控列表")])])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"padding-left":"1px"}},[i("table",{attrs:{border:"0",cellspacing:"0",cellpadding:"0",width:"100%"}},[i("colgroup",[i("col",{attrs:{width:"10%",span:"5"}})]),t._v(" "),i("tr",{attrs:{id:"icc.monitor.queues.thead"}},[i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",id:"icc.monitor.queuesTd",onclick:"tablesort.sortTable(this, 'icc.monitor.queues', 0, 'string');"}},[i("span",[t._v("技能组名称")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",onclick:"tablesort.sortTable(this, 'icc.monitor.queues', 1, 'int');"}},[i("span",[t._v("空闲座席数")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",onclick:"tablesort.sortTable(this, 'icc.monitor.queues', 2, 'int');"}},[i("span",[t._v("签入座席数")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",onclick:"tablesort.sortTable(this, 'icc.monitor.queues', 3, 'int');"}},[i("span",[t._v("排队数")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",onclick:"tablesort.sortTable(this, 'icc.monitor.queues', 4, 'int');"}},[i("span",[t._v("今日接通电话数")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})])])])])])])])]),t._v(" "),i("div",{staticClass:"griddata"},[i("div",[i("table",{attrs:{id:"icc.monitor.queues",width:"100%",cellspacing:"0",cellpadding:"0"}},[i("colgroup",[i("col",{attrs:{width:"100%"}})]),t._v(" "),i("tbody")])])])]),t._v(" "),i("div",{staticClass:"grid",staticStyle:{width:"100%",float:"left"}},[i("div",{staticClass:"gridhead"},[i("table",{attrs:{width:"100%",height:"100%",cellspacing:"0",cellpadding:"0"}},[i("colgroup",[i("col",{attrs:{width:"100%"}})]),t._v(" "),i("thead",{staticClass:"monitor_thead"},[i("tr",[i("th",{attrs:{colspan:"10",align:"left"}},[i("div",{staticClass:"monitor_thead_title",staticStyle:{display:"none"}},[t._v("\n                          座席监控列表  (坐席总量:\n                          "),i("span",{staticStyle:{color:"#dc4f4f"},attrs:{id:"icc.monitor.agents.totalPeer"}}),t._v("  在线坐席:\n                          "),i("span",{staticStyle:{color:"#dc4f4f"},attrs:{id:"icc.monitor.agents.onlinePeer"}}),t._v("  空闲坐席:\n                          "),i("span",{staticStyle:{color:"#dc4f4f"},attrs:{id:"icc.monitor.agents.idlePeer"}}),t._v(")\n                        ")])])])]),t._v(" "),i("tbody",[i("tr",[i("th",{staticStyle:{"padding-left":"1px"}},[i("table",{staticStyle:{border:"none"},attrs:{border:"0",cellspacing:"0",cellpadding:"0",width:"100%"}},[i("colgroup",[i("col",{attrs:{width:"9%"}}),t._v(" "),i("col",{attrs:{width:"7%"}}),t._v(" "),i("col",{attrs:{width:"9%"}}),t._v(" "),i("col",{attrs:{width:"9%"}}),t._v(" "),i("col",{attrs:{width:"11%"}}),t._v(" "),i("col",{attrs:{width:"9%"}}),t._v(" "),i("col",{attrs:{width:"9%"}}),t._v(" "),i("col",{attrs:{width:"9%"}}),t._v(" "),i("col",{attrs:{width:"9%"}}),t._v(" "),i("col",{attrs:{width:"19%"}})]),t._v(" "),i("tr",{staticClass:"first-tr",attrs:{id:"icc.monitor.agents.thead"}},[i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center",id:"icc.monitor.agentsTd"}},[i("span",{staticClass:"headTitle"},[t._v("座席姓名")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center"}},[i("span",{staticClass:"headTitle"},[t._v("工号")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center"}},[i("span",{staticClass:"headTitle"},[t._v("已接听数")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center"}},[i("span",{staticClass:"headTitle"},[t._v("外呼成功数")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticClass:"headTitle",attrs:{align:"center"}},[t._v("客户号码")]),t._v(" "),i("td",{staticClass:"headTitle",attrs:{align:"center"}},[t._v("接听方式")]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center"}},[i("span",{staticClass:"headTitle"},[t._v("状态")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticClass:"headTitle",attrs:{align:"center"}},[t._v("状态时长")]),t._v(" "),i("td",{staticStyle:{cursor:"pointer"},attrs:{align:"center"}},[i("span",{staticClass:"headTitle"},[t._v("网络延迟")]),t._v(" "),i("span",{staticStyle:{width:"15px"}},[t._v(" ")]),t._v(" "),i("span",{attrs:{name:"currentState"}})]),t._v(" "),i("td",{staticClass:"headTitle",attrs:{align:"center"}},[t._v("操作")])])])])])])])]),t._v(" "),i("div",{staticClass:"griddata"},[i("div",[i("table",{attrs:{id:"icc.monitor.agents",width:"100%",cellspacing:"0",cellpadding:"0"}},[i("colgroup",[i("col",{attrs:{width:"100%"}})]),t._v(" "),i("tbody")])])])])]),t._v(" "),i("div",{staticStyle:{height:"10px",overflow:"hidden",clear:"both"}},[t._v(" ")])])])])}]};var C=function(t){i("ZWnA"),i("KnB5")},w=i("VU/8")(f.a,_,!1,C,"data-v-c18b14b2",null).exports,b={components:{AddCluesDialog:i("gNHg").a},data:function(){return{title:"外呼电话",dialogWidth:"260px",isCalling:!1,dialogVisible:!0,val:"",options:[{value:"1",label:"是"},{value:"0",label:"否"}],checkboxGroup1:["1","2"],radio4:"1",percentage:80,activeName:"first",input1:"",alicc_code:6,callTime:"00:00:00",hour:0,minute:0,second:0,millisecond:0,int:"",toggleMuteInCallStatus:!0,dialogVisibleIncomeCallRL:!1,m7CallStateDescriptionStatus:"",showEndTime:!1,endTime:"00:00:00",detectTelInfo:"",callFuncRLType:"",showAddClues:!1,callConfig:{},isCallIn:0,phoneJson:{}}},computed:s()({},Object(d.d)(["loginType","agentInfo"])),mounted:function(){},created:function(){var t=this;eventBus.$off("clearTimer"),eventBus.$on("clearTimer",function(e){console.log("clearTimer1",t.int),window.clearInterval(t.int)}),window.eventBus.$on("objectDeclareFunc2",function(e){t.getDetectTel(e),t.phoneJson=e}),window.eventBus.$on("objectDeclareFuncRLBus",function(e){console.log("通话信息",e.phoneJson),t.phoneJson=e.phoneJson}),this.$eventHub.$on("showDialogRL",function(e){console.log("外呼弹窗显示"),t.isCallIn=0,t.dialogVisibleIncomeCallRL=!0,t.dialogVisible=!0,t.callFuncRLType="",t.title="外呼电话",t.detectTelInfo=e,t.showEndTime=!1}),this.$eventHub.$on("objectDeclareFuncRLvueBus",function(e){switch(console.log("弹窗接到了来自容联的信号，需要作出反应：",e.type),t.callFuncRLType=e.type,e.type){case"m7Ring":t.isCallIn=1,t.title="来电",t.getDetectTel(e.phoneJson),t.alicc_code=6,t.showEndTime=!1,t.dialogVisibleIncomeCallRL=!0,t.dialogVisible=!0;break;case"onDialing":t.title="外呼电话",console.log("触发外呼振铃"),t.PhoneState=8,t.endTime="00:00:00",t.showEndTime=!1;break;case"EvtConnected":console.log("触发已接听"),t.alicc_code=9,t.isCalling=!0,t.int&&window.clearInterval(t.int),t.setTimer(""),t.int=setInterval(t.timer,1e3),setTimeout(function(){1==t.detectTelInfo.userType&&t.detectTelInfo.dccId==t.agentInfo.admin.id?(t.toCustomerFollow({id:t.detectTelInfo.intentionId,userId:t.detectTelInfo.userId}),t.dialogVisibleIncomeCallRL=!1,t.dialogVisible=!1):2==t.detectTelInfo.userType&&t.detectTelInfo.dccId==t.agentInfo.admin.id&&(t.toCluesDeal2({id:t.detectTelInfo.clueId,userId:t.detectTelInfo.userId}),t.dialogVisibleIncomeCallRL=!1,t.dialogVisible=!1)},0);break;case"onHangup":t.int&&window.clearInterval(t.int),t.setTimer(""),console.log("结束通话时间",t.callTime),"00:00:00"==t.callTime?(t.dialogVisibleIncomeCallRL=!1,t.dialogVisible=!1):"来电"==t.title&&"00时00分00秒"==t.callTime&&(t.dialogVisibleIncomeCallRL=!1,t.dialogVisible=!1),t.showEndTime=!0,t.endTime=t.callTime,t.alicc_code=5,t.millisecond=0,t.hour=0,t.minute=0,t.second=0,t.callTime="00时00分00秒",t.dialogWidth="260px",t.isCalling=!1;break;case"onDialing":console.log("振铃中"),t.alicc_code=6,t.showEndTime=!1,t.dialogVisibleIncomeCallRL=!0,t.dialogVisible=!0}})},methods:s()({},Object(d.c)(["setTimer"]),{toCluesDeal2:function(t){this.$router.push({path:"/work/cluesDeal",query:{id:t.id,userId:t.userId}})},toCustomerFollow:function(t){this.$router.push({path:"/work/customerFollow",query:{id:t.id,userId:t.userId}})},showAddCluesDialog:function(){this.showAddClues=!0;window.localStorage.getItem("c_callSDKTools");this.callConfig={isCallIn:this.isCallIn,userType:this.detectTelInfo.userType,tel:this.detectTelInfo.tel,nickname:this.detectTelInfo.nickname,dccGroupId:this.detectTelInfo.dccGroupId,callThirdId:this.phoneJson.CallsheetId}},addClueSuccess:function(){this.showAddClues=!1},getDetectTel:function(t){var e=this;this.$fetch.dccSeat.detectTel({tel:t.CallNo},!0).then(function(t){e.$handleResponse(t,function(t){console.log(t),e.detectTelInfo=t},!0),e.loading=!1}).catch(function(t){e.loading=!1,e.$store.commit("closeLoading")})},diaLoutVue:function(){if(this.millisecond=0,this.hour=0,this.minute=0,this.second=0,this.callTime="00时00分00秒","-1"!=window.sessionStorage.getItem("rlZt"))if("3"!=window.sessionStorage.getItem("c_RLtransferStatus")){this.isCallIn=0;var t={tel:this.detectTelInfo.tel,dccGroupId:this.detectTelInfo.dccGroupId};console.log("去触发容联的外呼方法。"),window.eventBus.$emit("diaLoutBus",t)}else this.$message({message:"当前坐席为离线状态，暂不支持拨打电话",type:"warning",showClose:!0});else this.$message({message:"请先在插件（企话宝）登录",type:"warning",showClose:!0})},hangupVue:function(){this.int&&window.clearInterval(this.int),console.log("挂机"),this.setTimer(""),window.eventBus.$emit("hangupBus","")},toggleMuteInCall:function(){window.workbench.toggleMuteInCall(),this.toggleMuteInCallStatus=!this.toggleMuteInCallStatus,console.log("静音")},timer:function(){this.second++,this.second>=60&&(this.second=0,this.minute=this.minute+1),this.minute>=60&&(this.minute=0,this.hour=this.hour+1),this.callTime=this.formatZero(this.hour)+"时"+this.formatZero(this.minute)+"分"+this.formatZero(this.second)+"秒",this.setTimer({hour:this.hour,minute:this.minute,second:this.second})},formatZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).length>e?t:(Array(e).join(0)+t).slice(-e)},handleClick:function(t,e){console.log(t,e)},handleClose:function(){this.dialogVisible=!1,this.$emit("IncomeCallRLCloseFn")},save:function(){},toCluesDeal:function(){this.$router.push({path:"/work/cluesDeal",query:{tel:this.detectTelInfo.tel}}),this.dialogVisibleIncomeCallRL=!1,this.dialogVisible=!1}}),beforeDestroy:function(){clearInterval(this.int)}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.dialogVisibleIncomeCallRL?n("div",[n("el-dialog",{staticClass:"call-coming-dialog",attrs:{visible:t.dialogVisible,width:t.dialogWidth,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),n("div",{staticClass:"dialog-center call-coming-dialog-center",class:{"call-coming-time":t.isCalling}},[n("div",{staticClass:"call-phone-title"},[t._v(t._s(t.title)+"\n          "),"onDialing"!=t.callFuncRLType&&"EvtConnected"!=t.callFuncRLType&&"m7Ring"!=t.callFuncRLType?n("img",{staticClass:"call-phone-close-icon",attrs:{src:i("8eEq"),alt:""},on:{click:function(e){return t.handleClose()}}}):t._e()]),t._v(" "),n("div",{staticClass:"call-info"},[n("div",{staticClass:"sf"},[t._v(t._s(t.detectTelInfo.userTypeName))]),t._v(" "),n("div",{staticClass:"phone"},[t._v(t._s(t.detectTelInfo.tel))]),t._v(" "),n("div",[t._v(t._s(t.detectTelInfo.nickname)+" "+t._s(t.detectTelInfo.role)+"\n            "),2==t.detectTelInfo.userType&&t.detectTelInfo.statusName?n("el-tag",{staticClass:"call-info-tag",attrs:{size:"mini",type:"info"}},[t._v(t._s(t.detectTelInfo.statusName))]):t._e(),t._v(" "),1==t.detectTelInfo.userType&&t.detectTelInfo.level?n("el-tag",{staticClass:"call-info-tag",attrs:{size:"mini",type:"info"}},[t._v(t._s(t.detectTelInfo.level))]):t._e()],1),t._v(" "),t.detectTelInfo.dccName?n("div",{staticClass:"dcc"},[t._v("归属DCC："+t._s(t.detectTelInfo.dccName))]):t._e()]),t._v(" "),n("div",{staticClass:"in-the-call"},["onDialing"==t.callFuncRLType?n("div",{staticClass:"waiting-style"},[t._v("等待对方接听...")]):t._e(),t._v(" "),"EvtConnected"==t.callFuncRLType?n("div",{staticClass:"calling-style"},[t._v("通话中 "+t._s(t.callTime))]):t._e(),t._v(" "),"onHangup"==t.callFuncRLType||t.showEndTime?n("div",{staticClass:"waiting-style"},[t._v("通话结束 "+t._s(t.endTime))]):t._e(),t._v(" "),""==t.callFuncRLType||"onHangup"==t.callFuncRLType||t.showEndTime?n("div",{staticClass:"in-coming-btns"},[n("div",{on:{click:function(e){return t.diaLoutVue()}}},[n("img",{attrs:{src:i("QNcc"),alt:""}})])]):t._e(),t._v(" "),"EvtConnected"==t.callFuncRLType||"onDialing"==t.callFuncRLType?n("div",{staticClass:"in-coming-btns"},[n("div",{on:{click:function(e){return t.hangupVue()}}},[n("img",{attrs:{src:i("4cN8"),alt:""}})])]):t._e(),t._v(" "),"group"==t.loginType||"EvtConnected"!=t.callFuncRLType&&"onHangup"!=t.callFuncRLType&&!t.showEndTime?t._e():n("div",[1==t.detectTelInfo.userType&&t.detectTelInfo.dccId!=this.agentInfo.admin.id?n("el-button",{staticClass:"show-add-clues-dialog",attrs:{type:"text",size:"medium",round:""},on:{click:function(e){return t.showAddCluesDialog()}}},[t._v("转移线索")]):t._e(),t._v(" "),2==t.detectTelInfo.userType&&t.detectTelInfo.dccId!=this.agentInfo.admin.id?n("el-button",{staticClass:"show-add-clues-dialog",attrs:{type:"text",size:"medium",round:""},on:{click:function(e){return t.showAddCluesDialog()}}},[t._v("转移线索")]):t._e(),t._v(" "),3==t.detectTelInfo.userType?n("el-button",{staticClass:"show-add-clues-dialog",attrs:{type:"text",size:"medium",round:""},on:{click:function(e){return t.showAddCluesDialog()}}},[t._v("新增/转移线索")]):t._e()],1),t._v(" "),"m7Ring"==t.callFuncRLType?n("div",{staticClass:"calling-style"},[t._v("提示：请在插件中接听")]):t._e()])])])],1):t._e(),t._v(" "),t.showAddClues?n("add-clues-dialog",{attrs:{callConfig:t.callConfig},on:{cluesSuccessFn:t.addClueSuccess,cluesCloseFn:function(e){t.showAddClues=!1}}}):t._e()],1)},staticRenderFns:[]};var S=i("VU/8")(b,I,!1,function(t){i("wnoH"),i("9TfH")},"data-v-4ec8293f",null).exports,y=i("gbki"),T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"欢迎回来",visible:t.dialogVisible,"close-on-click-modal":!1,width:"471px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-center",staticStyle:{"text-align":"center"}},[t._v("\n          欢迎回来，请问是否需要切换到“坐席在线”状态并开始工作？\n      ")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90 plain-btn-style",attrs:{size:"medium",type:"",round:""},on:{click:t.handleClose}},[t._v("不需要")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{size:"medium",type:"primary",round:""},on:{click:t.changeStatus}},[t._v("是的")])],1)])],1)},staticRenderFns:[]};var k=function(t){i("wJIu")},R=i("VU/8")(y.a,T,!1,k,"data-v-0adabd82",null).exports,L={data:function(){return{dialogWidth:"260px",isCalling:!1,dialogVisible:!0,val:"",options:[{value:"1",label:"是"},{value:"0",label:"否"}],checkboxGroup1:["1","2"],radio4:"1",percentage:80,items:["内饰","外观","舒适度"],activeName:"first",input1:"",alicc_code:6,callTime:"00:00:00",hour:0,minute:0,second:0,millisecond:0,int:"",toggleMuteInCallStatus:!0,dialogVisibleIncomeCallRL:!1,m7CallStateDescriptionStatus:"",phone:"",idType:2}},created:function(){var t=this;eventBus.$off("customerNumber"),eventBus.$on("customerNumber",function(e){t.phone=e;console.log(e)}),eventBus.$on("stateAction",function(e){console.log("获取stateAction值："+e),"ringingIb"==e?(console.log("来电中、、、"),t.alicc_code=6,t.dialogVisibleIncomeCallRL=!0):"busyIb"==e?(console.log("已接通"),t.alicc_code=9,t.dialogWidth="300px",t.isCalling=!0,t.int=setInterval(t.timer,1e3)):"ACW"==e?(console.log("结束通话时间",t.callTime),t.alicc_code=5,window.clearInterval(t.int),t.millisecond=0,t.hour=0,t.minute=0,t.second=0,t.callTime="00时00分00秒",t.dialogWidth="210px",t.isCalling=!1,t.toggleMuteInCallStatus=!0,t.dialogVisibleIncomeCallRL=!1):"ringingNoAnswerIb"==e&&(t.alicc_code=3,t.dialogVisibleIncomeCallRL=!1)})},methods:{answer:function(){CTILink.SipSession.sipLink(),2==this.idType&&this.$router.push({path:"/work/cluesDeal",query:{}})},hangUp:function(){CTILink.SipSession.sipUnlink()},toggleMuteInCall:function(){window.workbench.toggleMuteInCall(),this.toggleMuteInCallStatus=!this.toggleMuteInCallStatus,console.log("静音")},timer:function(){this.second++,this.second>=60&&(this.second=0,this.minute=this.minute+1),this.minute>=60&&(this.minute=0,this.hour=this.hour+1),this.callTime=this.formatZero(this.hour)+"时"+this.formatZero(this.minute)+"分"+this.formatZero(this.second)+"秒"},formatZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).length>e?t:(Array(e).join(0)+t).slice(-e)},handleClick:function(t,e){console.log(t,e)},handleClose:function(){this.dialogVisible=!1,this.$emit("IncomeCallRLCloseFn")},save:function(){},toCluesDeal:function(){this.$router.push({path:"/work/cluesDeal",query:{}})}},beforeDestroy:function(){console.log("listener was closed")}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.dialogVisibleIncomeCallRL?n("div",[n("el-dialog",{staticClass:"call-coming-dialog",attrs:{visible:t.dialogVisible,width:t.dialogWidth,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),n("div",{staticClass:"dialog-center call-coming-dialog-center",class:{"call-coming-time":t.isCalling}},[n("div",[t._v("电话呼入")]),t._v(" "),n("div",{staticClass:"call-info"},[n("div",{staticClass:"sf"},[1==t.idType?n("span",[t._v("潜客")]):t._e(),t._v(" "),2==t.idType?n("span",[t._v("线索")]):t._e(),t._v(" "),3==t.idType?n("span",[t._v("未知客户")]):t._e(),t._v(" "),4==t.idType?n("span",[t._v("销售顾问")]):t._e()]),t._v(" "),n("div",{staticClass:"phone"},[t._v(t._s(t.phone))]),t._v(" "),n("div",[t._v("王五")])]),t._v(" "),t.dialogVisible&&9!=t.alicc_code?n("div",{staticClass:"before-coming"},[n("div",{staticStyle:{"margin-right":"30px"},on:{click:function(e){return t.hangUp()}}},[n("img",{attrs:{src:i("4cN8"),alt:""}})]),t._v(" "),n("div",{on:{click:function(e){return t.answer()}}},[n("img",{attrs:{src:i("QNcc"),alt:""}})])]):t._e(),t._v(" "),9==t.alicc_code?n("div",{staticClass:"in-the-call"},[n("div",{staticStyle:{color:"#3bdaa4"}},[t._v("通话中 "+t._s(t.callTime))]),t._v(" "),n("div",{staticClass:"in-coming-btns"},[n("div",{on:{click:function(e){return t.hangUp()}}},[n("img",{attrs:{src:i("4cN8"),alt:""}})])]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:function(e){return t.toCluesDeal()}}},[t._v("通话建档")])],1):t._e()])])],1):t._e()])},staticRenderFns:[]};var A=i("VU/8")(L,D,!1,function(t){i("MJP5"),i("rqj7")},"data-v-ccbf66ac",null).exports,V=i("nMaO"),M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"workbench-container"}}),t._v(" "),i("div",[i("el-dialog",{attrs:{title:"欢迎回来",visible:t.dialogVisible,"close-on-click-modal":!1,width:"471px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-center",staticStyle:{"text-align":"center"}},[t._v("\n              欢迎回来，请问是否需要切换到“坐席在线”状态并开始工作？\n          ")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"w-90 plain-btn-style",attrs:{size:"medium",type:"",round:""},on:{click:t.handleClose}},[t._v("不需要")]),t._v(" "),i("el-button",{staticClass:"w-90",attrs:{size:"medium",type:"primary",round:""},on:{click:t.changeStatus}},[t._v("是的")])],1)])],1)])},staticRenderFns:[]};var E=function(t){i("8L8n")},x={data:function(){return{dialogWidth:"210px",isCalling:!1,dialogVisible:!0,val:"",options:[{value:"1",label:"是"},{value:"0",label:"否"}],checkboxGroup1:["1","2"],radio4:"1",percentage:80,items:["内饰","外观","舒适度"],activeName:"first",input1:"",alicc_code:6,callTime:"00:00:00",hour:0,minute:0,second:0,millisecond:0,int:"",toggleMuteInCallStatus:!0,dialogVisibleIncomeCall:!1}},created:function(){var t=this;eventBus.$off("getCode"),eventBus.$on("getCode",function(e){console.log("获取code值："+e),t.alicc_code=e,console.log("获取_code值",t.alicc_code),6==e?(console.log("来电中、、、"),t.dialogVisibleIncomeCall=!0):9==e?(console.log("已接通"),t.dialogWidth="300px",t.isCalling=!0,t.int=setInterval(t.timer,1e3)):5==e?(console.log("结束通话时间",t.callTime),window.clearInterval(t.int),t.millisecond=0,t.hour=0,t.minute=0,t.second=0,t.callTime="00时00分00秒",t.dialogWidth="210px",t.isCalling=!1,t.toggleMuteInCallStatus=!0,t.dialogVisibleIncomeCall=!1):3==e&&(t.dialogVisibleIncomeCall=!1)}),eventBus.$off("caller"),eventBus.$on("caller",function(t){console.log("来电号码:",t)})},methods:{hangUp:function(){window.workbench.hangUp(),console.log("挂机")},answer:function(){this.alicc_code=9,this.dialogWidth="300px",this.isCalling=!0,window.workbench.answer(),console.log("接听电话，通过该方法可接听来电，建立通话连接。")},toggleMuteInCall:function(){window.workbench.toggleMuteInCall(),this.toggleMuteInCallStatus=!this.toggleMuteInCallStatus,console.log("静音")},timer:function(){this.second++,this.second>=60&&(this.second=0,this.minute=this.minute+1),this.minute>=60&&(this.minute=0,this.hour=this.hour+1),this.callTime=this.formatZero(this.hour)+"时"+this.formatZero(this.minute)+"分"+this.formatZero(this.second)+"秒"},formatZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).length>e?t:(Array(e).join(0)+t).slice(-e)},handleClick:function(t,e){console.log(t,e)},handleClose:function(){this.dialogVisible=!1,this.$emit("IncomeCallCloseFn")},save:function(){},toCluesDeal:function(){this.$router.push({path:"/work/cluesDeal",query:{}})}}},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.dialogVisibleIncomeCall?n("div",[n("el-dialog",{staticClass:"call-coming-dialog",attrs:{visible:t.dialogVisible,width:t.dialogWidth,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),n("div",{staticClass:"dialog-center call-coming-dialog-center",class:{"call-coming-time":t.isCalling}},[n("div",[t._v("电话呼入")]),t._v(" "),n("div",{staticClass:"call-info"},[n("div",{staticClass:"sf"},[t._v("线索")]),t._v(" "),n("div",{staticClass:"phone"},[t._v("17322300397")]),t._v(" "),n("div",[t._v("王五")])]),t._v(" "),t.dialogVisible&&9!=t.alicc_code?n("div",{staticClass:"before-coming"},[n("div",{on:{click:function(e){return t.answer()}}},[n("img",{attrs:{src:i("QNcc"),alt:""}})])]):t._e(),t._v(" "),9==t.alicc_code?n("div",{staticClass:"in-the-call"},[n("div",{staticStyle:{color:"#3bdaa4"}},[t._v("通话中 "+t._s(t.callTime))]),t._v(" "),n("div",{staticClass:"in-coming-btns"},[t.toggleMuteInCallStatus?n("el-button",{staticClass:"call-microphone",attrs:{type:"success",icon:"el-icon-microphone",circle:""},on:{click:t.toggleMuteInCall}}):t._e(),t._v(" "),t.toggleMuteInCallStatus?t._e():n("el-button",{staticClass:"call-microphone",attrs:{type:"info",icon:"el-icon-turn-off-microphone",circle:""},on:{click:t.toggleMuteInCall}}),t._v(" "),n("div",{on:{click:function(e){return t.hangUp()}}},[n("img",{attrs:{src:i("4cN8"),alt:""}})])],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:function(e){return t.toCluesDeal()}}},[t._v("通话建档")])],1):t._e()])])],1):t._e()])},staticRenderFns:[]};var j={components:{HeaderMenu:g,IncomingCall:p,phoneRL:w,phoneDialogRL:S,CticloudSDK:R,IncomingCallTR:A,AliccSDK:i("VU/8")(V.a,M,!1,E,"data-v-64f56de5",null).exports,IncomingCallAli:i("VU/8")(x,N,!1,function(t){i("0gv8")},"data-v-26ed258b",null).exports},data:function(){return{sdkType:"",show:!0,time:"",isShow:!0}},computed:s()({},Object(d.d)(["loginType","agentInfo"])),created:function(){var t=this;this.agentInfo&&this.agentInfo.thirdSeat&&"1"==this.agentInfo.thirdSeat.platformType?this.sdkType="RL":this.agentInfo&&this.agentInfo.thirdSeat&&"3"==this.agentInfo.thirdSeat.platformType&&(this.sdkType="cticloud"),this.sdkType=window.localStorage.getItem("c_callSDKTools")||this.sdkType,window.eventBus.$on("initRLSDKBus",function(e){console.log("receive initRLSDKBus",e),t.show=!1,setTimeout(function(){window.m7$="",t.show=!0,t.time=(new Date).getTime()},1e3)}),window.eventBus.$on("destroyRLBus",function(e){console.log("receive destroyRLBus",e),t.show=JSON.parse(window.sessionStorage.getItem("c_show_RL"))}),console.log(this.sdkType)},mounted:function(){var t=this;this.$eventHub.$on("headChangeRole",function(){t.isShow=!1,t.$nextTick(function(){t.isShow=!0})})},methods:{}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout_up_down"},[i("header-menu"),t._v(" "),t.isShow?i("div",{staticClass:"layout_body_wrap"},[i("router-view")],1):t._e(),t._v(" "),"byaicc"==t.sdkType?i("IncomingCall"):t._e(),t._v(" "),"alicc"==t.sdkType?i("div",[i("AliccSDK"),t._v(" "),i("IncomingCallAli")],1):t._e(),t._v(" "),"RL"==t.sdkType?i("div",[t.show?i("phoneRL",{key:t.time}):t._e(),t._v(" "),i("phoneDialogRL")],1):t._e(),t._v(" "),"cticloud"==t.sdkType?i("div",[i("CticloudSDK"),t._v(" "),i("IncomingCallTR")],1):t._e()],1)},staticRenderFns:[]};var W=i("VU/8")(j,B,!1,function(t){i("kNwS")},"data-v-dd31ac4e",null);e.default=W.exports},IPGi:function(t,e){},KnB5:function(t,e){},MJP5:function(t,e){},ZWnA:function(t,e){},gbki:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){function doLogout(){var t={logoutMode:1,removeBinding:0};CTILink.Agent.logout(t,function(t){t.code})}function doPause(){var t={pauseType:1,pauseDescription:"置忙"};CTILink.Agent.pause(t)}function doUnpause(){CTILink.Agent.unpause()}function doPreviewOutcall(t){var e={};e.tel=t,CTILink.Agent.previewOutcall(e)}function doUnlink(){CTILink.Session.isSessionAlive()&&CTILink.Session.unlink()}function doConsult(t){if(CTILink.Session.isSessionAlive()){var e={objectType:0};e.consultObject=t,CTILink.Session.consult(e)}}function handleState(t){console.log(t);t.state;switch(t.state){case"离线":break;case"失效":doLogout();break;case"空闲":case"置忙":case"呼叫中":break;case"响铃":t.stateAction;break;case"通话":switch(t.stateAction){case"busyIb":case"busyOb":break;case"hold":"保持";break;case"unhold":case"consultStart":break;case"consultLink":"咨询";break;case"busyConsult":case"busyTransfer":break;case"consultThreeway":"咨询三方"}}console.log(t.state,t.stateAction),window.eventBus.$emit("stateAction",t.stateAction),window.localStorage.setItem("stateAction",t.stateAction),"ringingIb"==t.stateAction&&window.eventBus.$emit("customerNumber",t.customerNumber)}function handleRinging(t){console.log("弹屏")}function handleKickout(t){0==t.code&&console.log("被踢下线,需要重新登录")}function refuse(){var t={description:"忙碌"};CTILink.Session.refuse(t)}__webpack_exports__.a={data:function(){return{dialogVisible:!1}},created:function(){var t=this;t.load_script("//agent-gateway-1.cticloud.cn/js/agent/v10/cti-link.js",function(){t.load_script("//lib.sinaapp.com/js/jquery/3.1.0/jquery-3.1.0.min.js",function(){t.load_script("//cdn.bootcss.com/blueimp-md5/2.13.0/js/md5.min.js",function(){t.initSDK()})})})},methods:{load_script:function(t,e){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){e()},i.src=t,document.getElementsByTagName("head")[0].appendChild(i)},initSDK:function(){var t=this;CTILink.setup({webrtc:!0,debug:!0},function(){if(CTILink.event("status",handleState),CTILink.event("previewOutcallRinging",handleState),CTILink.event("previewOutcallBridge",handleState),CTILink.event("consultStart",handleState),CTILink.event("consultLink",handleState),CTILink.event("consultError",handleState),CTILink.event("unconsult",handleState),CTILink.event("consultThreeway",handleState),CTILink.event("consultThreewayUnlink",handleState),CTILink.event("consultTransfer",handleState),CTILink.event("ringing",handleRinging),CTILink.event("kickout",handleKickout),window.localStorage.getItem("c_LoginStatus")&&"true"==window.localStorage.getItem("c_LoginStatus"))t.dialogVisible=!0;else{var e=window.localStorage.getItem("c_use_tel");3==e?t.doLogin():1==e&&t.doLogin("17322300397",1)}})},doLogin:function doLogin(){var bindTel=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"100002",bindType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,departmentId="BM3000527",crmId="0001",timestamp=parseInt((new Date).getTime()/1e3),token="acfd80b3a36bec1acd79da0710684687",sign=md5(departmentId+timestamp+token),url="https://api-test-2.cticloud.cn/interface/v10/agentLogin/authenticateJsonp";url+="?validateType=1&departmentId="+departmentId+"&crmId="+crmId+"&timestamp="+timestamp+"&sign="+sign,$.ajax({type:"GET",dataType:"jsonp",jsonp:"callback",url:url,success:function success(r){var data=eval("("+r+")");if(void 0!=data&&"0"==data.result){var params={};params.sessionKey=data.sessionKey,params.enterpriseId=data.enterpriseId,params.cno=data.cno,params.bindTel=bindTel,params.bindType=bindType,params.loginStatus=1,params.webSocketUrl=data.agentGateWayUrl,params.qids=data.qids,CTILink.Agent.login(params,function(t){0==t.code?(console.log("登录成功"),console.log(t)):console.log(t)})}},error:function(t){}})},handleClose:function(){this.dialogVisible=!1,window.localStorage.removeItem("c_LoginStatus"),window.eventBus.$emit("stateAction","offline"),window.localStorage.setItem("stateAction","offline")},changeStatus:function(){this.doLogin(),window.sessionStorage.setItem("c_RLtransferStatus","1"),this.dialogVisible=!1,window.localStorage.removeItem("c_LoginStatus")}}}}).call(__webpack_exports__,__webpack_require__("7t+N"))},hN2f:function(t,e,i){"use strict";(function(t){var n=i("Dd8w"),s=i.n(n),a=i("NYxO");e.a={data:function(){return{dialogVisible:!1,show:!0,statusText:"",callStatusTimer:"",transferTelWay:"gateway"}},computed:s()({},Object(a.d)(["loginType","agentInfo"])),created:function(){var t=this;if(!window.m7$||"true"==window.localStorage.getItem("c_LoginStatus")){var e=this;e.load_script("../../../static/edb/js/jq/jquery.js",function(){e.load_script("./static/edb/moor/moor.js",function(){e.load_script("../../../static/edb/js/m7Util.js",function(){e.load_script("../../../static/edb/js/moortools.js",function(){e.load_script("../../../static/edb/js/m7PhoneBar.js",function(){e.load_script("../../../static/edb/js/objectDeclare.js",function(){e.load_script("../../../static/edb/js/recordError.js",function(){e.load_script("../../../static/edb/js/m7Monitor.js",function(){e.load_script("../../../static/edb/js/crypto/md5.min.js",function(){e.load_script("../../../static/edb/js/crypto/base64.min.js",function(){console.log("initRLSDK"),e.initRLSDK(),console.log("initRLSDK--- -end")})})})})})})})})})})}setTimeout(function(){console.log(window.localStorage.getItem("c_LoginStatus"),"true"==window.localStorage.getItem("c_LoginStatus"))}),console.log(window.localStorage.getItem("c_LoginStatus"),"true"==window.localStorage.getItem("c_LoginStatus")),"invite"!=this.loginType&&"group"!=this.loginType||!window.localStorage.getItem("c_LoginStatus")||"true"!=window.localStorage.getItem("c_LoginStatus")||(this.dialogVisible=!0),window.eventBus.$on("diaLoutBus",function(e){t.diaLoutVue(e)}),window.eventBus.$on("hangupBus",function(e){console.log("receive onb2",e),t.hangupVue()}),window.eventBus.$on("objectDeclareFuncRLBus",function(e){console.log("receive objectDeclareFuncRLBus:",e),t.$eventHub.$emit("objectDeclareFuncRLvueBus",e)})},mounted:function(){console.log(document.getElementById("softphonebar.peerState")),this.statusText=document.getElementById("softphonebar.peerState")},methods:{load_script:function(t,e){var i=document.createElement("script");i.type="text/javascript","./static/edb/moor/moor.js"==t&&(i.djConfig="isDebug:false, parseOnLoad:false"),i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){e()},i.src=t,document.getElementsByTagName("head")[0].appendChild(i)},linkScript:function(t,e){var i,n=document.getElementsByTagName("head")[0];document.createElement("style");/\.css[^\.]*$/.test(t)?(i=document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=t):(i=document.createElement("script"),i.type="text/javascript",i.src=t),n.insertBefore(i,n.lastChild),i.onload=i.onerror=function(){e&&e()}},initRLSDK:function(){var e=this;if(this.agentInfo.thirdSeat){var i=window.localStorage.getItem("c_use_tel");3==i?this.transferTelWay="sip":1==i?this.transferTelWay="Local":2==i&&(this.transferTelWay="gateway"),window.m7$=t.noConflict();this.agentInfo.thirdSeat.loginName,this.agentInfo.thirdSeat.loginPwd;if("Local",m7$("#IdleDisable").css("color","#53d466"),m7$("#IdleDisable").find("span").css("background-color","#53d466"),m7$("#BusyDisable").css("color","#8a8a8a"),m7$("#BusyDisable").find("span").css("background-color","#8a8a8a"),m7$(".peerTimeState").css("color","#53d466"),console.log(softphoneBar),"invite"!=this.loginType&&"group"!=this.loginType||!window.localStorage.getItem("c_LoginStatus")||"true"!=window.localStorage.getItem("c_LoginStatus")){if("3"!=window.sessionStorage.getItem("c_RLtransferStatus")){console.log("登录zhong 、、登录方式：",this.transferTelWay,"3"!=window.sessionStorage.getItem("c_RLtransferStatus"));var n=this.$route.path.indexOf("/work")>-1;console.log("是否为工作台:",n),n?setTimeout(function(){var t=e.agentInfo.thirdSeat.loginName||"8000@qdxmt",i=e.agentInfo.thirdSeat.loginPwd||"#TFliuf8GRc8000";moorCall.moortools.m7BeginLogon(t,i,e.transferTelWay,"0")},0):window.sessionStorage.setItem("c_RLtransferStatus",3)}}else this.dialogVisible=!0}},diaLoutVue:function(t){console.log("触发呼出事件",t),softphoneBar.dialout(t.tel,"",t.dccGroupId)},handleOutCall:function(t){var e=this;this.$fetch.dccSeat.outCall(t).then(function(t){e.$handleResponse(t,function(t){console.log(t)})})},hangupVue:function(){console.log("触发挂机事件"),phone.hangup()},handleClose:function(){this.dialogVisible=!1,window.localStorage.removeItem("c_LoginStatus")},changeStatus:function(){if(this.agentInfo.thirdSeat){var t=this.agentInfo.thirdSeat.loginName,e=this.agentInfo.thirdSeat.loginPwd;moorCall.moortools.m7BeginLogon(t,e,"sip","0")}console.log("登录zhong 、、登录方式：sip"),window.sessionStorage.setItem("c_RLtransferStatus","1"),window.eventBus.$emit("c_RLtransferStatus","1"),this.dialogVisible=!1,window.localStorage.removeItem("c_LoginStatus")}},beforeDestroy:function(){window.eventBus.$off("diaLoutBus"),window.eventBus.$off("hangupBus"),window.eventBus.$off("objectDeclareFuncRLBus"),console.log("listener was closed"),clearTimeout(this.callStatusTimer)}}}).call(e,i("7t+N"))},iQH9:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE1QTk1RjlCOTNGRjExRUE5RTIzQzMwODUyQTg5MzQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE1QTk1RjlDOTNGRjExRUE5RTIzQzMwODUyQTg5MzQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTVBOTVGOTk5M0ZGMTFFQTlFMjNDMzA4NTJBODkzNDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTVBOTVGOUE5M0ZGMTFFQTlFMjNDMzA4NTJBODkzNDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5qvVT+AAALzUlEQVR42txb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"},kNwS:function(t,e){},kPK8:function(t,e){},nMaO:function(t,e,i){"use strict";(function(t){var n=i("mvHQ"),s=i.n(n);e.a={data:function(){return{dialogVisible:!1}},created:function(){var t=this;t.load_script("//g.alicdn.com/cloudcallcenter/SIPml/0.1.2/SIPml-api.js",function(){t.load_script("//g.alicdn.com/cloudcallcenter-voip/agentbar-sdk/2.7.8/index.js",function(){t.load_script("https://g.alicdn.com/acca/workbench-sdk/0.9.6/workbenchSdk.min.js",function(){t.initSDK()})})})},methods:{load_script:function(t,e){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){e()},i.src=t,document.getElementsByTagName("head")[0].appendChild(i)},initSDK:function(){var t=window.localStorage.getItem("hasWorkbenchSdkDDLH");console.log(t,window.location.href),console.log(localStorage.getItem("workbenchSdkStatus"),localStorage.getItem("workbench"));var e=localStorage.getItem("workbenchSdkStatus");t&&"true"==t&&-1!=e?(console.log("同一个浏览器已经注册过了，"),this.initAlicc()):this.getToken()},getToken:function(){var e=this;t.ajax({url:"https://alicall.net.cn/aliccc/token?userId=1",data:{},cache:!1,async:!0,type:"POST",contentType:"application/x-www-form-urlencoded",success:function(t){console.log("成功"),e.initAlicc()}})},initAlicc:function(t){var e=this;console.log("WorkbenchSdk"),window.workbench=new window.WorkbenchSdk({dom:"workbench-container",width:"320px",height:"550px",instanceId:"ee0cd08d-29e4-4f11-bed0-e313feb4d077",ajaxPath:"/aliccc/api",ajaxOrigin:"https://alicall.net.cn",ajaxMethod:"post",ajaxHeaders:{userId:1},afterCallRule:15,header:!0,useOpenApiSdk:!0,exportErrorOfApi:!0,moreActionList:["mobilePhoneAnswer","break","offline"],defaultVisible:!1,useLocalStorageToCall:!0,onInit:function(){if(!t){console.log(window.localStorage.getItem("LoginStatus"));var e=sessionStorage.getItem("watchStorage");"-1"!=e&&"0"!=e&&"1"!=e&&"4"!=e&&"true"!=window.localStorage.getItem("LoginStatus")&&window.workbench.register()}},onBeforeCallDialing:function(t){console.log("onBeforeCallDialing-----\x3e",t),t.callee&&t.callback()},onErrorNotify:function(t){console.warn(t)},onCallComing:function(t,e,i,n,s){console.log(t,e,i,n,s),window.eventBus.$emit("caller",e)},onCallDialing:function(t,e,i,n){console.log(t,e,i,n)},onStatusChange:function(t,i,n){console.log(t,i,n),0!=t&&1!=t&&-1!=t?(console.log(window.workbench),window.localStorage.setItem("hasWorkbenchSdkDDLH","true")):window.localStorage.setItem("hasWorkbenchSdkDDLH","false"),window.eventBus.$emit("getAliCode",t),e.resetSetItem("watchStorage",t)},onCallEstablish:function(t,e,i){console.log("这里是通话建立时触发的回调函数",t,e,i);var n={callee:"17322300397",caller:"",publicKey:"",useVirNumCall:!0,random:Math.random()};localStorage.setItem("workbenchSdkCall",s()(n))},onCallRelease:function(t,e,i){console.log("这里是通话结束时触发的回调函数",t,e,i),localStorage.setItem("workbenchSdkHangup",Math.random())},onHangUp:function(t){console.log("这里是onHangUp事件，type ="+t),localStorage.setItem("workbenchSdkHangup",Math.random())}}),window.localStorage.getItem("LoginStatus")&&"true"==window.localStorage.getItem("LoginStatus")&&(this.dialogVisible=!0)},handleClose:function(){this.dialogVisible=!1,window.localStorage.setItem("LoginStatus",!1)},changeStatus:function(){console.log(window.workbench.getStatus()),"off"==window.workbench.getStatus()&&(window.workbench.register(),this.dialogVisible=!1,window.localStorage.setItem("LoginStatus",null))}}}}).call(e,i("7t+N"))},rqj7:function(t,e){},wJIu:function(t,e){},wnoH:function(t,e){}});
//# sourceMappingURL=1.d0d7c2c44ed220ce7a9b.js.map