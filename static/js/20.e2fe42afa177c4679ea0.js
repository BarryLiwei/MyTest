webpackJsonp([20],{MfMH:function(n,e,t){var a=t("dsDP");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("75b6a646",a,!1,{})},dsDP:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.add-seat-dialog[data-v-5f9f46c2] .el-dialog__body{margin-top:8px;padding:35px 35px 20px 10px\n}\n.add-seat-dialog[data-v-5f9f46c2] .el-dialog__footer{padding-bottom:34px\n}\n.el-form-item[data-v-5f9f46c2]{margin-bottom:5px\n}\n.el-form-item[data-v-5f9f46c2] .el-form-item__label{padding-right:20px\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/call-center/seat/seat-manage/component/D:/liu/vue-project/MyTest/src/pages/call-center/seat/seat-manage/component/AddSeatDialog.vue"],names:[],mappings:";AAuKA,mDACI,eACA,2BAA4B;CAC/B;AAAA,qDAGG,mBAAoB;CACvB;AAAA,+BAGG,iBAAkB;CACrB;AAAA,oDAEG,kBAAmB;CACtB",file:"AddSeatDialog.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.add-seat-dialog /deep/.el-dialog__body {\r\n    margin-top: 8px;\r\n    padding: 35px 35px 20px 10px;\r\n}\r\n\r\n.add-seat-dialog /deep/.el-dialog__footer {\r\n    padding-bottom: 34px;\r\n}\r\n\r\n.el-form-item {\r\n    margin-bottom: 5px;\r\n}\r\n.el-form-item /deep/.el-form-item__label{\r\n    padding-right: 20px;\r\n}\r\n\r\n"],sourceRoot:""}])},ffso:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.search-wrap[data-v-58df6d17]{padding:30px 20px 5px\n}\n.seat-search.el-col-6[data-v-58df6d17]{width:290px\n}\n.seat-search-btn.el-col-6[data-v-58df6d17]{width:290px\n}\n.seat-search-add.el-col-6[data-v-58df6d17]{width:calc(100% - 700px);text-align:right\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/call-center/seat/seat-manage/D:/liu/vue-project/MyTest/src/pages/call-center/seat/seat-manage/SeatManage.vue"],names:[],mappings:";AAmOA,8BACI,qBAAsB;CACzB;AAAA,uCAEG,WAAY;CACf;AAAA,2CAEG,WAAY;CACf;AAAA,2CAEG,yBACA,gBAAiB;CACpB",file:"SeatManage.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.search-wrap {\r\n    padding: 30px 20px 5px;\r\n}\r\n.seat-search.el-col-6{\r\n    width: 290px;\r\n}\r\n.seat-search-btn.el-col-6 {\r\n    width: 290px;\r\n}\r\n.seat-search-add.el-col-6{\r\n    width: calc(100% - 700px);\r\n    text-align: right;\r\n}\r\n"],sourceRoot:""}])},sGqV:function(n,e,t){var a=t("ffso");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("0f147b7e",a,!1,{})},x61V:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("IaGi"),i=t("ufHF"),o=t("xlys"),s=t("PdD4"),c={components:{SearchCol:a.a,DataTable:i.a,AddSeatDailog:o.a},mixins:[s.a],data:function(){return{showDcc:!1,dccConfig:{}}},created:function(){this.initData(),this.queryData()},methods:{initData:function(){this.initDccConfig(),this.initSearch(),this.initTable()},initSearch:function(){this.search={list:[{type:"input",label:"关键字",currentVal:""}],keyword:0}},initDccConfig:function(){this.dccConfig={label:"DCC邀约员",selectOptions:[],optionLabel:"nickname",optionValue:"id",itemInfo:{ids:[]},itemKey:"ids",isCheckRemove:!0}},initTable:function(){this.dataTable={tr:[{id:"1",label:"坐席组名称",prop:"title",align:"center"},{id:"2",label:"服务门店",prop:"areaOverview",tooltip:!0,align:"center"},{id:"3",label:"DCC邀约员个数",prop:"dccCount",tooltip:!0,align:"center"},{id:"4",label:"DCC负责人",prop:"leaderName",tooltip:!0,align:"center"},{id:"5",label:"更新时间",prop:"updateDate",tooltip:!0,align:"center"},{id:"6",label:"操作",prop:"caozuo",show:"template",minWidth:"150",align:"center"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},border:!0,hasSelect:!1,hasExpand:!1,hasFirstPagination:!1,lastPageLayout:"sizes, prev, pager, next",search:{},hasOperation:!1}},getParams:function(){var n=this.dataTable.page,e=n.currentPage,t=n.pageSize;return{kwd:this.search.list[this.search.keyword].currentVal,pageSize:t,page:e}},queryData:function(){var n=this,e=this,t=this.getParams();this.$fetch.callCenter.seatGroupList(t).then(function(t){n.$handleResponse(t,function(n){e.dataTable.data=n.list?n.list:[],e.dataTable.page=n.page?n.page:e.dataTable.page},!0)}).catch(function(){n.$store.commit("closeLoading")})},handleFn:function(n,e){this.$router.push({path:"add"==n?"/call/seat/seat-manage/add":"/call/seat/seat-manage/edit",query:{id:e.id}})},showAddDcc:function(n){var e=[],t=[];this.$hasArrContent(n.dccs)&&n.dccs.forEach(function(n){e.push(n.dccId),t.push({nickname:n.dccName,id:n.dccId})}),this.dccConfig.itemInfo=n,this.$set(this.dccConfig.itemInfo,"ids",e),this.dccConfig.selectOptions=t,this.showDcc=!0},closeAddDcc:function(n){var e=this;if("success"==n){var t=this.dccConfig.itemInfo,a=t.id,i=t.ids;this.$fetch.callCenter.updateGroupDcc({id:a,dccId:i}).then(function(n){e.$handleResponse(n,function(n){e.showDcc=!1,e.$message.success("添加成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})}else this.showDcc=!1},deleteFn:function(n){var e=this;this.$fetch.callCenter.checkDeleteGroup({groupId:n.id}).then(function(t){e.$handleResponse(t,function(t){var a=0==t.result?"该坐席组名下有线索及潜客数据，一旦删除这些数据坐席处理人置为空，该您确定要删除该坐席组？":"您确定删除该坐席组?";e.doDeleteFn(a,n)},!0)}).catch(function(n){e.$store.commit("closeLoading")})},doDeleteFn:function(n,e){var t=this;this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){t.$fetch.callCenter.deleteGroupSeat({id:e.id}).then(function(n){t.$handleResponse(n,function(n){t.$message.success("删除成功"),t.queryData()},!0)}).catch(function(){t.$store.commit("closeLoading")})})}}},l=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"seat-manage-page m-20 common-box "},[t("div",{staticClass:"search-flex search-wrap"},[t("search-col",{staticClass:"seat-search",attrs:{info:n.search.list[n.search.keyword],placeholder:"坐席组名称/服务门店"}}),n._v(" "),t("search-col",{staticClass:"seat-search-btn",attrs:{leftCol:0,rightCol:24}},[t("div",{attrs:{slot:"custom"},slot:"custom"},[t("el-button",{staticClass:"m-l-28 w-110",attrs:{round:"",icon:"el-icon-search",size:"small",type:"primary"},on:{click:n.find}},[n._v("查询")]),n._v(" "),t("el-button",{attrs:{round:"",icon:"el-icon-delete",size:"small",plain:""},on:{click:n.clear}},[n._v("清空查询条件")])],1)])],1),n._v(" "),t("div",{staticClass:"separate-line w-100-percent"}),n._v(" "),t("div",{staticClass:"p-20"},[t("el-button",{staticClass:"m-b-20",attrs:{round:"",icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){return n.handleFn("add",{})}}},[n._v("新增坐席组")]),n._v(" "),t("data-table",{ref:"DataTableRef",staticClass:"table-cyan",attrs:{table:n.dataTable},on:{searchTable:n.searchTable},scopedSlots:n._u([{key:"caozuo",fn:function(e){return[t("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(t){return n.showAddDcc(e.obj.row)}}},[n._v("添加DCC邀约员")]),n._v(" "),t("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(t){return n.handleFn("edit",e.obj.row)}}},[n._v("编辑")])]}}])})],1),n._v(" "),n.showDcc?t("add-seat-dailog",{attrs:{title:"添加DCC邀约员",isDccDialog:!0,config:n.dccConfig,multiple:"","collapse-tags":""},on:{close:n.closeAddDcc}}):n._e()],1)};l._withStripped=!0;var r={render:l,staticRenderFns:[]},d=r;var p=!1;var f=t("VU/8")(c,d,!1,function(n){p||t("sGqV")},"data-v-58df6d17",null);f.options.__file="src/pages/call-center/seat/seat-manage/SeatManage.vue";e.default=f.exports},xlys:function(n,e,t){"use strict";var a=t("woOf"),i=t.n(a),o=t("kfhN"),s={props:{title:{type:String,default:"添加坐席"},config:{type:Object,default:{label:"坐席",selectOptions:[],optionLabel:"",optionValue:"",itemInfo:{},itemKey:"name",isCheckRemove:!0}},isDccDialog:{type:Boolean,default:!1}},components:{ScrmFormItem:o.a},data:function(){return{dialogVisible:!0,dialogConfig:{},loading:!1}},created:function(){if(this.copyArr=[],this.dialogConfig=this.$deepCopyContent(this.config),this.dialogConfig.isCheckRemove){var n=this.dialogConfig.itemInfo[this.dialogConfig.itemKey];this.dialogConfig.copyDcc=n?this.$deepCopyContent(n):[],this.copyArr=n?this.$deepCopyContent(n):[]}this.isDccDialog&&this.getSelectList()},methods:{addFn:function(){i()(this.config,this.dialogConfig),this.$emit("close","success")},cancel:function(){this.$emit("close","cancel")},getSelectList:function(){var n=this;this.loading=!0,this.$fetch.callCenter.dccSelectList({page:1,pageSize:1e4}).then(function(e){n.loading=!1,n.$handleResponse(e,function(e){var t=n.$hasArrContent(e)?e:[];n.checkSelectOptions(t)},!1)}).catch(function(){n.loading=!1})},checkSelectOptions:function(n){var e=this,t=[];this.$hasArrContent(this.dialogConfig.selectOptions)&&this.dialogConfig.selectOptions.forEach(function(n){t.push(n[e.dialogConfig.optionValue])}),this.$hasArrContent(t)&&this.$hasArrContent(n)?n.forEach(function(n){-1==t.indexOf(n[e.dialogConfig.optionValue])&&e.dialogConfig.selectOptions.push(n)}):this.dialogConfig.selectOptions=this.dialogConfig.selectOptions.concat(n)},changeTag:function(n){var e=this;if(this.dialogConfig.isCheckRemove)if(this.copyArr.length<=n.length)this.copyArr=this.$deepCopyContent(n);else{var t=this.copyArr.filter(function(e){return-1===n.indexOf(e)});this.dialogConfig.copyDcc.includes(t[0])?(this.loading=!0,this.$fetch.callCenter.checkDccUnbind({dccId:t[0]}).then(function(a){e.loading=!1,e.$handleResponse(a,function(a){if(0==a.result)e.$message.error(a.msg),e.dialogConfig.itemInfo[e.dialogConfig.itemKey]=e.$deepCopyContent(e.copyArr);else{e.copyArr=e.$deepCopyContent(n);for(var i=0,o=e.dialogConfig.copyDcc.length;i<o;i++)if(e.dialogConfig.copyDcc[i]==t[0])return void e.dialogConfig.copyDcc.splice(i,1)}},!0)}).catch(function(n){e.loading=!1})):this.copyArr=this.$deepCopyContent(n)}}}},c=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("el-dialog",{staticClass:"add-seat-dialog",attrs:{title:n.title,visible:n.dialogVisible,width:"520px","append-to-body":"","close-on-click-modal":!1,"before-close":n.cancel},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"110px"}},[t("scrm-form-item",n._g(n._b({attrs:{itemLabel:n.dialogConfig.label,itemType:"select",filterable:!0,selectOptions:n.dialogConfig.selectOptions,optionLabel:n.dialogConfig.optionLabel,optionValue:n.dialogConfig.optionValue,itemInfo:n.dialogConfig.itemInfo,itemKey:n.dialogConfig.itemKey},on:{change:n.changeTag}},"scrm-form-item",n.$attrs,!1),n.$listeners)),n._v(" "),t("el-form-item")],1),n._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:n.cancel}},[n._v("取 消")]),n._v(" "),t("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:n.addFn}},[n._v("确 定")])],1)],1)};c._withStripped=!0;var l={render:c,staticRenderFns:[]},r=l;var d=!1;var p=t("VU/8")(s,r,!1,function(n){d||t("MfMH")},"data-v-5f9f46c2",null);p.options.__file="src/pages/call-center/seat/seat-manage/component/AddSeatDialog.vue";e.a=p.exports}});
//# sourceMappingURL=20.e2fe42afa177c4679ea0.js.map