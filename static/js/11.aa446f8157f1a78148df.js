webpackJsonp([11],{"0Ub/":function(n,e,t){var i=t("2qu5");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("FIqI")("3eef5f7b",i,!1,{})},"2qu5":function(n,e,t){(n.exports=t("UTlt")(!0)).push([n.i,"\n.view-talk-task-dialog[data-v-bdef14fe] .el-dialog__body{padding:20px 20px 30px\n}\n.el-form-item[data-v-bdef14fe]{margin-bottom:6px\n}\n.el-form-item[data-v-bdef14fe] .el-form-item__label{padding-right:25px\n}\n.el-tag[data-v-bdef14fe]{margin-right:10px\n}\n.custom-form.el-form-item[data-v-bdef14fe]{margin-bottom:0\n}\n.custom-form.el-form-item[data-v-bdef14fe] .el-form-item__label,.custom-form.el-form-item[data-v-bdef14fe] .el-form-item__content{height:32px;line-height:32px\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/call-center/task/D:/liu/vue-project/MyTest/src/pages/call-center/task/ViewTalkTask.vue"],names:[],mappings:";AA2EA,yDACI,sBAAuB;CAC1B;AAAA,+BAGG,iBAAkB;CACrB;AAAA,oDAEG,kBAAmB;CACtB;AAAA,yBAEG,iBAAkB;CACrB;AAAA,2CAGG,eAAgB;CACnB;AAAA,kIAIG,YACA,gBAAiB;CACpB",file:"ViewTalkTask.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.view-talk-task-dialog /deep/.el-dialog__body {\r\n    padding: 20px 20px 30px;\r\n}\r\n\r\n.el-form-item {\r\n    margin-bottom: 6px;\r\n}\r\n.el-form-item /deep/.el-form-item__label{\r\n    padding-right: 25px;\r\n}\r\n.el-tag {\r\n    margin-right: 10px;\r\n}\r\n\r\n.custom-form.el-form-item {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.custom-form.el-form-item /deep/.el-form-item__label,\r\n.custom-form.el-form-item /deep/ .el-form-item__content{\r\n    height: 32px;\r\n    line-height: 32px;\r\n}\r\n"],sourceRoot:""}])},B9bv:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ5RjcyRjc0ODc5RTExRUE5RDJDQ0RGRjc4QTkzM0MzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ5RjcyRjc1ODc5RTExRUE5RDJDQ0RGRjc4QTkzM0MzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDlGNzJGNzI4NzlFMTFFQTlEMkNDREZGNzhBOTMzQzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDlGNzJGNzM4NzlFMTFFQTlEMkNDREZGNzhBOTMzQzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4k3dAFAAAA7klEQVR42mJ89fqDJwMDw1wglmQYGPAciJMZgQ55JsDPLcnKyjIgrvj9+w/Dh49fnzOBQmKgHAECULslmRgGCRh1yKhDhoxDyM63dvXYxQ81jkbNqENGHTJajuAGbesZGHZcIK588TBgYKgKpFGIFPkwMCiIElYnLwpRS7Oo4WBlYGgKh9D41DQTUEOVNKJAwLeF3sSFGlUSKyj+QRibuKchnXMNenohJ11QxSHI6YXcdEGVZgByevn/n7x0QTWHwNLFaBE/6pBRhwyUQ56DhgYGCvz+/RdEvQCVIykfPn4FDdRIDJBbngJxGkCAAQClozL7K1OoqQAAAABJRU5ErkJggg=="},BcVI:function(n,e,t){(n.exports=t("UTlt")(!0)).push([n.i,"","",{version:3,sources:[],names:[],mappings:"",file:"TalkTask.vue",sourceRoot:""}])},GHFH:function(n,e,t){var i=t("L4zZ");(n.exports=t("UTlt")(!0)).push([n.i,"\n.add-talk-task-dialog[data-v-f2710912] .el-dialog__body{margin-top:8px;padding:25px 0 0 55px\n}\n.add-talk-task-dialog[data-v-f2710912] .el-dialog__footer{padding-bottom:37px\n}\n.add-talk-task-dialog[data-v-f2710912] .dialog-width{width:640px\n}\n.el-form-item[data-v-f2710912]{margin-bottom:10px\n}\n.form-task-time.el-form-item[data-v-f2710912]{margin-bottom:5px\n}\n.form-task-limit.el-form-item[data-v-f2710912]{margin-bottom:5px\n}\n.w-60[data-v-f2710912]{width:60px\n}\n.span-icon[data-v-f2710912]{display:inline-block;width:30px;height:30px;cursor:pointer;vertical-align:middle\n}\n.icon-up[data-v-f2710912]{background:url("+i(t("UjV8"))+");background-size:100% 100%;background-repeat:no-repeat\n}\n.icon-down[data-v-f2710912]{background:url("+i(t("B9bv"))+");background-size:100% 100%;background-repeat:no-repeat\n}\n.icon-delete[data-v-f2710912]{background:url("+i(t("dTr9"))+");background-size:100% 100%;background-repeat:no-repeat\n}\n@media screen and (max-width: 1485px){\n.add-talk-task-dialog[data-v-f2710912] .el-dialog__title{font-size:16px;line-height:20px\n}\n.add-talk-task-dialog[data-v-f2710912] .el-dialog__headerbtn{top:15px\n}\n.add-talk-task-dialog[data-v-f2710912] .el-dialog__body{padding:25px 0 0 35px\n}\n}\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/call-center/task/D:/liu/vue-project/MyTest/src/pages/call-center/task/AddTalkTask.vue"],names:[],mappings:";AAgSA,wDACI,eACA,qBAAsB;CACzB;AAAA,0DAGG,mBAAoB;CACvB;AAAA,qDAGE,WAAY;CACd;AAAA,+BAEG,kBAAmB;CACtB;AAAA,8CAEG,iBAAkB;CACrB;AAAA,+CAEG,iBAAkB;CACrB;AAAA,uBAEG,UAAW;CACd;AAAA,4BAGG,qBACA,WACA,YACA,eACA,qBAAsB;CACzB;AAAA,0BAEG,yCACA,0BACA,2BAA4B;CAC/B;AAAA,4BAEG,yCACA,0BACA,2BAA4B;CAC/B;AAAA,8BAEG,yCACA,0BACA,2BAA4B;CAC/B;AAAA;AAGG,yDACI,eACA,gBAAiB;CACpB;AAAA,6DAEG,QAAS;CACZ;AAAA,wDAGG,qBAAsB;CACzB;CAAA",file:"AddTalkTask.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.add-talk-task-dialog /deep/.el-dialog__body {\r\n    margin-top: 8px;\r\n    padding: 25px 0 0 55px;\r\n}\r\n\r\n.add-talk-task-dialog /deep/.el-dialog__footer {\r\n    padding-bottom: 37px;\r\n}\r\n\r\n.add-talk-task-dialog /deep/.dialog-width {\r\n   width: 640px;\r\n}\r\n.el-form-item {\r\n    margin-bottom: 10px;\r\n}\r\n.form-task-time.el-form-item {\r\n    margin-bottom: 5px;\r\n}\r\n.form-task-limit.el-form-item {\r\n    margin-bottom: 5px;\r\n}\r\n.w-60 {\r\n    width: 60px;\r\n}\r\n\r\n.span-icon {\r\n    display: inline-block;\r\n    width: 30px;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    vertical-align: middle;\r\n}\r\n.icon-up {\r\n    background: url('../../../assets/images/icons/common/up.png');\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n}\r\n.icon-down{\r\n    background: url('../../../assets/images/icons/common/down.png');\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n}\r\n.icon-delete{\r\n    background: url('../../../assets/images/icons/common/delete.png');\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n}\r\n\r\n@media screen and (max-width: 1485px) {\r\n    .add-talk-task-dialog /deep/.el-dialog__title {\r\n        font-size: 16px;\r\n        line-height: 20px;\r\n    }\r\n    .add-talk-task-dialog /deep/.el-dialog__headerbtn {\r\n        top: 15px;\r\n    }\r\n\r\n    .add-talk-task-dialog /deep/.el-dialog__body {\r\n        padding: 25px 0 0 35px;\r\n    }\r\n}\r\n"],sourceRoot:""}])},RmHH:function(n,e,t){(n.exports=t("UTlt")(!0)).push([n.i,"\n.add-talk-task-dialog /deep/.form-task-time /deep/.el-input__inner {\r\n    width: 350px;\n}\r\n","",{version:3,sources:["D:/liu/vue-project/MyTest/src/pages/call-center/task/src/pages/call-center/task/AddTalkTask.vue"],names:[],mappings:";AAgWA;IACA,aAAA;CACA",file:"AddTalkTask.vue",sourcesContent:['<template>\r\n    <el-dialog\r\n      :title="title"\r\n      class="add-talk-task-dialog"\r\n      :visible.sync="dialogVisible"\r\n      custom-class="dialog-width"\r\n      appentToBody\r\n      :close-on-click-modal="false"\r\n      :before-close="cancel">\r\n        <el-form ref="form" label-width="110px" v-loading="loading">\r\n            <scrm-form-item  :itemInfo="info"  itemKey="scenario" itemLabel="适用场景"  :itemRequired="true"  itemClass="form_required_after"  \r\n                itemType="select"  subClass="w-350" placeholder="请选择" :filterable="true" :selectOptions="optionsInfo.scenarios"  :optionLabel="\'title\'" :optionValue="\'id\'"></scrm-form-item>\r\n\r\n            <scrm-form-item  :itemInfo="info"  itemKey="title" itemLabel="任务名称"  :itemRequired="true"  itemClass="form_required_after" \r\n                itemType="input"  subClass="w-350" maxlength="20"  placeholder="20个字符以内">\r\n            </scrm-form-item>\r\n\r\n            <scrm-form-item :itemInfo="{}" itemLabel="任务内容" :itemRequired="true" itemClass="form_required_after" subClass="w-350">\r\n                <template slot="custom">\r\n                    <el-button class="blue_font_white_bg w-60"  plain round size="mini" @click="addContent"><i class="el-icon-plus"></i></el-button>\r\n                </template>\r\n            </scrm-form-item>\r\n\r\n            <div v-for="(item,index) in  info.content" :key="index">\r\n                <scrm-form-item :itemLabel="`任务${index+1}`" :itemInfo="item" itemKey="title"  itemType="input"  :itemRequired="true" itemClass="form_required_after" subClass="w-350"  maxlength="30" placeholder="30个字符以内">\r\n                    <template slot="lineHander">\r\n                        <span class="span-icon icon-down" v-show="index != (info.content.length -1) && info.content.length > 1" @click="downBtn(index)"></span>\r\n                        <span class="span-icon icon-up" v-show="index > 0 && info.content.length > 1" @click="upBtn(index)"></span>\r\n                        <span class="span-icon icon-delete" v-show="index > 0 && info.content.length > 1" @click="deleteBtn(index)"></span>\r\n                    </template>\r\n                </scrm-form-item>\r\n            </div>\r\n\r\n            <scrm-form-item :itemInfo="info" itemKey="dccGroup" itemLabel="适用坐席组"  :itemRequired="true" itemClass="form_required_after" \r\n                itemType="select"  :filterable="true"  multiple  collapse-tags :selectOptions="optionsInfo.dccGroup" :optionLabel="\'title\'" :optionValue="\'id\'" \r\n                subClass="w-350"   :selectIsAll=\'true\'  placeholder="请选择" @change="changeGroup"></scrm-form-item>\r\n\r\n\r\n            <el-form-item label="任务开始时间" :required="true" class="form_required_after form-task-time" style="margin-bottom: 22px;">\r\n                <el-date-picker\r\n                    v-model="info.startDate"\r\n                    type="datetime"\r\n                    size="small"\r\n                    placeholder="选择日期时间"\r\n                    value-format="yyyy-MM-dd HH:mm"\r\n                    format="yyyy-MM-dd HH:mm"\r\n                    :default-time="defaultStartDate"\r\n                    @focus="dataFocus()"\r\n                    :picker-options="{\r\n                    disabledDate: time => {\r\n                            return time < new Date(Date.now()-1 * 24 * 3600 * 1000).getTime();\r\n                        },\r\n                    }">\r\n                </el-date-picker>\r\n            </el-form-item>\r\n\r\n            <el-form-item label="任务结束时间" :required="true" class="form_required_after form-task-time">\r\n                <el-date-picker\r\n                    v-model="info.endDate"\r\n                    type="datetime"\r\n                    size="small"\r\n                    placeholder="选择日期时间"\r\n                    value-format="yyyy-MM-dd HH:mm"\r\n                    format="yyyy-MM-dd HH:mm"\r\n                    default-time="23:59:59"\r\n                    :disabled="checked"\r\n                    :picker-options="{\r\n                    disabledDate: time => {\r\n                            return time < new Date(Date.now()-1 * 24 * 3600 * 1000).getTime();\r\n                        },\r\n                    }">\r\n                </el-date-picker>\r\n            </el-form-item>\r\n\r\n            <scrm-form-item :itemInfo="{}" class="form-task-limit">\r\n                <template slot="custom">\r\n                    <el-checkbox v-model="checked" @change="limitTimechange">长期有效</el-checkbox>\r\n                </template>\r\n            </scrm-form-item>\r\n        </el-form>\r\n\r\n        <span slot="footer">\r\n            <el-button round size="small"  class="w-90" @click="cancel">取 消</el-button>\r\n            <el-button round size="small"  class="w-90" @click="addFn" type="primary">保 存</el-button>\r\n            <el-button round size="small"  @click="addFn(\'online\')" type="primary">保存并上架</el-button>\r\n        </span>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\n// 此组件为开口任务新增和编辑，另外组件写查看，都放在一块会觉得拥挤，不好维护\r\nimport ScrmFormItem from \'@/components/form/ScrmFormItem\'\r\nimport moment from \'moment\';\r\nimport { removeDeleteArr, chagneMultipleSelect } from \'@/utils/util\'\r\nexport default {\r\n    props: {\r\n        rowInfo: {\r\n            type: Object,\r\n            default: ()=>{ \r\n                return {}\r\n            }\r\n        }\r\n    },\r\n    components: {\r\n        ScrmFormItem\r\n    },\r\n    data(){\r\n        return{\r\n            loading: false,\r\n            dialogVisible: true,\r\n            title: \'新增开口任务\',\r\n            type: \'add\',\r\n            info:{\r\n                scenario:\'\',\r\n                title:\'\',\r\n                content: [{\'title\': ""}],\r\n                dccGroup: [],\r\n                startDate: \'\',\r\n                endDate: \'\', // "endDate": "2020-08-01 12:00"  过期时间，没有过期时间传0\r\n            },\r\n            checked: false,\r\n            optionsInfo: {},\r\n            defaultStartDate: \'00:00:00\'\r\n        }\r\n    },\r\n    created(){\r\n        this.lastSelectLength = 0; // 设置多选的坐席组\r\n        if(Object.keys(this.rowInfo).length){\r\n            this.title = \'编辑开口任务\';\r\n            this.type = \'edit\';\r\n            // this.taskView();\r\n        }\r\n        this.initOptions(); // 获取下拉列表\r\n    },\r\n    methods: {\r\n        dataFocus(){\r\n            this.defaultStartDate = moment(new Date()).format(\'HH:mm:ss\');\r\n        },\r\n        initOptions(){\r\n            this.loading = true;\r\n            this.$fetch.callCenter.openTaskInitOptions({}).then((res)=>{\r\n                this.optionsInfo = res.data.data;\r\n                this.loading = false;   \r\n                if(this.type == \'edit\'){ // 先后顺序\r\n                   this.taskView()\r\n                }\r\n            }).catch(()=>{\r\n                this.loading = false;\r\n                if(this.type == \'edit\'){\r\n                   this.taskView()\r\n                }\r\n            })\r\n        },\r\n        taskView(){\r\n            this.loading = true;\r\n            this.$fetch.callCenter.openTaskView({\'id\': this.rowInfo.id}).then((res)=>{\r\n                let result = res.data.data\r\n                let dccIds = [];\r\n                if(this.$hasArrContent(result.dccGroup)){ // 接口已经把之前删除的移除了\r\n                    // result.dccGroup = removeDeleteArr(result.dccGroup, \'id\',this.optionsInfo.dccGroup, \'id\' ); // 去掉下拉框不匹配的, 后续如果产品说要增加回来，则用addArrToOptions方法\r\n                    result.dccGroup.forEach((item)=>{\r\n                        dccIds.push(item.id)\r\n                    })\r\n                }\r\n                Object.assign(this.info, result);\r\n\r\n                this.info.dccGroup = dccIds;\r\n                this.changeGroup(this.info.dccGroup); // 改变全选\r\n                if(result.endDate == "永久有效"){\r\n                    this.checked = true;\r\n                    this.info.endDate = \'\';\r\n                }\r\n                this.loading = false;\r\n            }).catch(()=>{\r\n                this.loading = false;\r\n            })\r\n        },\r\n        cancel(){\r\n            this.$emit(\'close\', \'cancel\');\r\n        },\r\n        addContent(){\r\n            if(this.info.content && this.info.content.length < 8){\r\n                this.info.content.push({\'title\': ""});\r\n            }else {\r\n                this.$message.warning(\'任务内容最多添加8个\')\r\n            }\r\n        },\r\n        upBtn(index){\r\n            let obj = JSON.parse(JSON.stringify(this.info.content[index-1]));\r\n            Object.assign(this.info.content[index-1],this.info.content[index])\r\n            Object.assign(this.info.content[index] ,obj);\r\n        },\r\n        downBtn(index, item){\r\n            let obj = JSON.parse(JSON.stringify(this.info.content[index+1]));\r\n            Object.assign(this.info.content[index+1] ,this.info.content[index]);\r\n            Object.assign(this.info.content[index], obj);\r\n        },\r\n        deleteBtn(index){\r\n            this.info.content.splice(index, 1)\r\n        },\r\n        limitTimechange(val){\r\n            if(val){\r\n                this.info.endDate = \'\';\r\n            }\r\n        },\r\n        getParmam(){\r\n            const { scenario, title, content,dccGroup, dccGroupIds, startDate, endDate} = this.info;\r\n            if(!scenario){\r\n                this.$message.error(\'适用场景必填\')\r\n                return false;\r\n            }\r\n            if(!title){\r\n                this.$message.error(\'任务名称必填\')\r\n                return false;\r\n            }\r\n            for(let i=0, length=content.length; i<length; i++){\r\n                if(!content[i].title){\r\n                    this.$message.error(`第${i+1}行任务内容必填`)\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if(!dccGroupIds.length){\r\n                this.$message.error(\'适用坐席组必填\')\r\n                return false;\r\n            }\r\n            if(!startDate){\r\n                this.$message.error(\'任务开始时间必填\')\r\n                return false;\r\n            }\r\n            if(!this.checked && !endDate){\r\n                this.$message.error(\'任务结束时间必填\')\r\n                return false;\r\n            }\r\n\r\n            let params = {\r\n                scenario: scenario,       // 任务场景\r\n                title: title,             // 任务名称\r\n                content: content,         // 任务内容\r\n                dccGroup: dccGroupIds,         // 分配坐席组\r\n                startDate: startDate,     // 开始时间\r\n                endDate: endDate,         // 结束时间\r\n            }\r\n            if(this.checked){\r\n                params.endDate = 0;\r\n            }\r\n            return params;\r\n        },\r\n        addFn(type){\r\n            let params = this.getParmam();\r\n            let that = this;\r\n            if(params){\r\n                if(type == \'online\'){\r\n                    params["status"] = 1;  // 保存上架按钮点击 \r\n                }\r\n                this.loading = true;\r\n                if(this.type == \'add\'){\r\n                    this.$fetch.callCenter.openTaskCreate(params,true,false).then((res)=>{\r\n                        this.loading = false;\r\n                        this.$handleResponse(res, (data)=>{\r\n                            this.$message.success(\'新增成功\');\r\n                            this.$emit(\'close\', \'success\')\r\n                        }, false);\r\n                    }).catch(()=>{ this.loading = false;})\r\n                }else {\r\n                    params[\'id\'] = this.rowInfo.id;\r\n                    this.$fetch.callCenter.openTaskUpdate(params,true,false).then((res)=>{\r\n                        this.loading = false;\r\n                        this.$handleResponse(res, (data)=>{\r\n                            this.$message.success(\'编辑成功\');\r\n                            this.$emit(\'close\', \'success\')\r\n                        },true);\r\n                    }).catch(()=>{ this.loading = false;})\r\n                }\r\n            }\r\n        },\r\n        changeGroup(item){\r\n            let result = chagneMultipleSelect(item, this.optionsInfo.dccGroup, \'id\', \'title\', this.lastSelectLength);\r\n            this.info.dccGroup =  result.selectIds;\r\n            this.info[\'dccGroupIds\'] = result.resultIds\r\n            this.lastSelectLength = result.lastSelectLength;\r\n        },\r\n        \r\n    }\r\n}\r\n<\/script>\r\n\r\n<style lang="scss" scoped>\r\n.add-talk-task-dialog /deep/.el-dialog__body {\r\n    margin-top: 8px;\r\n    padding: 25px 0 0 55px;\r\n}\r\n\r\n.add-talk-task-dialog /deep/.el-dialog__footer {\r\n    padding-bottom: 37px;\r\n}\r\n\r\n.add-talk-task-dialog /deep/.dialog-width {\r\n   width: 640px;\r\n}\r\n.el-form-item {\r\n    margin-bottom: 10px;\r\n}\r\n.form-task-time.el-form-item {\r\n    margin-bottom: 5px;\r\n}\r\n.form-task-limit.el-form-item {\r\n    margin-bottom: 5px;\r\n}\r\n.w-60 {\r\n    width: 60px;\r\n}\r\n\r\n.span-icon {\r\n    display: inline-block;\r\n    width: 30px;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    vertical-align: middle;\r\n}\r\n.icon-up {\r\n    background: url(\'../../../assets/images/icons/common/up.png\');\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n}\r\n.icon-down{\r\n    background: url(\'../../../assets/images/icons/common/down.png\');\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n}\r\n.icon-delete{\r\n    background: url(\'../../../assets/images/icons/common/delete.png\');\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n}\r\n\r\n@media screen and (max-width: 1485px) {\r\n    .add-talk-task-dialog /deep/.el-dialog__title {\r\n        font-size: 16px;\r\n        line-height: 20px;\r\n    }\r\n    .add-talk-task-dialog /deep/.el-dialog__headerbtn {\r\n        top: 15px;\r\n    }\r\n\r\n    .add-talk-task-dialog /deep/.el-dialog__body {\r\n        padding: 25px 0 0 35px;\r\n    }\r\n}\r\n</style>\r\n\r\n<style>\r\n.add-talk-task-dialog /deep/.form-task-time /deep/.el-input__inner {\r\n    width: 350px;\r\n}\r\n</style>\r\n\r\n'],sourceRoot:""}])},UjV8:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ5ODk5RUY5ODc5RTExRUFBQTk1QjQ2N0ZDNjBCQzk1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ5ODk5RUZBODc5RTExRUFBQTk1QjQ2N0ZDNjBCQzk1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDk4OTlFRjc4NzlFMTFFQUFBOTVCNDY3RkM2MEJDOTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDk4OTlFRjg4NzlFMTFFQUFBOTVCNDY3RkM2MEJDOTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5kZcRSAAAA50lEQVR42mJ89fqDJwMDw1wglmQYGPAciJMZgQ55JsDPLcnKyjIgrvj9+w/Dh49fnzOBQmKgHAECULslmRgGCRh1yKhDaO6QHRcgmFJAUb598JqBoW8LhK0hzcCgIDoAIfLjNwND3UoIjcymu0NAIQEKEWyhQzeH4EoXlKQXJkrSBTEhRROHEJMWyE0vTJSkC3JDDRsANQP+i4rwkxyUdvXYxQ81kh4tr998HC3iRx0y6pCh6xCymwHklBejUTPqkFGHDFuHPAcNDQwU+P37L4h6ASrQUj58/AoaqJEYILc8BeI0gAADAP/VWnsiWrpcAAAAAElFTkSuQmCC"},WUSI:function(n,e,t){var i=t("BcVI");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("FIqI")("b75d21d4",i,!1,{})},dTr9:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRBNkNENjVEODc5RTExRUFBRUU0OEMyMkNENDY1NjY2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBNkNENjVFODc5RTExRUFBRUU0OEMyMkNENDY1NjY2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REE2Q0Q2NUI4NzlFMTFFQUFFRTQ4QzIyQ0Q0NjU2NjYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REE2Q0Q2NUM4NzlFMTFFQUFFRTQ4QzIyQ0Q0NjU2NjYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz52pVSLAAAA40lEQVR42mJ89fqDJwMDw1wglmQYGPAciJMZgQ55JsDPLcnKyjIgrvj9+w/Dh49fnzOBQmKgHAECULslmRgGCRh1yKhDhoxDKMq3+64wMPRthbCLvBkYnHQGKERAjvj0DYJhDiIXgErW/6Ii/AQV2tWTZ8GhRsJqXr/5OATTCDE+o1tihUXPtkoGBq92VAfC5EB8ZPZoOTLqkFGHDLq6Bj1rUlrODO0QgRVmA5ZG5EVpo5ak2peWYFDVvqMOGXXIkHLIc9DQwECB37//gqgXoJI15cPHr6CBGokBcstTIE4DCDAAcpxEIoXSwKsAAAAASUVORK5CYII="},"ktT/":function(n,e,t){var i=t("RmHH");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("FIqI")("c936fcf2",i,!1,{})},mX30:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("/Uby"),r=t("IaGi"),a=t("ufHF"),o=t("3cXf"),s=t.n(o),l=t("aA9S"),c=t.n(l),d=t("ZLEe"),m=t.n(d),p=t("kfhN"),u=t("+qDl"),f=t.n(u),h=t("oFuF"),g={props:{rowInfo:{type:Object,default:function(){return{}}}},components:{ScrmFormItem:p.a},data:function(){return{loading:!1,dialogVisible:!0,title:"新增开口任务",type:"add",info:{scenario:"",title:"",content:[{title:""}],dccGroup:[],startDate:"",endDate:""},checked:!1,optionsInfo:{},defaultStartDate:"00:00:00"}},created:function(){this.lastSelectLength=0,m()(this.rowInfo).length&&(this.title="编辑开口任务",this.type="edit"),this.initOptions()},methods:{dataFocus:function(){this.defaultStartDate=f()(new Date).format("HH:mm:ss")},initOptions:function(){var n=this;this.loading=!0,this.$fetch.callCenter.openTaskInitOptions({}).then(function(e){n.optionsInfo=e.data.data,n.loading=!1,"edit"==n.type&&n.taskView()}).catch(function(){n.loading=!1,"edit"==n.type&&n.taskView()})},taskView:function(){var n=this;this.loading=!0,this.$fetch.callCenter.openTaskView({id:this.rowInfo.id}).then(function(e){var t=e.data.data,i=[];n.$hasArrContent(t.dccGroup)&&t.dccGroup.forEach(function(n){i.push(n.id)}),c()(n.info,t),n.info.dccGroup=i,n.changeGroup(n.info.dccGroup),"永久有效"==t.endDate&&(n.checked=!0,n.info.endDate=""),n.loading=!1}).catch(function(){n.loading=!1})},cancel:function(){this.$emit("close","cancel")},addContent:function(){this.info.content&&this.info.content.length<8?this.info.content.push({title:""}):this.$message.warning("任务内容最多添加8个")},upBtn:function(n){var e=JSON.parse(s()(this.info.content[n-1]));c()(this.info.content[n-1],this.info.content[n]),c()(this.info.content[n],e)},downBtn:function(n,e){var t=JSON.parse(s()(this.info.content[n+1]));c()(this.info.content[n+1],this.info.content[n]),c()(this.info.content[n],t)},deleteBtn:function(n){this.info.content.splice(n,1)},limitTimechange:function(n){n&&(this.info.endDate="")},getParmam:function(){var n=this.info,e=n.scenario,t=n.title,i=n.content,r=(n.dccGroup,n.dccGroupIds),a=n.startDate,o=n.endDate;if(!e)return this.$message.error("适用场景必填"),!1;if(!t)return this.$message.error("任务名称必填"),!1;for(var s=0,l=i.length;s<l;s++)if(!i[s].title)return this.$message.error("第"+(s+1)+"行任务内容必填"),!1;if(!r.length)return this.$message.error("适用坐席组必填"),!1;if(!a)return this.$message.error("任务开始时间必填"),!1;if(!this.checked&&!o)return this.$message.error("任务结束时间必填"),!1;var c={scenario:e,title:t,content:i,dccGroup:r,startDate:a,endDate:o};return this.checked&&(c.endDate=0),c},addFn:function(n){var e=this,t=this.getParmam();t&&("online"==n&&(t.status=1),this.loading=!0,"add"==this.type?this.$fetch.callCenter.openTaskCreate(t,!0,!1).then(function(n){e.loading=!1,e.$handleResponse(n,function(n){e.$message.success("新增成功"),e.$emit("close","success")},!1)}).catch(function(){e.loading=!1}):(t.id=this.rowInfo.id,this.$fetch.callCenter.openTaskUpdate(t,!0,!1).then(function(n){e.loading=!1,e.$handleResponse(n,function(n){e.$message.success("编辑成功"),e.$emit("close","success")},!0)}).catch(function(){e.loading=!1})))},changeGroup:function(n){var e=Object(h.b)(n,this.optionsInfo.dccGroup,"id","title",this.lastSelectLength);this.info.dccGroup=e.selectIds,this.info.dccGroupIds=e.resultIds,this.lastSelectLength=e.lastSelectLength}}},A=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("el-dialog",{staticClass:"add-talk-task-dialog",attrs:{title:n.title,visible:n.dialogVisible,"custom-class":"dialog-width",appentToBody:"","close-on-click-modal":!1,"before-close":n.cancel},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"110px"}},[t("scrm-form-item",{attrs:{itemInfo:n.info,itemKey:"scenario",itemLabel:"适用场景",itemRequired:!0,itemClass:"form_required_after",itemType:"select",subClass:"w-350",placeholder:"请选择",filterable:!0,selectOptions:n.optionsInfo.scenarios,optionLabel:"title",optionValue:"id"}}),n._v(" "),t("scrm-form-item",{attrs:{itemInfo:n.info,itemKey:"title",itemLabel:"任务名称",itemRequired:!0,itemClass:"form_required_after",itemType:"input",subClass:"w-350",maxlength:"20",placeholder:"20个字符以内"}}),n._v(" "),t("scrm-form-item",{attrs:{itemInfo:{},itemLabel:"任务内容",itemRequired:!0,itemClass:"form_required_after",subClass:"w-350"}},[t("template",{slot:"custom"},[t("el-button",{staticClass:"blue_font_white_bg w-60",attrs:{plain:"",round:"",size:"mini"},on:{click:n.addContent}},[t("i",{staticClass:"el-icon-plus"})])],1)],2),n._v(" "),n._l(n.info.content,function(e,i){return t("div",{key:i},[t("scrm-form-item",{attrs:{itemLabel:"任务"+(i+1),itemInfo:e,itemKey:"title",itemType:"input",itemRequired:!0,itemClass:"form_required_after",subClass:"w-350",maxlength:"30",placeholder:"30个字符以内"}},[t("template",{slot:"lineHander"},[t("span",{directives:[{name:"show",rawName:"v-show",value:i!=n.info.content.length-1&&n.info.content.length>1,expression:"index != (info.content.length -1) && info.content.length > 1"}],staticClass:"span-icon icon-down",on:{click:function(e){return n.downBtn(i)}}}),n._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:i>0&&n.info.content.length>1,expression:"index > 0 && info.content.length > 1"}],staticClass:"span-icon icon-up",on:{click:function(e){return n.upBtn(i)}}}),n._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:i>0&&n.info.content.length>1,expression:"index > 0 && info.content.length > 1"}],staticClass:"span-icon icon-delete",on:{click:function(e){return n.deleteBtn(i)}}})])],2)],1)}),n._v(" "),t("scrm-form-item",{attrs:{itemInfo:n.info,itemKey:"dccGroup",itemLabel:"适用坐席组",itemRequired:!0,itemClass:"form_required_after",itemType:"select",filterable:!0,multiple:"","collapse-tags":"",selectOptions:n.optionsInfo.dccGroup,optionLabel:"title",optionValue:"id",subClass:"w-350",selectIsAll:!0,placeholder:"请选择"},on:{change:n.changeGroup}}),n._v(" "),t("el-form-item",{staticClass:"form_required_after form-task-time",staticStyle:{"margin-bottom":"22px"},attrs:{label:"任务开始时间",required:!0}},[t("el-date-picker",{attrs:{type:"datetime",size:"small",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm","default-time":n.defaultStartDate,"picker-options":{disabledDate:function(n){return n<new Date(Date.now()-864e5).getTime()}}},on:{focus:function(e){return n.dataFocus()}},model:{value:n.info.startDate,callback:function(e){n.$set(n.info,"startDate",e)},expression:"info.startDate"}})],1),n._v(" "),t("el-form-item",{staticClass:"form_required_after form-task-time",attrs:{label:"任务结束时间",required:!0}},[t("el-date-picker",{attrs:{type:"datetime",size:"small",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm","default-time":"23:59:59",disabled:n.checked,"picker-options":{disabledDate:function(n){return n<new Date(Date.now()-864e5).getTime()}}},model:{value:n.info.endDate,callback:function(e){n.$set(n.info,"endDate",e)},expression:"info.endDate"}})],1),n._v(" "),t("scrm-form-item",{staticClass:"form-task-limit",attrs:{itemInfo:{}}},[t("template",{slot:"custom"},[t("el-checkbox",{on:{change:n.limitTimechange},model:{value:n.checked,callback:function(e){n.checked=e},expression:"checked"}},[n._v("长期有效")])],1)],2)],2),n._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"w-90",attrs:{round:"",size:"small"},on:{click:n.cancel}},[n._v("取 消")]),n._v(" "),t("el-button",{staticClass:"w-90",attrs:{round:"",size:"small",type:"primary"},on:{click:n.addFn}},[n._v("保 存")]),n._v(" "),t("el-button",{attrs:{round:"",size:"small",type:"primary"},on:{click:function(e){return n.addFn("online")}}},[n._v("保存并上架")])],1)],1)};A._withStripped=!0;var b={render:A,staticRenderFns:[]},k=b;var v=!1;var w=t("C7Lr")(g,k,!1,function(n){v||(t("nknb"),t("ktT/"))},"data-v-f2710912",null);w.options.__file="src/pages/call-center/task/AddTalkTask.vue";var C=w.exports,I={components:{ScrmFormItem:p.a},props:{id:{type:[String,Number],default:""}},data:function(){return{dialogVisible:!0,checked:!0,loading:!1,viewInfo:{}}},created:function(){this.taskView()},methods:{cancel:function(){this.$emit("close")},taskView:function(){var n=this;this.loading=!0,this.$fetch.callCenter.openTaskView({id:this.id}).then(function(e){n.viewInfo=e.data.data,"永久有效"!=n.viewInfo.endDate&&n.viewInfo.startDate&&(n.viewInfo.endDate=n.viewInfo.startDate+" - "+n.viewInfo.endDate),n.loading=!1}).catch(function(){n.loading=!1})}}},y=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("el-dialog",{staticClass:"view-talk-task-dialog",attrs:{title:"查看详情",visible:n.dialogVisible,width:"500px",appentToBody:"","close-on-click-modal":!1,"before-close":n.cancel},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"110px"}},[t("scrm-form-item",{attrs:{itemLabel:"适用场景",itemType:"input",itemInfo:n.viewInfo,itemKey:"scenarioTitle",editable:!1}}),n._v(" "),t("scrm-form-item",{attrs:{itemLabel:"任务名称",itemType:"input",itemInfo:n.viewInfo,itemKey:"title",editable:!1}}),n._v(" "),t("scrm-form-item",{staticClass:"custom-form",attrs:{itemLabel:"任务内容"}}),n._v(" "),n._l(n.viewInfo.content,function(n,e){return t("scrm-form-item",{key:e,staticClass:"custom-form",attrs:{itemLabel:"任务"+(e+1),itemInfo:n,itemKey:"title",itemType:"input",editable:!1}})}),n._v(" "),t("scrm-form-item",{staticClass:"m-t-15",attrs:{itemLabel:"适用坐席组",itemInfo:{},editable:!1}},[t("template",{slot:"notEdit"},n._l(n.viewInfo.dccGroup,function(e,i){return t("el-tag",{key:"tag"+i,attrs:{type:"info",effect:"plain"}},[n._v("\n                   "+n._s(e.title)+"\n                 ")])}),1)],2),n._v(" "),t("scrm-form-item",{attrs:{itemLabel:"任务时间",itemType:"input",itemInfo:n.viewInfo,itemKey:"endDate",editable:!1}})],2)],1)};y._withStripped=!0;var D={render:y,staticRenderFns:[]},G=D;var T=!1;var x=t("C7Lr")(I,G,!1,function(n){T||t("0Ub/")},"data-v-bdef14fe",null);x.options.__file="src/pages/call-center/task/ViewTalkTask.vue";var B=x.exports,R=t("PdD4"),_={components:{SearchBar:i.a,SearchCol:r.a,DataTable:a.a,AddTalkTask:C,ViewTalkTask:B},mixins:[R.a],data:function(){return{showAdd:!1,showView:!1,currentRow:{}}},created:function(){this.initData(),this.queryData()},methods:{initData:function(){this.initSearch(),this.initTable(),this.openTaskOption()},initSearch:function(){this.search={list:[{type:"input",label:"任务名称",currentVal:""},{type:"input",label:"任务内容",currentVal:""},{type:"select",label:"适用坐席组",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"select",label:"状态",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{type:"datePicker",label:"任务结束时间",currentVal:""}],name:0,content:1,group:2,state:3,time:4}},openTaskOption:function(){var n=this;this.$fetch.callCenter.openTaskListOptions({}).then(function(e){var t=e.data.data,i=t.dccGroup,r=t.status;n.search.list[n.search.group].selectOptions=n.$hasArrContent(i)?i:[],n.search.list[n.search.state].selectOptions=n.$hasArrContent(r)?r:[]})},initTable:function(){this.dataTable={tr:[{id:"1",label:"操作选项",prop:"caozuo",show:"template",width:"220"},{id:"2",label:"任务ID",prop:"id",tooltip:!0},{id:"3",label:"任务名称",prop:"title",tooltip:!0},{id:"4",label:"任务内容",prop:"contentOverview",show:"template",tooltip:!0,minWidth:"150"},{id:"5",label:"适用坐席组",prop:"dccGroup",show:"template",tooltip:!0,minWidth:"100"},{id:"6",label:"适用场景",prop:"scenarioTitle",tooltip:!0},{id:"7",label:"任务开始时间",prop:"startDate",tooltip:!0,minWidth:"110"},{id:"8",label:"任务结束时间",prop:"endDate",tooltip:!0,minWidth:"110"},{id:"9",label:"状态",prop:"statusTitle",tooltip:!0},{id:"10",label:"更新时间",prop:"updateDate",tooltip:!0,minWidth:"110"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},hasSelect:!1,hasExpand:!1,hasFirstPagination:!0,showScrollBar:!0,search:{value:"",show:!1,width:"300",placeholder:"请输入任务名称",displayCol:["name","tel"],parma:{id:""}}}},getParams:function(){var n=this.dataTable.page,e=n.currentPage,t=n.pageSize,i=this.search,r=i.name,a=i.content,o=i.group,s=i.state,l=i.time,c=i.list;return{title:c[r].currentVal,content:c[a].currentVal,dccGroup:c[o].currentVal,status:c[s].currentVal,startDate:c[l].currentVal&&c[l].currentVal[0]+" 00:00:00",endDate:c[l].currentVal&&c[l].currentVal[1]+" 23:59:59",pageSize:t,page:e}},queryData:function(){var n=this,e=this,t=this.getParams();this.$fetch.callCenter.openTaskList(t).then(function(t){n.$handleResponse(t,function(n){e.dataTable.data=n.list?n.list:[],e.dataTable.page=n.page?n.page:e.dataTable.page},!0)}).catch(function(){n.$store.commit("closeLoading")})},taskToggle:function(n){var e=this;this.$confirm("您确定要"+(1==n.status?"下":"上")+"架此开口任务吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.$fetch.callCenter.openTaskToggle({id:n.id}).then(function(t){e.$handleResponse(t,function(t){e.$message.success((1==n.status?"下":"上")+"架成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})})},deleteTask:function(n){var e=this;this.$confirm("您确定要删除此开口任务吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"needCenterStyle",cancelButtonClass:"big cancel",confirmButtonClass:"big",roundButton:!0}).then(function(){e.$fetch.callCenter.openTaskDelete({id:n.id}).then(function(n){e.$handleResponse(n,function(n){e.$message.success("删除成功"),e.queryData()},!0)}).catch(function(){e.$store.commit("closeLoading")})})},viewFn:function(n){this.currentRow=n,this.showView=!0},HandleFn:function(n,e){this.currentRow=e,this.showAdd=!0},closeAddFn:function(n){this.$store.commit("closeLoading"),this.showAdd=!1,"success"==n&&this.queryData()}}},N=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"talk-task-page m-20 common-box"},[t("search-bar",{staticClass:"m-t-10 p-20",attrs:{size:"medium"},on:{clear:n.clear,find:n.find}},[t("div",{staticClass:"search-flex"},[t("search-col",{attrs:{info:n.search.list[n.search.name],placeholder:"请输入"}}),n._v(" "),t("search-col",{attrs:{info:n.search.list[n.search.content],placeholder:"请输入"}}),n._v(" "),t("search-col",{attrs:{info:n.search.list[n.search.group],filterable:""}}),n._v(" "),t("search-col",{attrs:{info:n.search.list[n.search.state]}}),n._v(" "),t("search-col",{attrs:{info:n.search.list[n.search.time],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}})],1)]),n._v(" "),t("div",{staticClass:"p-l-r-20 p-b-20"},[t("data-table",{ref:"DataTableRef",attrs:{table:n.dataTable},on:{searchTable:n.searchTable},scopedSlots:n._u([{key:"caozuo",fn:function(e){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return n.HandleFn("edit",e.obj.row)}}},[n._v("编辑")]),n._v(" "),t("el-button",{staticClass:"btn-split",attrs:{type:"text"},on:{click:function(t){return n.taskToggle(e.obj.row)}}},[n._v(n._s(1==e.obj.row.status?"下架":"上架"))]),n._v(" "),t("el-button",{staticClass:"btn-split red_font",attrs:{type:"text"},on:{click:function(t){return n.deleteTask(e.obj.row)}}},[n._v("删除")]),n._v(" "),t("el-button",{staticClass:"btn-split",attrs:{type:"text"},on:{click:function(t){return n.viewFn(e.obj.row)}}},[n._v("查看详情")])]}},{key:"contentOverview",fn:function(e){return[t("div",{staticClass:"blue pointer",on:{click:function(t){return n.viewFn(e.obj.row)}}},[n._v(n._s(e.obj.row.contentOverview))])]}},{key:"dccGroup",fn:function(e){return[e.obj.row.dccGroup&&e.obj.row.dccGroup.length?t("span",[n._v("\n                    "+n._s(e.obj.row.dccGroup[0].title)+"\n                    "),e.obj.row.dccGroup[1]?t("span",[n._v("、"+n._s(e.obj.row.dccGroup[1].title))]):n._e(),n._v(" "),e.obj.row.dccGroup.length>2?t("span",[n._v("等"+n._s(e.obj.row.dccGroup.length)+"组")]):n._e()]):t("span",[n._v(" --")])]}}])},[t("div",{attrs:{slot:"buttons"},slot:"buttons"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",round:"",size:"small"},on:{click:function(e){return n.HandleFn("add",{})}}},[n._v("新建开口任务")])],1)])],1),n._v(" "),n.showAdd?t("add-talk-task",{attrs:{rowInfo:n.currentRow},on:{close:n.closeAddFn}}):n._e(),n._v(" "),n.showView?t("view-talk-task",{attrs:{id:n.currentRow.id},on:{close:function(e){n.showView=!1}}}):n._e()],1)};N._withStripped=!0;var j={render:N,staticRenderFns:[]},E=j;var M=!1;var S=t("C7Lr")(_,E,!1,function(n){M||t("WUSI")},"data-v-4992d088",null);S.options.__file="src/pages/call-center/task/TalkTask.vue";e.default=S.exports},nknb:function(n,e,t){var i=t("GHFH");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("FIqI")("6bc486a0",i,!1,{})}});
//# sourceMappingURL=11.aa446f8157f1a78148df.js.map