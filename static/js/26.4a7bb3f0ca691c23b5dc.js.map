{"version":3,"sources":["webpack:///src/pages/call-center/seat/seat-setting/AddSeat.vue","webpack:///./src/pages/call-center/seat/seat-setting/AddSeat.vue?8ff7","webpack:///./src/pages/call-center/seat/seat-setting/AddSeat.vue","webpack:///src/pages/call-center/seat/seat-setting/SeatSetting.vue","webpack:///./src/pages/call-center/seat/seat-setting/SeatSetting.vue?467a","webpack:///./src/pages/call-center/seat/seat-setting/SeatSetting.vue"],"names":["AddSeat","props","rowItem","type","Object","default","components","ScrmFormItem","data","loading","dialogVisible","title","seatOptions","form","dccId","dccTel","seatId","roleName","userOptions","created","this","row","id","seatNumberId","initAdd","methods","_this","_rowItem","$fetch","callCenter","initFormSeat","then","res","$handleResponse","$hasArrContent","seatNumber","unshift","tel","seatTel","catch","$store","commit","getUserList","_this2","seatDccSelectList","arr","_rowItem2","checkOptionsHasId","push","nickname","dccName","concat","userObj","length","forEach","item","err","option","key","isHas","i","dccChange","getParams","_form","$message","error","addFn","_this3","params","fn","success","$emit","cancel","seat_setting_AddSeat","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","visible","width","append-to-body","close-on-click-modal","before-close","on","update:visible","$event","directives","name","rawName","value","expression","ref","label-width","itemLabel","itemType","itemRequired","itemClass","subClass","placeholder","itemInfo","itemKey","filterable","selectOptions","optionLabel","optionValue","change","_v","disabled","label","required","_s","_f","slot","round","size","click","staticRenderFns","seat_seat_setting_AddSeat","__webpack_require__","normalizeComponent","ssrContext","SeatSetting","SearchCol","DataTable","table","mixins","SearchMixins","seatInfo","show","initData","queryData","initSearch","initTable","search","list","currentVal","isAll","isAllTitle","keyword","groupSeat","seatListOption","dccGroup","dataTable","tr","prop","align","tooltip","minWidth","page","totalCount","pageSize","currentPage","border","hasSelect","hasExpand","hasFirstPagination","lastPageLayout","_dataTable$page","_search","kwd","dccGroupId","that","seatList","handleFn","closeSeat","seat_setting_SeatSetting","info","leftCol","rightCol","icon","find","plain","clear","searchTable","scopedSlots","_u","obj","close","_e","SeatSetting_Component","SeatSetting_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/26.4a7bb3f0ca691c23b5dc.js","sourcesContent":["<template>\r\n    <el-dialog\r\n        :title=\"title\"\r\n        class=\"add-seat-dialog\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"550px\"\r\n        append-to-body\r\n        :close-on-click-modal=\"false\"\r\n        :before-close=\"cancel\">\r\n        <el-form ref=\"form\" label-width=\"120px\" v-loading=\"loading\">\r\n            <scrm-form-item itemLabel=\"姓名\" itemType=\"select\" :itemRequired=\"true\" itemClass=\"form_required_after\" subClass=\"w-100-percent\" placeholder=\"请选择\"\r\n                :itemInfo=\"form\" itemKey=\"dccId\" :filterable=\"true\"  :selectOptions=\"userOptions\" :optionLabel=\"'nickname'\" :optionValue=\"'id'\" @change=\"dccChange\"></scrm-form-item>\r\n\r\n            <scrm-form-item itemLabel=\"手机号\" itemType=\"input\" :itemRequired=\"true\" itemClass=\"form_required_after\" subClass=\"w-100-percent\" placeholder=\"请选择\"\r\n                :itemInfo=\"form\" itemKey=\"dccTel\" :disabled=\"true\"></scrm-form-item>\r\n\r\n            <el-form-item label=\"角色\" :required=\"true\" class=\"form_required_after\">\r\n                {{ form.roleName | filterBlank }}\r\n            </el-form-item>\r\n            \r\n            <scrm-form-item itemLabel=\"绑定坐席号码\" itemType=\"select\" :itemRequired=\"true\" itemClass=\"form_required_after\" subClass=\"w-100-percent\" placeholder=\"请选择\"\r\n                :itemInfo=\"form\" itemKey=\"seatId\" :filterable=\"true\"  :selectOptions=\"seatOptions\" :optionLabel=\"'tel'\" :optionValue=\"'id'\"></scrm-form-item>\r\n        </el-form>\r\n\r\n        <span slot=\"footer\">\r\n            <el-button round size=\"small\" class=\"w-90\" @click=\"cancel\">取 消</el-button>\r\n            <el-button round size=\"small\" class=\"w-90\" @click=\"addFn\" type=\"primary\" :disabled=\"loading\">确 定</el-button>\r\n        </span>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\n// 添加坐席和添加DCC共用一个组件\r\nimport ScrmFormItem from '@/components/form/ScrmFormItem'\r\nexport default {\r\n    props: {\r\n        rowItem: {\r\n            type: Object,\r\n            default: ()=>{ return {}\r\n            }\r\n        }\r\n    },\r\n    components: {\r\n        ScrmFormItem\r\n    },\r\n    data(){\r\n        return{\r\n            loading:false,\r\n            dialogVisible: true,\r\n            title: '添加坐席',\r\n            seatOptions: [],\r\n            form: {\r\n                dccId: '',\r\n                dccTel: '',\r\n                seatId: '',\r\n                roleName: '',\r\n            },\r\n            userOptions: [],\r\n        }\r\n    },\r\n    created(){\r\n        if(this.rowItem.type == 'edit'){\r\n            this.title = '编辑坐席';\r\n            let row = this.rowItem.row;\r\n            this.form.id = row.id;\r\n            this.form.dccId = row.dccId;\r\n            this.form.dccTel = row.dccTel;\r\n            this.form.roleName = row.roleName; \r\n            this.form.seatId = row.seatNumberId; // 坐席号码id\r\n        }\r\n        this.initAdd()\r\n    },\r\n    methods: {\r\n        initAdd(){\r\n            const { type, row } = this.rowItem;\r\n            this.$fetch.callCenter.initFormSeat().then((res)=>{\r\n                this.$handleResponse(res, (res)=>{\r\n                    this.seatOptions = this.$hasArrContent(res.seatNumber)?res.seatNumber:[];\r\n                    if(type == 'edit'){ // 由于用掉的列表就不会返回来，所有不需要过滤\r\n                        this.seatOptions.unshift({'id': row.seatNumberId, 'tel': row.seatTel?row.seatTel:'--'})\r\n                    }\r\n                },true)\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n            \r\n            this.getUserList();\r\n        },\r\n        getUserList(){ \r\n            this.loading=true;\r\n            this.$fetch.callCenter.seatDccSelectList().then((res)=>{\r\n                this.loading=false;\r\n                this.$handleResponse(res, data => {\r\n                    let arr = this.$hasArrContent(data)?data:[];\r\n                    const { type ,row } = this.rowItem;\r\n                    if(type == 'edit'){\r\n                        if(!this.checkOptionsHasId(row.dccId, arr, 'id')){\r\n                           this.userOptions.push({'id':row.dccId, \"nickname\":row.dccName?row.dccName:'--', 'tel':row.dccTel, 'roleName': row.roleName});\r\n                        }\r\n                    }\r\n                    this.userOptions = this.userOptions.concat(arr);\r\n                    this.userObj = {};\r\n                    if(this.userOptions && this.userOptions.length){\r\n                        this.userOptions.forEach((item)=>{\r\n                            this.userObj[item.id] = item;\r\n                        })\r\n                    }\r\n                },false)\r\n            }).catch((err)=>{\r\n                this.loading=false;\r\n            })\r\n        },\r\n        checkOptionsHasId(id, option, key){\r\n            let isHas = false;\r\n            if(id > -1){ \r\n                for(let i=0;i< option.length; i++){\r\n                    if(option[i][key] == id){\r\n                        isHas = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return isHas\r\n        },\r\n        dccChange(){\r\n            this.form.dccTel = this.userObj[this.form.dccId].tel;\r\n            this.form.roleName = this.userObj[this.form.dccId].roleName;\r\n        },\r\n        getParams(){\r\n            const { dccId, seatId, id } = this.form;\r\n            if(!dccId){\r\n                this.$message.error('DCC邀约员不为空');\r\n                return false\r\n            }\r\n            if(!seatId){\r\n                this.$message.error('绑定坐席号码不为空');\r\n                return false\r\n            }\r\n            return {'dccId': dccId, 'seatNumberId': seatId , id};\r\n        },\r\n        addFn(){\r\n            let params = this.getParams();\r\n            if(!params){\r\n                return;\r\n            }\r\n            this.loading = true;\r\n            let fn = this.rowItem.type == 'add'?'createSeat': 'updateSeat';\r\n            this.$fetch.callCenter[fn](params).then((res)=>{\r\n                this.loading = false;\r\n                this.$handleResponse(res, res=>{\r\n                    this.$message.success(`${this.rowItem.type == 'add'?'新增':'编辑'}成功`)\r\n                    this.$emit('close', 'success')\r\n                },true);\r\n            }).catch(()=>{\r\n                this.loading = false;\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        cancel(){\r\n            this.$emit('close', 'cancel')\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-seat-dialog /deep/.el-dialog__body {\r\n    margin-top: 8px;\r\n    padding: 35px 40px 20px 20px;\r\n}\r\n\r\n.add-seat-dialog /deep/.el-dialog__footer {\r\n    padding: 0 0 30px;\r\n}\r\n\r\n.el-form-item {\r\n    margin-bottom: 15px;\r\n}\r\n.el-form-item /deep/.el-form-item__label{\r\n    padding-right: 20px;\r\n}\r\n\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/call-center/seat/seat-setting/AddSeat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"add-seat-dialog\",attrs:{\"title\":_vm.title,\"visible\":_vm.dialogVisible,\"width\":\"550px\",\"append-to-body\":\"\",\"close-on-click-modal\":false,\"before-close\":_vm.cancel},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",attrs:{\"label-width\":\"120px\"}},[_c('scrm-form-item',{attrs:{\"itemLabel\":\"姓名\",\"itemType\":\"select\",\"itemRequired\":true,\"itemClass\":\"form_required_after\",\"subClass\":\"w-100-percent\",\"placeholder\":\"请选择\",\"itemInfo\":_vm.form,\"itemKey\":\"dccId\",\"filterable\":true,\"selectOptions\":_vm.userOptions,\"optionLabel\":'nickname',\"optionValue\":'id'},on:{\"change\":_vm.dccChange}}),_vm._v(\" \"),_c('scrm-form-item',{attrs:{\"itemLabel\":\"手机号\",\"itemType\":\"input\",\"itemRequired\":true,\"itemClass\":\"form_required_after\",\"subClass\":\"w-100-percent\",\"placeholder\":\"请选择\",\"itemInfo\":_vm.form,\"itemKey\":\"dccTel\",\"disabled\":true}}),_vm._v(\" \"),_c('el-form-item',{staticClass:\"form_required_after\",attrs:{\"label\":\"角色\",\"required\":true}},[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"filterBlank\")(_vm.form.roleName))+\"\\n        \")]),_vm._v(\" \"),_c('scrm-form-item',{attrs:{\"itemLabel\":\"绑定坐席号码\",\"itemType\":\"select\",\"itemRequired\":true,\"itemClass\":\"form_required_after\",\"subClass\":\"w-100-percent\",\"placeholder\":\"请选择\",\"itemInfo\":_vm.form,\"itemKey\":\"seatId\",\"filterable\":true,\"selectOptions\":_vm.seatOptions,\"optionLabel\":'tel',\"optionValue\":'id'}})],1),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"w-90\",attrs:{\"round\":\"\",\"size\":\"small\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"w-90\",attrs:{\"round\":\"\",\"size\":\"small\",\"type\":\"primary\",\"disabled\":_vm.loading},on:{\"click\":_vm.addFn}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5a410bc4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/call-center/seat/seat-setting/AddSeat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5a410bc4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddSeat.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddSeat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddSeat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a410bc4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddSeat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5a410bc4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/call-center/seat/seat-setting/AddSeat.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"seat-setting-page m-20 common-box \">\r\n        <div class=\"search-flex search-wrap\">\r\n            <search-col :info=\"search.list[search.keyword]\" :placeholder=\"'DCC邀约员/手机号/坐席号'\" class=\"seat-search\"></search-col>\r\n            <search-col :info=\"search.list[search.groupSeat]\" :placeholder=\"'请选择'\" class=\"seat-search\"></search-col>\r\n            <search-col :leftCol=\"0\" :rightCol=\"24\" class=\"seat-search-btn\">\r\n                <div slot=\"custom\">\r\n                    <el-button round icon=\"el-icon-search\" @click=\"find\"  size=\"small\" type=\"primary\" class=\"m-l-30 w-110\">查询</el-button>\r\n                    <el-button round icon=\"el-icon-delete\" @click=\"clear\" size=\"small\" plain >清空查询条件</el-button>\r\n                </div>\r\n            </search-col>\r\n        </div>\r\n\r\n        <div class=\"separate-line w-100-percent\"></div>\r\n\r\n        <div class=\"p-l-r-20 m-b-20\"> \r\n            <data-table ref=\"DataTableRef\" class='table-cyan' :table=\"dataTable\" @searchTable='searchTable'>\r\n                <div slot=\"buttons\">              \r\n                    <el-button round icon=\"el-icon-plus\" @click=\"handleFn('add', {})\" size=\"small\" type=\"primary\" class=\"m-b-20\">新增坐席</el-button>\r\n                    <!-- <span class=\"text-right note m-l-15\">注：只有审核通过的坐席号才能正常使用</span> -->\r\n                </div>   \r\n\r\n                <template slot-scope=\"props\" slot=\"caozuo\">\r\n                    <el-button class=\"blue_font_white_bg\" plain round size=\"mini\" @click=\"handleFn('edit', props.obj.row)\">编辑</el-button>\r\n                </template> \r\n            </data-table>\r\n        </div>\r\n\r\n        <add-seat v-if=\"seatInfo.show\" :rowItem=\"seatInfo\" @close=\"closeSeat\" ></add-seat>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchCol from '@/components/form/SearchCol';\r\nimport DataTable from \"@/components/dataTable/table\";\r\nimport AddSeat from './AddSeat'\r\nimport SearchMixins from '@/pages/mixins/SearchMixins';\r\nexport default {\r\n    components: {\r\n        SearchCol,\r\n        DataTable,\r\n        AddSeat\r\n    },\r\n    mixins: [SearchMixins],\r\n    data(){\r\n        return {\r\n            seatInfo: {\r\n                show: false,\r\n                type: 'add',\r\n                row: {}\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.initData();\r\n        this.queryData();\r\n    },\r\n    methods: {\r\n        initData(){\r\n            this.initSearch();\r\n            this.initTable();\r\n        },\r\n        initSearch(){\r\n            // 使用key防止在数组中间插入一列后，只要改变key的下标值就可以\r\n            this.search = { \r\n                list: [\r\n                        {\r\n                        type: 'input', \r\n                        label: '关键字', \r\n                        currentVal:'',\r\n                    },{\r\n                        type: 'select', \r\n                        label: '坐席组', \r\n                        currentVal:'',\r\n                        isAll: true,\r\n                        isAllTitle: '全部',\r\n                        selectOptions:[], \r\n                        optionLabel:'title', \r\n                        optionValue:\"id\", \r\n                    }\r\n                ],\r\n                keyword: 0, // 任务名称\r\n                groupSeat: 1, // 坐席组\r\n            }\r\n\r\n            this.$fetch.callCenter.seatListOption({}).then((res)=>{\r\n                this.$handleResponse(res, (res)=>{\r\n                    this.search.list[this.search.groupSeat].selectOptions = this.$hasArrContent(res.dccGroup)?res.dccGroup:[];\r\n                }, false)\r\n            })\r\n        },\r\n        initTable(){\r\n            this.dataTable = {\r\n                tr: [{\r\n                      id: '1',\r\n                      label: '坐席号',\r\n                      prop: 'thirdSeatId',\r\n                      align: 'center'\r\n                    },{\r\n                      id: '2',\r\n                      label: '姓名',\r\n                      prop: 'dccNickname',\r\n                      tooltip:true,\r\n                      align: 'center'\r\n                    },{\r\n                      id: '3',\r\n                      label: '角色',\r\n                      prop: 'roleName',\r\n                      tooltip:true,\r\n                    //   show:'template',\r\n                      align: 'center'\r\n                    },{\r\n                      id: '4',\r\n                      label: '手机号',\r\n                      prop: 'dccTel',\r\n                      tooltip:true,\r\n                      align: 'center'\r\n                    },{\r\n                      id: '5',\r\n                      label: '所属坐席组',\r\n                      prop: 'dccGroupTitle',\r\n                      tooltip:true,\r\n                      align: 'center'\r\n                    },{\r\n                      id: '6',\r\n                      label: '坐席电话',\r\n                      prop: 'seatTel',\r\n                      tooltip:true,\r\n                      align: 'center'\r\n                    },{\r\n                      id: '7',\r\n                      label: '操作',\r\n                      prop: 'caozuo',\r\n                      show:'template',\r\n                      minWidth: '120',\r\n                      align: 'center'\r\n                    },\r\n                ],\r\n                data: [],\r\n                page: {\r\n                    totalCount: 0,\r\n                    pageSize: 20,\r\n                    currentPage: 1\r\n                },\r\n                border: true, // 是否带边框\r\n                hasSelect: false, //是否有复选框\r\n                hasExpand: false, //是否有收缩功能\r\n                hasFirstPagination: true, //是否有第一条分页条\r\n                lastPageLayout: 'sizes, prev, pager, next', // 最后一行的分页是否显示sizes\r\n                search: {},\r\n            }\r\n        },\r\n        getParams(){\r\n            const { currentPage, pageSize } = this.dataTable.page;\r\n            const { keyword,groupSeat, list} = this.search;\r\n            let params = {\r\n                kwd: list[keyword].currentVal,\r\n                dccGroupId: list[groupSeat].currentVal,\r\n                pageSize: pageSize,         // 每页数量\r\n                page: currentPage,          // 当前页\r\n            }\r\n            return params;\r\n        },\r\n        queryData(){\r\n            let that = this;\r\n            let params = this.getParams();\r\n            this.$fetch.callCenter.seatList(params).then((res)=>{\r\n                this.$handleResponse(res, res=>{\r\n                    that.dataTable.data = res.list?res.list:[]; //表格所需数据\r\n                    that.dataTable.page = res.page?res.page:that.dataTable.page; //表格所需页面\r\n                },true);\r\n            }).catch(()=>{\r\n                this.$store.commit('closeLoading');\r\n            })\r\n        },\r\n        handleFn(type, item){\r\n            this.seatInfo.type = type;\r\n            this.seatInfo.row = item;\r\n            this.seatInfo.show = true;\r\n        },\r\n        closeSeat(type){\r\n            if(type =='success'){\r\n                this.queryData();\r\n            }\r\n            this.seatInfo.show = false;\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-wrap {\r\n    padding: 30px 20px 5px;\r\n}\r\n.seat-search.el-col-6{\r\n    width: 400px;\r\n}\r\n.seat-search-btn.el-col-6 {\r\n    width: 310px;\r\n}\r\n.seat-search-add.el-col-6{\r\n    width: calc(100% - 700px);\r\n    text-align: right;\r\n}\r\n\r\n.seat-setting-page .note {\r\n    color: #a8a8a8;\r\n    font-size: 14px;\r\n    margin-top: 9px;\r\n    padding-right: 5px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/call-center/seat/seat-setting/SeatSetting.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"seat-setting-page m-20 common-box \"},[_c('div',{staticClass:\"search-flex search-wrap\"},[_c('search-col',{staticClass:\"seat-search\",attrs:{\"info\":_vm.search.list[_vm.search.keyword],\"placeholder\":'DCC邀约员/手机号/坐席号'}}),_vm._v(\" \"),_c('search-col',{staticClass:\"seat-search\",attrs:{\"info\":_vm.search.list[_vm.search.groupSeat],\"placeholder\":'请选择'}}),_vm._v(\" \"),_c('search-col',{staticClass:\"seat-search-btn\",attrs:{\"leftCol\":0,\"rightCol\":24}},[_c('div',{attrs:{\"slot\":\"custom\"},slot:\"custom\"},[_c('el-button',{staticClass:\"m-l-30 w-110\",attrs:{\"round\":\"\",\"icon\":\"el-icon-search\",\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.find}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"round\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"small\",\"plain\":\"\"},on:{\"click\":_vm.clear}},[_vm._v(\"清空查询条件\")])],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"separate-line w-100-percent\"}),_vm._v(\" \"),_c('div',{staticClass:\"p-l-r-20 m-b-20\"},[_c('data-table',{ref:\"DataTableRef\",staticClass:\"table-cyan\",attrs:{\"table\":_vm.dataTable},on:{\"searchTable\":_vm.searchTable},scopedSlots:_vm._u([{key:\"caozuo\",fn:function(props){return [_c('el-button',{staticClass:\"blue_font_white_bg\",attrs:{\"plain\":\"\",\"round\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleFn('edit', props.obj.row)}}},[_vm._v(\"编辑\")])]}}])},[_c('div',{attrs:{\"slot\":\"buttons\"},slot:\"buttons\"},[_c('el-button',{staticClass:\"m-b-20\",attrs:{\"round\":\"\",\"icon\":\"el-icon-plus\",\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleFn('add', {})}}},[_vm._v(\"新增坐席\")])],1)])],1),_vm._v(\" \"),(_vm.seatInfo.show)?_c('add-seat',{attrs:{\"rowItem\":_vm.seatInfo},on:{\"close\":_vm.closeSeat}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-30cc8850\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/call-center/seat/seat-setting/SeatSetting.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-30cc8850\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SeatSetting.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SeatSetting.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SeatSetting.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-30cc8850\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SeatSetting.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-30cc8850\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/call-center/seat/seat-setting/SeatSetting.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}