webpackJsonp([28],{"6CAQ":function(e,t){},NO1u:function(e,t){},XKCX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),l=a("Dd8w"),o=a.n(l),s=a("NYxO"),n=a("/Uby"),c=a("IaGi"),d=a("ufHF"),p=a("RbfQ"),h=a("CKy9"),u=a("PdD4"),f={props:{showDialog:{type:Boolean,default:!1},row:{type:Object,default:function(){return{}}}},data:function(){return{info:{}}},methods:{seeArchive:function(){this.$router.push({path:"/business/potential/detail",query:{id:this.row.intentionId}})},cancel:function(){this.$emit("cancel")}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"invite-detail-dialog",attrs:{title:"邀约详情",visible:e.showDialog,width:"540px","append-to-body":"","close-on-click-modal":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.showDialog=t}}},[a("el-form",{ref:"form",staticClass:"m-t-20",attrs:{"label-position":"right","label-width":"150px"}},[a("el-form-item",{attrs:{label:"客户ID"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.userId))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"客户姓名"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.nickname))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"手机号码"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.tel))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"跟进DCC"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.dccName))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"邀约门店"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.areaName))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"意向车型"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.model))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"下发时间"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.createdAt))+" 分 ")]),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.statusName))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"预计到店时间"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.appointmentDate))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"实际到店时间"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.visitDate))+" "),e.row.fromSecondName?a("span",[e._v("- "+e._s(e.row.fromSecondName))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"到店类别"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.areaName))+" ")]),e._v(" "),a("el-form-item",{attrs:{label:"销售顾问"}},[e._v(" "+e._s(e._f("filterBlank")(e.row.advisorName))+" ")])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{round:"",size:"small",type:"primary"},on:{click:e.seeArchive}},[e._v("潜客详情")])],1)],1)},staticRenderFns:[]};var v=a("VU/8")(f,m,!1,function(e){a("NO1u")},"data-v-f3731cca",null).exports,b=a("PJh5"),_=a.n(b),g={components:{SearchBar:n.a,SearchCol:c.a,DataTable:d.a,ExportLog:p.a,CommonExport:h.a,InviteDetail:v},mixins:[u.a],data:function(){return{showDialog:!1,rowInfo:{},loading:!1}},created:function(){this.initData(),this.queryData()},computed:o()({},Object(s.b)(["roleKey"])),methods:{initData:function(){this.initSearch(),this.initTable(),this.initExport(),this.getBrandList(),this.getDccList(),this.getArrivalOptions("arrival"),this.getAreaOptions(),this.getInviteAdvisorOptions(),this.getAreaArchiveStatueOptions()},initExport:function(){this.exportConfig={fileName:"邀约导出",ext:"csv",idName:"id",select:[],taskType:"",url:"business.exportInviteExcel",other:{}},this.logConfig={listUrl:"business.exportInviteLog",downUrl:"business.exportInviteExcel"}},initSearch:function(){var e=this.$route&&this.$route.query,t="",a="";if(e.state){var i=_()(new Date).format("YYYY-MM-DD");switch(e.state){case"0":t=[i,i];break;case"1":a=[i,i]}}this.search={list:[{prop:"dccGroup",type:"select",label:"跟进坐席组",currentVal:"",selectOptions:[],optionLabel:"dccGroupName",optionValue:"id"},{prop:"dcc",type:"select",label:"跟进DCC",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"dccName",optionValue:"id"},{prop:"brand",type:"select",label:"意向品牌",currentVal:"",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"series",type:"select",label:"意向车系",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"model",type:"select",label:"意向车型",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"arrival",type:"select",label:"到店类别",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"area",type:"select",label:"邀约门店",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"advisor",type:"select",label:"销售顾问",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"advisorName",optionValue:"advisorTel"},{prop:"sendTime",type:"datePicker",label:"下发时间",currentVal:""},{prop:"areaStatus",type:"select",label:"档案状态",currentVal:"",isAll:!0,isAllTitle:"全部",selectOptions:[],optionLabel:"title",optionValue:"id"},{prop:"appoint",type:"datePicker",label:"预计到店时间",currentVal:t},{prop:"visited",type:"datePicker",label:"实际到店时间",currentVal:a}],dccGroup:0,dcc:1,brand:2,series:3,model:4,arrival:5,area:6,advisor:7,sendTime:8,areaStatus:9,appoint:10,visited:11}},initTable:function(){this.dataTable={tr:[{id:"1",label:"操作选项",prop:"caozuo",show:"template",minWidth:"160"},{id:"2",label:"客户ID",prop:"userId",tooltip:!0,minWidth:"100"},{id:"3",label:"客户姓名",prop:"nickname",tooltip:!0,minWidth:"100"},{id:"4",label:"手机号码",prop:"tel",tooltip:!0,minWidth:"120"},{id:"5",label:"跟进坐席组",prop:"dccGroupName",tooltip:!0,minWidth:"120"},{id:"6",label:"跟进DCC",prop:"dccName",tooltip:!0,minWidth:"120"},{id:"7",label:"邀约门店",prop:"areaName",tooltip:!0,minWidth:"140"},{id:"8",label:"意向车型",prop:"model",tooltip:!0,minWidth:"200"},{id:"9",label:"下发时间",prop:"createdAt",tooltip:!0,minWidth:"140"},{id:"10",label:"档案状态",prop:"areaArchiveStatusName",tooltip:!0,minWidth:"110"},{id:"11",label:"预计到店时间",prop:"appointmentDate",tooltip:!0,minWidth:"170"},{id:"12",label:"实际到店时间",prop:"visitDate",tooltip:!0,minWidth:"170"},{id:"13",label:"到店类别",prop:"statusName",tooltip:!0,minWidth:"110"},{id:"14",label:"销售顾问",prop:"advisorName",tooltip:!0,minWidth:"110"}],data:[],page:{totalCount:0,pageSize:20,currentPage:1},hasSelect:!0,hasExpand:!1,hasFirstPagination:!0,showScrollBar:!0,search:{value:"",show:!0,url:"business.queryInvitelList",width:"300",placeholder:"请输入手机号码、客户姓名",displayCol:["nickname","tel"],params:{id:""}}}},getParams:function(){var e=this.dataTable.page,t=e.currentPage,a=e.pageSize,i=this.search,r=i.brand,l=i.series,o=i.model,s=i.arrival,n=i.area,c=i.advisor,d=i.sendTime,p=i.areaStatus,h=i.appoint,u=i.visited,f=i.dccGroup,m=i.dcc,v=i.list;return{dccGroupId:v[f].currentVal,dccId:v[m].currentVal,brandId:v[r].currentVal,carSeriesId:v[l].currentVal,modelId:v[o].currentVal,status:v[s].currentVal,areaId:v[n].currentVal,advisorKeyword:v[c].currentVal,issueStartTime:v[d].currentVal&&v[d].currentVal[0]+" 00:00:00",issueEndTime:v[d].currentVal&&v[d].currentVal[0]+" 23:59:59",areaArchiveStatus:v[p].currentVal,appointmentDateStartTime:v[h].currentVal&&v[h].currentVal[0]+" 00:00:00",appointmentDateEndTime:v[h].currentVal&&v[h].currentVal[0]+" 23:59:59",visitDateStartTime:v[u].currentVal&&v[u].currentVal[0]+" 00:00:00",visitDateEndTime:v[u].currentVal&&v[u].currentVal[0]+" 23:59:59",pageSize:a,page:t}},queryData:function(){var e=this,t=this,a=this.getParams();this.exportConfig.other=r()({},a),this.$fetch.business.queryInvitelList(a).then(function(a){e.$handleResponse(a,function(e){t.dataTable.data=e.list?e.list:[],t.dataTable.page=e.page?e.page:t.dataTable.page},!0)}).catch(function(){e.$store.commit("closeLoading")})},seeDetail:function(e){this.showDialog=!0,this.rowInfo=e},handleFollow:function(e){this.$router.push({path:"/work/customerFollow",query:{id:e.intentionId,userId:e.userId}})},getAreaArchiveStatueOptions:function(){var e=this;this.$fetch.common.AreaArchiveStatusList({},!1,!1).then(function(t){e.$handleResponse(t,function(t){e.search.list[e.search.areaStatus].selectOptions=e.$hasArrContent(t)?t:[]},!1)})},remoteMethod:function(e){this.loading=!0,this.getInviteAdvisorOptions(e)},getInviteAdvisorOptions:function(e){var t=this;this.$fetch.business.inviteAdvisorList({advisorKeyword:e},!1,!1).then(function(e){t.loading=!1,t.$handleResponse(e,function(e){t.search.list[t.search.advisor].selectOptions=t.$hasArrContent(e.list)?e.list:[]},!1)}).catch(function(e){t.loading=!1})}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"potential-manage-page m-20 common-box"},[a("search-bar",{staticClass:"m-t-10 p-20",attrs:{size:"small"},on:{clear:e.clear,find:e.find}},[a("div",{staticClass:"search-flex"},[["dcc_supervisor","dcc_group_leader","dcc_inviter"].indexOf(e.roleKey)>-1?a("search-col",{attrs:{info:e.search.list[e.search.dccGroup],filterable:""},on:{change:e.changeDccGroup}}):e._e(),e._v(" "),["dcc_supervisor","dcc_group_leader","dcc_inviter"].indexOf(e.roleKey)>-1?a("search-col",{attrs:{info:e.search.list[e.search.dcc],filterable:""}}):e._e(),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.brand]},on:{change:e.changeBrand}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.series]},on:{change:e.changeSeries}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.model]}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.arrival]}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.area],filterable:""}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.advisor],clearable:"",filterable:"",remote:"",selectPlaceholder:"请输入名字,手机号进行搜索","remote-method":e.remoteMethod,loading:e.loading},on:{clear:e.remoteMethod}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.sendTime],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.areaStatus]}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.appoint],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}}),e._v(" "),a("search-col",{attrs:{info:e.search.list[e.search.visited],type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"}})],1)]),e._v(" "),a("div",{staticClass:"p-l-r-20 p-b-20"},[a("data-table",{ref:"DataTableRef",attrs:{table:e.dataTable},on:{searchTable:e.searchTable,onHandleSelectionChange:e.handleSelectionChange},scopedSlots:e._u([{key:"caozuo",fn:function(t){return[a("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini",disabled:-1==["dcc_inviter"].indexOf(e.roleKey)},on:{click:function(a){return e.handleFollow(t.obj.row)}}},[e._v("跟进")]),e._v(" "),a("el-button",{staticClass:"blue_font_white_bg",attrs:{plain:"",round:"",size:"mini"},on:{click:function(a){return e.seeDetail(t.obj.row)}}},[e._v("查看")])]}}])},[a("div",{attrs:{slot:"buttons"},slot:"buttons"})])],1),e._v(" "),a("invite-detail",{attrs:{showDialog:e.showDialog,row:e.rowInfo},on:{cancel:function(t){e.showDialog=!1}}})],1)},staticRenderFns:[]};var w=a("VU/8")(g,y,!1,function(e){a("6CAQ")},"data-v-1713059a",null);t.default=w.exports}});
//# sourceMappingURL=28.263024e23f05bd6bc670.js.map